(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function pp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gp={exports:{}},va={},mp={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xs=Symbol.for("react.element"),Dv=Symbol.for("react.portal"),zv=Symbol.for("react.fragment"),Uv=Symbol.for("react.strict_mode"),Bv=Symbol.for("react.profiler"),Fv=Symbol.for("react.provider"),Hv=Symbol.for("react.context"),Vv=Symbol.for("react.forward_ref"),Wv=Symbol.for("react.suspense"),qv=Symbol.for("react.memo"),Kv=Symbol.for("react.lazy"),Nd=Symbol.iterator;function Gv(e){return e===null||typeof e!="object"?null:(e=Nd&&e[Nd]||e["@@iterator"],typeof e=="function"?e:null)}var yp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vp=Object.assign,wp={};function ri(e,t,n){this.props=e,this.context=t,this.refs=wp,this.updater=n||yp}ri.prototype.isReactComponent={};ri.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _p(){}_p.prototype=ri.prototype;function ic(e,t,n){this.props=e,this.context=t,this.refs=wp,this.updater=n||yp}var sc=ic.prototype=new _p;sc.constructor=ic;vp(sc,ri.prototype);sc.isPureReactComponent=!0;var Pd=Array.isArray,xp=Object.prototype.hasOwnProperty,oc={current:null},Sp={key:!0,ref:!0,__self:!0,__source:!0};function kp(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)xp.call(t,r)&&!Sp.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xs,type:e,key:s,ref:o,props:i,_owner:oc.current}}function Yv(e,t){return{$$typeof:xs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ac(e){return typeof e=="object"&&e!==null&&e.$$typeof===xs}function Xv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ad=/\/+/g;function Za(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xv(""+e.key):t.toString(36)}function yo(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case xs:case Dv:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Za(o,0):r,Pd(i)?(n="",e!=null&&(n=e.replace(Ad,"$&/")+"/"),yo(i,t,n,"",function(u){return u})):i!=null&&(ac(i)&&(i=Yv(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ad,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Pd(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Za(s,a);o+=yo(s,t,n,l,i)}else if(l=Gv(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Za(s,a++),o+=yo(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ls(e,t,n){if(e==null)return e;var r=[],i=0;return yo(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Jv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},vo={transition:null},Qv={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:vo,ReactCurrentOwner:oc};function Ep(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Ls,forEach:function(e,t,n){Ls(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ls(e,function(){t++}),t},toArray:function(e){return Ls(e,function(t){return t})||[]},only:function(e){if(!ac(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ie.Component=ri;ie.Fragment=zv;ie.Profiler=Bv;ie.PureComponent=ic;ie.StrictMode=Uv;ie.Suspense=Wv;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qv;ie.act=Ep;ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=vp({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=oc.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)xp.call(t,l)&&!Sp.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:xs,type:e.type,key:i,ref:s,props:r,_owner:o}};ie.createContext=function(e){return e={$$typeof:Hv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Fv,_context:e},e.Consumer=e};ie.createElement=kp;ie.createFactory=function(e){var t=kp.bind(null,e);return t.type=e,t};ie.createRef=function(){return{current:null}};ie.forwardRef=function(e){return{$$typeof:Vv,render:e}};ie.isValidElement=ac;ie.lazy=function(e){return{$$typeof:Kv,_payload:{_status:-1,_result:e},_init:Jv}};ie.memo=function(e,t){return{$$typeof:qv,type:e,compare:t===void 0?null:t}};ie.startTransition=function(e){var t=vo.transition;vo.transition={};try{e()}finally{vo.transition=t}};ie.unstable_act=Ep;ie.useCallback=function(e,t){return We.current.useCallback(e,t)};ie.useContext=function(e){return We.current.useContext(e)};ie.useDebugValue=function(){};ie.useDeferredValue=function(e){return We.current.useDeferredValue(e)};ie.useEffect=function(e,t){return We.current.useEffect(e,t)};ie.useId=function(){return We.current.useId()};ie.useImperativeHandle=function(e,t,n){return We.current.useImperativeHandle(e,t,n)};ie.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};ie.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};ie.useMemo=function(e,t){return We.current.useMemo(e,t)};ie.useReducer=function(e,t,n){return We.current.useReducer(e,t,n)};ie.useRef=function(e){return We.current.useRef(e)};ie.useState=function(e){return We.current.useState(e)};ie.useSyncExternalStore=function(e,t,n){return We.current.useSyncExternalStore(e,t,n)};ie.useTransition=function(){return We.current.useTransition()};ie.version="18.3.1";mp.exports=ie;var L=mp.exports;const Zv=pp(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=L,tw=Symbol.for("react.element"),nw=Symbol.for("react.fragment"),rw=Object.prototype.hasOwnProperty,iw=ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sw={key:!0,ref:!0,__self:!0,__source:!0};function bp(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)rw.call(t,r)&&!sw.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:tw,type:e,key:s,ref:o,props:i,_owner:iw.current}}va.Fragment=nw;va.jsx=bp;va.jsxs=bp;gp.exports=va;var A=gp.exports,Cp={exports:{}},at={},Tp={exports:{}},Np={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,C){var j=b.length;b.push(C);e:for(;0<j;){var z=j-1>>>1,U=b[z];if(0<i(U,C))b[z]=C,b[j]=U,j=z;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var C=b[0],j=b.pop();if(j!==C){b[0]=j;e:for(var z=0,U=b.length,H=U>>>1;z<H;){var V=2*(z+1)-1,G=b[V],Y=V+1,X=b[Y];if(0>i(G,j))Y<U&&0>i(X,G)?(b[z]=X,b[Y]=j,z=Y):(b[z]=G,b[V]=j,z=V);else if(Y<U&&0>i(X,j))b[z]=X,b[Y]=j,z=Y;else break e}}return C}function i(b,C){var j=b.sortIndex-C.sortIndex;return j!==0?j:b.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,m=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(b){for(var C=n(u);C!==null;){if(C.callback===null)r(u);else if(C.startTime<=b)r(u),C.sortIndex=C.expirationTime,t(l,C);else break;C=n(u)}}function w(b){if(v=!1,h(b),!m)if(n(l)!==null)m=!0,R(k);else{var C=n(u);C!==null&&M(w,C.startTime-b)}}function k(b,C){m=!1,v&&(v=!1,g(N),N=-1),p=!0;var j=f;try{for(h(C),d=n(l);d!==null&&(!(d.expirationTime>C)||b&&!T());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var U=z(d.expirationTime<=C);C=e.unstable_now(),typeof U=="function"?d.callback=U:d===n(l)&&r(l),h(C)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var V=n(u);V!==null&&M(w,V.startTime-C),H=!1}return H}finally{d=null,f=j,p=!1}}var x=!1,E=null,N=-1,O=5,$=-1;function T(){return!(e.unstable_now()-$<O)}function P(){if(E!==null){var b=e.unstable_now();$=b;var C=!0;try{C=E(!0,b)}finally{C?D():(x=!1,E=null)}}else x=!1}var D;if(typeof y=="function")D=function(){y(P)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,I=S.port2;S.port1.onmessage=P,D=function(){I.postMessage(null)}}else D=function(){_(P,0)};function R(b){E=b,x||(x=!0,D())}function M(b,C){N=_(function(){b(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,R(k))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(b){switch(f){case 1:case 2:case 3:var C=3;break;default:C=f}var j=f;f=C;try{return b()}finally{f=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,C){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var j=f;f=b;try{return C()}finally{f=j}},e.unstable_scheduleCallback=function(b,C,j){var z=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?z+j:z):j=z,b){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=j+U,b={id:c++,callback:C,priorityLevel:b,startTime:j,expirationTime:U,sortIndex:-1},j>z?(b.sortIndex=j,t(u,b),n(l)===null&&b===n(u)&&(v?(g(N),N=-1):v=!0,M(w,j-z))):(b.sortIndex=U,t(l,b),m||p||(m=!0,R(k))),b},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(b){var C=f;return function(){var j=f;f=C;try{return b.apply(this,arguments)}finally{f=j}}}})(Np);Tp.exports=Np;var ow=Tp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=L,st=ow;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pp=new Set,Fi={};function ir(e,t){Fr(e,t),Fr(e+"Capture",t)}function Fr(e,t){for(Fi[e]=t,e=0;e<t.length;e++)Pp.add(t[e])}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=Object.prototype.hasOwnProperty,lw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rd={},Id={};function uw(e){return Fl.call(Id,e)?!0:Fl.call(Rd,e)?!1:lw.test(e)?Id[e]=!0:(Rd[e]=!0,!1)}function cw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dw(e,t,n,r){if(t===null||typeof t>"u"||cw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Me[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Me[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Me[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Me[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Me[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Me[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Me[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Me[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Me[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var lc=/[\-:]([a-z])/g;function uc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lc,uc);Me[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lc,uc);Me[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lc,uc);Me[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Me[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Me.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Me[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function cc(e,t,n,r){var i=Me.hasOwnProperty(t)?Me[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dw(t,n,i,r)&&(n=null),r||i===null?uw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zt=aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ms=Symbol.for("react.element"),vr=Symbol.for("react.portal"),wr=Symbol.for("react.fragment"),dc=Symbol.for("react.strict_mode"),Hl=Symbol.for("react.profiler"),Ap=Symbol.for("react.provider"),Rp=Symbol.for("react.context"),fc=Symbol.for("react.forward_ref"),Vl=Symbol.for("react.suspense"),Wl=Symbol.for("react.suspense_list"),hc=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),Ip=Symbol.for("react.offscreen"),Od=Symbol.iterator;function di(e){return e===null||typeof e!="object"?null:(e=Od&&e[Od]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,el;function Si(e){if(el===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);el=t&&t[1]||""}return`
`+el+e}var tl=!1;function nl(e,t){if(!e||tl)return"";tl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{tl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Si(e):""}function fw(e){switch(e.tag){case 5:return Si(e.type);case 16:return Si("Lazy");case 13:return Si("Suspense");case 19:return Si("SuspenseList");case 0:case 2:case 15:return e=nl(e.type,!1),e;case 11:return e=nl(e.type.render,!1),e;case 1:return e=nl(e.type,!0),e;default:return""}}function ql(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wr:return"Fragment";case vr:return"Portal";case Hl:return"Profiler";case dc:return"StrictMode";case Vl:return"Suspense";case Wl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rp:return(e.displayName||"Context")+".Consumer";case Ap:return(e._context.displayName||"Context")+".Provider";case fc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hc:return t=e.displayName||null,t!==null?t:ql(e.type)||"Memo";case an:t=e._payload,e=e._init;try{return ql(e(t))}catch{}}return null}function hw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ql(t);case 8:return t===dc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Op(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pw(e){var t=Op(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ds(e){e._valueTracker||(e._valueTracker=pw(e))}function $p(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Op(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $o(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kl(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function $d(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=bn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jp(e,t){t=t.checked,t!=null&&cc(e,"checked",t,!1)}function Gl(e,t){jp(e,t);var n=bn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Yl(e,t.type,bn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Yl(e,t,n){(t!=="number"||$o(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ki=Array.isArray;function Or(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+bn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Xl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ld(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(ki(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:bn(n)}}function Lp(e,t){var n=bn(t.value),r=bn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Md(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zs,Dp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gw=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(e){gw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pi[t]=Pi[e]})});function zp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pi.hasOwnProperty(e)&&Pi[e]?(""+t).trim():t+"px"}function Up(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=zp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var mw=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ql(e,t){if(t){if(mw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function Zl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eu=null;function pc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tu=null,$r=null,jr=null;function Dd(e){if(e=Es(e)){if(typeof tu!="function")throw Error(B(280));var t=e.stateNode;t&&(t=ka(t),tu(e.stateNode,e.type,t))}}function Bp(e){$r?jr?jr.push(e):jr=[e]:$r=e}function Fp(){if($r){var e=$r,t=jr;if(jr=$r=null,Dd(e),t)for(e=0;e<t.length;e++)Dd(t[e])}}function Hp(e,t){return e(t)}function Vp(){}var rl=!1;function Wp(e,t,n){if(rl)return e(t,n);rl=!0;try{return Hp(e,t,n)}finally{rl=!1,($r!==null||jr!==null)&&(Vp(),Fp())}}function Vi(e,t){var n=e.stateNode;if(n===null)return null;var r=ka(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var nu=!1;if(Gt)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){nu=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{nu=!1}function yw(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ai=!1,jo=null,Lo=!1,ru=null,vw={onError:function(e){Ai=!0,jo=e}};function ww(e,t,n,r,i,s,o,a,l){Ai=!1,jo=null,yw.apply(vw,arguments)}function _w(e,t,n,r,i,s,o,a,l){if(ww.apply(this,arguments),Ai){if(Ai){var u=jo;Ai=!1,jo=null}else throw Error(B(198));Lo||(Lo=!0,ru=u)}}function sr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zd(e){if(sr(e)!==e)throw Error(B(188))}function xw(e){var t=e.alternate;if(!t){if(t=sr(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zd(i),e;if(s===r)return zd(i),t;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function Kp(e){return e=xw(e),e!==null?Gp(e):null}function Gp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gp(e);if(t!==null)return t;e=e.sibling}return null}var Yp=st.unstable_scheduleCallback,Ud=st.unstable_cancelCallback,Sw=st.unstable_shouldYield,kw=st.unstable_requestPaint,ke=st.unstable_now,Ew=st.unstable_getCurrentPriorityLevel,gc=st.unstable_ImmediatePriority,Xp=st.unstable_UserBlockingPriority,Mo=st.unstable_NormalPriority,bw=st.unstable_LowPriority,Jp=st.unstable_IdlePriority,wa=null,$t=null;function Cw(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(wa,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:Pw,Tw=Math.log,Nw=Math.LN2;function Pw(e){return e>>>=0,e===0?32:31-(Tw(e)/Nw|0)|0}var Us=64,Bs=4194304;function Ei(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Do(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ei(a):(s&=o,s!==0&&(r=Ei(s)))}else o=n&~i,o!==0?r=Ei(o):s!==0&&(r=Ei(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ct(t),i=1<<n,r|=e[n],t&=~i;return r}function Aw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ct(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Aw(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function iu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qp(){var e=Us;return Us<<=1,!(Us&4194240)&&(Us=64),e}function il(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ss(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=n}function Iw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ct(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function mc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ct(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ue=0;function Zp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var eg,yc,tg,ng,rg,su=!1,Fs=[],mn=null,yn=null,vn=null,Wi=new Map,qi=new Map,cn=[],Ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bd(e,t){switch(e){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":Wi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(t.pointerId)}}function hi(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Es(t),t!==null&&yc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $w(e,t,n,r,i){switch(t){case"focusin":return mn=hi(mn,e,t,n,r,i),!0;case"dragenter":return yn=hi(yn,e,t,n,r,i),!0;case"mouseover":return vn=hi(vn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Wi.set(s,hi(Wi.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qi.set(s,hi(qi.get(s)||null,e,t,n,r,i)),!0}return!1}function ig(e){var t=zn(e.target);if(t!==null){var n=sr(t);if(n!==null){if(t=n.tag,t===13){if(t=qp(n),t!==null){e.blockedOn=t,rg(e.priority,function(){tg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ou(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);eu=r,n.target.dispatchEvent(r),eu=null}else return t=Es(n),t!==null&&yc(t),e.blockedOn=n,!1;t.shift()}return!0}function Fd(e,t,n){wo(e)&&n.delete(t)}function jw(){su=!1,mn!==null&&wo(mn)&&(mn=null),yn!==null&&wo(yn)&&(yn=null),vn!==null&&wo(vn)&&(vn=null),Wi.forEach(Fd),qi.forEach(Fd)}function pi(e,t){e.blockedOn===t&&(e.blockedOn=null,su||(su=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,jw)))}function Ki(e){function t(i){return pi(i,e)}if(0<Fs.length){pi(Fs[0],e);for(var n=1;n<Fs.length;n++){var r=Fs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(mn!==null&&pi(mn,e),yn!==null&&pi(yn,e),vn!==null&&pi(vn,e),Wi.forEach(t),qi.forEach(t),n=0;n<cn.length;n++)r=cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)ig(n),n.blockedOn===null&&cn.shift()}var Lr=Zt.ReactCurrentBatchConfig,zo=!0;function Lw(e,t,n,r){var i=ue,s=Lr.transition;Lr.transition=null;try{ue=1,vc(e,t,n,r)}finally{ue=i,Lr.transition=s}}function Mw(e,t,n,r){var i=ue,s=Lr.transition;Lr.transition=null;try{ue=4,vc(e,t,n,r)}finally{ue=i,Lr.transition=s}}function vc(e,t,n,r){if(zo){var i=ou(e,t,n,r);if(i===null)pl(e,t,r,Uo,n),Bd(e,r);else if($w(i,e,t,n,r))r.stopPropagation();else if(Bd(e,r),t&4&&-1<Ow.indexOf(e)){for(;i!==null;){var s=Es(i);if(s!==null&&eg(s),s=ou(e,t,n,r),s===null&&pl(e,t,r,Uo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else pl(e,t,r,null,n)}}var Uo=null;function ou(e,t,n,r){if(Uo=null,e=pc(r),e=zn(e),e!==null)if(t=sr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Uo=e,null}function sg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ew()){case gc:return 1;case Xp:return 4;case Mo:case bw:return 16;case Jp:return 536870912;default:return 16}default:return 16}}var pn=null,wc=null,_o=null;function og(){if(_o)return _o;var e,t=wc,n=t.length,r,i="value"in pn?pn.value:pn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return _o=i.slice(e,1<r?1-r:void 0)}function xo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hs(){return!0}function Hd(){return!1}function lt(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hs:Hd,this.isPropagationStopped=Hd,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),t}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_c=lt(ii),ks=_e({},ii,{view:0,detail:0}),Dw=lt(ks),sl,ol,gi,_a=_e({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gi&&(gi&&e.type==="mousemove"?(sl=e.screenX-gi.screenX,ol=e.screenY-gi.screenY):ol=sl=0,gi=e),sl)},movementY:function(e){return"movementY"in e?e.movementY:ol}}),Vd=lt(_a),zw=_e({},_a,{dataTransfer:0}),Uw=lt(zw),Bw=_e({},ks,{relatedTarget:0}),al=lt(Bw),Fw=_e({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),Hw=lt(Fw),Vw=_e({},ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ww=lt(Vw),qw=_e({},ii,{data:0}),Wd=lt(qw),Kw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yw[e])?!!t[e]:!1}function xc(){return Xw}var Jw=_e({},ks,{key:function(e){if(e.key){var t=Kw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(e){return e.type==="keypress"?xo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qw=lt(Jw),Zw=_e({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qd=lt(Zw),e_=_e({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),t_=lt(e_),n_=_e({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),r_=lt(n_),i_=_e({},_a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),s_=lt(i_),o_=[9,13,27,32],Sc=Gt&&"CompositionEvent"in window,Ri=null;Gt&&"documentMode"in document&&(Ri=document.documentMode);var a_=Gt&&"TextEvent"in window&&!Ri,ag=Gt&&(!Sc||Ri&&8<Ri&&11>=Ri),Kd=" ",Gd=!1;function lg(e,t){switch(e){case"keyup":return o_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ug(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function l_(e,t){switch(e){case"compositionend":return ug(t);case"keypress":return t.which!==32?null:(Gd=!0,Kd);case"textInput":return e=t.data,e===Kd&&Gd?null:e;default:return null}}function u_(e,t){if(_r)return e==="compositionend"||!Sc&&lg(e,t)?(e=og(),_o=wc=pn=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ag&&t.locale!=="ko"?null:t.data;default:return null}}var c_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!c_[e.type]:t==="textarea"}function cg(e,t,n,r){Bp(r),t=Bo(t,"onChange"),0<t.length&&(n=new _c("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ii=null,Gi=null;function d_(e){xg(e,0)}function xa(e){var t=kr(e);if($p(t))return e}function f_(e,t){if(e==="change")return t}var dg=!1;if(Gt){var ll;if(Gt){var ul="oninput"in document;if(!ul){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),ul=typeof Xd.oninput=="function"}ll=ul}else ll=!1;dg=ll&&(!document.documentMode||9<document.documentMode)}function Jd(){Ii&&(Ii.detachEvent("onpropertychange",fg),Gi=Ii=null)}function fg(e){if(e.propertyName==="value"&&xa(Gi)){var t=[];cg(t,Gi,e,pc(e)),Wp(d_,t)}}function h_(e,t,n){e==="focusin"?(Jd(),Ii=t,Gi=n,Ii.attachEvent("onpropertychange",fg)):e==="focusout"&&Jd()}function p_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xa(Gi)}function g_(e,t){if(e==="click")return xa(t)}function m_(e,t){if(e==="input"||e==="change")return xa(t)}function y_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:y_;function Yi(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Fl.call(t,i)||!Nt(e[i],t[i]))return!1}return!0}function Qd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zd(e,t){var n=Qd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qd(n)}}function hg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pg(){for(var e=window,t=$o();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$o(e.document)}return t}function kc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function v_(e){var t=pg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hg(n.ownerDocument.documentElement,n)){if(r!==null&&kc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Zd(n,s);var o=Zd(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var w_=Gt&&"documentMode"in document&&11>=document.documentMode,xr=null,au=null,Oi=null,lu=!1;function ef(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lu||xr==null||xr!==$o(r)||(r=xr,"selectionStart"in r&&kc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oi&&Yi(Oi,r)||(Oi=r,r=Bo(au,"onSelect"),0<r.length&&(t=new _c("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xr)))}function Vs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionend:Vs("Transition","TransitionEnd")},cl={},gg={};Gt&&(gg=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function Sa(e){if(cl[e])return cl[e];if(!Sr[e])return e;var t=Sr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in gg)return cl[e]=t[n];return e}var mg=Sa("animationend"),yg=Sa("animationiteration"),vg=Sa("animationstart"),wg=Sa("transitionend"),_g=new Map,tf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(e,t){_g.set(e,t),ir(t,[e])}for(var dl=0;dl<tf.length;dl++){var fl=tf[dl],__=fl.toLowerCase(),x_=fl[0].toUpperCase()+fl.slice(1);Tn(__,"on"+x_)}Tn(mg,"onAnimationEnd");Tn(yg,"onAnimationIteration");Tn(vg,"onAnimationStart");Tn("dblclick","onDoubleClick");Tn("focusin","onFocus");Tn("focusout","onBlur");Tn(wg,"onTransitionEnd");Fr("onMouseEnter",["mouseout","mouseover"]);Fr("onMouseLeave",["mouseout","mouseover"]);Fr("onPointerEnter",["pointerout","pointerover"]);Fr("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S_=new Set("cancel close invalid load scroll toggle".split(" ").concat(bi));function nf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,_w(r,t,void 0,e),e.currentTarget=null}function xg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;nf(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;nf(i,a,u),s=l}}}if(Lo)throw e=ru,Lo=!1,ru=null,e}function he(e,t){var n=t[hu];n===void 0&&(n=t[hu]=new Set);var r=e+"__bubble";n.has(r)||(Sg(t,e,2,!1),n.add(r))}function hl(e,t,n){var r=0;t&&(r|=4),Sg(n,e,r,t)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function Xi(e){if(!e[Ws]){e[Ws]=!0,Pp.forEach(function(n){n!=="selectionchange"&&(S_.has(n)||hl(n,!1,e),hl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ws]||(t[Ws]=!0,hl("selectionchange",!1,t))}}function Sg(e,t,n,r){switch(sg(t)){case 1:var i=Lw;break;case 4:i=Mw;break;default:i=vc}n=i.bind(null,t,n,e),i=void 0,!nu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function pl(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=zn(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Wp(function(){var u=s,c=pc(n),d=[];e:{var f=_g.get(e);if(f!==void 0){var p=_c,m=e;switch(e){case"keypress":if(xo(n)===0)break e;case"keydown":case"keyup":p=Qw;break;case"focusin":m="focus",p=al;break;case"focusout":m="blur",p=al;break;case"beforeblur":case"afterblur":p=al;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Uw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=t_;break;case mg:case yg:case vg:p=Hw;break;case wg:p=r_;break;case"scroll":p=Dw;break;case"wheel":p=s_;break;case"copy":case"cut":case"paste":p=Ww;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=qd}var v=(t&4)!==0,_=!v&&e==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var y=u,h;y!==null;){h=y;var w=h.stateNode;if(h.tag===5&&w!==null&&(h=w,g!==null&&(w=Vi(y,g),w!=null&&v.push(Ji(y,w,h)))),_)break;y=y.return}0<v.length&&(f=new p(f,m,null,n,c),d.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==eu&&(m=n.relatedTarget||n.fromElement)&&(zn(m)||m[Yt]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?zn(m):null,m!==null&&(_=sr(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Vd,w="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=qd,w="onPointerLeave",g="onPointerEnter",y="pointer"),_=p==null?f:kr(p),h=m==null?f:kr(m),f=new v(w,y+"leave",p,n,c),f.target=_,f.relatedTarget=h,w=null,zn(c)===u&&(v=new v(g,y+"enter",m,n,c),v.target=h,v.relatedTarget=_,w=v),_=w,p&&m)t:{for(v=p,g=m,y=0,h=v;h;h=ar(h))y++;for(h=0,w=g;w;w=ar(w))h++;for(;0<y-h;)v=ar(v),y--;for(;0<h-y;)g=ar(g),h--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=ar(v),g=ar(g)}v=null}else v=null;p!==null&&rf(d,f,p,v,!1),m!==null&&_!==null&&rf(d,_,m,v,!0)}}e:{if(f=u?kr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=f_;else if(Yd(f))if(dg)k=m_;else{k=p_;var x=h_}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=g_);if(k&&(k=k(e,u))){cg(d,k,n,c);break e}x&&x(e,f,u),e==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&Yl(f,"number",f.value)}switch(x=u?kr(u):window,e){case"focusin":(Yd(x)||x.contentEditable==="true")&&(xr=x,au=u,Oi=null);break;case"focusout":Oi=au=xr=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,ef(d,n,c);break;case"selectionchange":if(w_)break;case"keydown":case"keyup":ef(d,n,c)}var E;if(Sc)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else _r?lg(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(ag&&n.locale!=="ko"&&(_r||N!=="onCompositionStart"?N==="onCompositionEnd"&&_r&&(E=og()):(pn=c,wc="value"in pn?pn.value:pn.textContent,_r=!0)),x=Bo(u,N),0<x.length&&(N=new Wd(N,e,null,n,c),d.push({event:N,listeners:x}),E?N.data=E:(E=ug(n),E!==null&&(N.data=E)))),(E=a_?l_(e,n):u_(e,n))&&(u=Bo(u,"onBeforeInput"),0<u.length&&(c=new Wd("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}xg(d,t)})}function Ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bo(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vi(e,n),s!=null&&r.unshift(Ji(e,s,i)),s=Vi(e,t),s!=null&&r.push(Ji(e,s,i))),e=e.return}return r}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rf(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Vi(n,s),l!=null&&o.unshift(Ji(n,l,a))):i||(l=Vi(n,s),l!=null&&o.push(Ji(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var k_=/\r\n?/g,E_=/\u0000|\uFFFD/g;function sf(e){return(typeof e=="string"?e:""+e).replace(k_,`
`).replace(E_,"")}function qs(e,t,n){if(t=sf(t),sf(e)!==t&&n)throw Error(B(425))}function Fo(){}var uu=null,cu=null;function du(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fu=typeof setTimeout=="function"?setTimeout:void 0,b_=typeof clearTimeout=="function"?clearTimeout:void 0,of=typeof Promise=="function"?Promise:void 0,C_=typeof queueMicrotask=="function"?queueMicrotask:typeof of<"u"?function(e){return of.resolve(null).then(e).catch(T_)}:fu;function T_(e){setTimeout(function(){throw e})}function gl(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ki(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ki(t)}function wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function af(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),Ot="__reactFiber$"+si,Qi="__reactProps$"+si,Yt="__reactContainer$"+si,hu="__reactEvents$"+si,N_="__reactListeners$"+si,P_="__reactHandles$"+si;function zn(e){var t=e[Ot];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yt]||n[Ot]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=af(e);e!==null;){if(n=e[Ot])return n;e=af(e)}return t}e=n,n=e.parentNode}return null}function Es(e){return e=e[Ot]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function ka(e){return e[Qi]||null}var pu=[],Er=-1;function Nn(e){return{current:e}}function pe(e){0>Er||(e.current=pu[Er],pu[Er]=null,Er--)}function de(e,t){Er++,pu[Er]=e.current,e.current=t}var Cn={},Fe=Nn(Cn),Xe=Nn(!1),Gn=Cn;function Hr(e,t){var n=e.type.contextTypes;if(!n)return Cn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Je(e){return e=e.childContextTypes,e!=null}function Ho(){pe(Xe),pe(Fe)}function lf(e,t,n){if(Fe.current!==Cn)throw Error(B(168));de(Fe,t),de(Xe,n)}function kg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(B(108,hw(e)||"Unknown",i));return _e({},n,r)}function Vo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,Gn=Fe.current,de(Fe,e),de(Xe,Xe.current),!0}function uf(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=kg(e,t,Gn),r.__reactInternalMemoizedMergedChildContext=e,pe(Xe),pe(Fe),de(Fe,e)):pe(Xe),de(Xe,n)}var Ht=null,Ea=!1,ml=!1;function Eg(e){Ht===null?Ht=[e]:Ht.push(e)}function A_(e){Ea=!0,Eg(e)}function Pn(){if(!ml&&Ht!==null){ml=!0;var e=0,t=ue;try{var n=Ht;for(ue=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ht=null,Ea=!1}catch(i){throw Ht!==null&&(Ht=Ht.slice(e+1)),Yp(gc,Pn),i}finally{ue=t,ml=!1}}return null}var br=[],Cr=0,Wo=null,qo=0,ut=[],ct=0,Yn=null,Vt=1,Wt="";function On(e,t){br[Cr++]=qo,br[Cr++]=Wo,Wo=e,qo=t}function bg(e,t,n){ut[ct++]=Vt,ut[ct++]=Wt,ut[ct++]=Yn,Yn=e;var r=Vt;e=Wt;var i=32-Ct(r)-1;r&=~(1<<i),n+=1;var s=32-Ct(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vt=1<<32-Ct(t)+i|n<<i|r,Wt=s+e}else Vt=1<<s|n<<i|r,Wt=e}function Ec(e){e.return!==null&&(On(e,1),bg(e,1,0))}function bc(e){for(;e===Wo;)Wo=br[--Cr],br[Cr]=null,qo=br[--Cr],br[Cr]=null;for(;e===Yn;)Yn=ut[--ct],ut[ct]=null,Wt=ut[--ct],ut[ct]=null,Vt=ut[--ct],ut[ct]=null}var it=null,rt=null,ge=!1,St=null;function Cg(e,t){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function cf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,rt=wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yn!==null?{id:Vt,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,it=e,rt=null,!0):!1;default:return!1}}function gu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mu(e){if(ge){var t=rt;if(t){var n=t;if(!cf(e,t)){if(gu(e))throw Error(B(418));t=wn(n.nextSibling);var r=it;t&&cf(e,t)?Cg(r,n):(e.flags=e.flags&-4097|2,ge=!1,it=e)}}else{if(gu(e))throw Error(B(418));e.flags=e.flags&-4097|2,ge=!1,it=e}}}function df(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function Ks(e){if(e!==it)return!1;if(!ge)return df(e),ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!du(e.type,e.memoizedProps)),t&&(t=rt)){if(gu(e))throw Tg(),Error(B(418));for(;t;)Cg(e,t),t=wn(t.nextSibling)}if(df(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rt=wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rt=null}}else rt=it?wn(e.stateNode.nextSibling):null;return!0}function Tg(){for(var e=rt;e;)e=wn(e.nextSibling)}function Vr(){rt=it=null,ge=!1}function Cc(e){St===null?St=[e]:St.push(e)}var R_=Zt.ReactCurrentBatchConfig;function mi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ff(e){var t=e._init;return t(e._payload)}function Ng(e){function t(g,y){if(e){var h=g.deletions;h===null?(g.deletions=[y],g.flags|=16):h.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=kn(g,y),g.index=0,g.sibling=null,g}function s(g,y,h){return g.index=h,e?(h=g.alternate,h!==null?(h=h.index,h<y?(g.flags|=2,y):h):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,h,w){return y===null||y.tag!==6?(y=kl(h,g.mode,w),y.return=g,y):(y=i(y,h),y.return=g,y)}function l(g,y,h,w){var k=h.type;return k===wr?c(g,y,h.props.children,w,h.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===an&&ff(k)===y.type)?(w=i(y,h.props),w.ref=mi(g,y,h),w.return=g,w):(w=No(h.type,h.key,h.props,null,g.mode,w),w.ref=mi(g,y,h),w.return=g,w)}function u(g,y,h,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==h.containerInfo||y.stateNode.implementation!==h.implementation?(y=El(h,g.mode,w),y.return=g,y):(y=i(y,h.children||[]),y.return=g,y)}function c(g,y,h,w,k){return y===null||y.tag!==7?(y=Wn(h,g.mode,w,k),y.return=g,y):(y=i(y,h),y.return=g,y)}function d(g,y,h){if(typeof y=="string"&&y!==""||typeof y=="number")return y=kl(""+y,g.mode,h),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ms:return h=No(y.type,y.key,y.props,null,g.mode,h),h.ref=mi(g,null,y),h.return=g,h;case vr:return y=El(y,g.mode,h),y.return=g,y;case an:var w=y._init;return d(g,w(y._payload),h)}if(ki(y)||di(y))return y=Wn(y,g.mode,h,null),y.return=g,y;Gs(g,y)}return null}function f(g,y,h,w){var k=y!==null?y.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return k!==null?null:a(g,y,""+h,w);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ms:return h.key===k?l(g,y,h,w):null;case vr:return h.key===k?u(g,y,h,w):null;case an:return k=h._init,f(g,y,k(h._payload),w)}if(ki(h)||di(h))return k!==null?null:c(g,y,h,w,null);Gs(g,h)}return null}function p(g,y,h,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(h)||null,a(y,g,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ms:return g=g.get(w.key===null?h:w.key)||null,l(y,g,w,k);case vr:return g=g.get(w.key===null?h:w.key)||null,u(y,g,w,k);case an:var x=w._init;return p(g,y,h,x(w._payload),k)}if(ki(w)||di(w))return g=g.get(h)||null,c(y,g,w,k,null);Gs(y,w)}return null}function m(g,y,h,w){for(var k=null,x=null,E=y,N=y=0,O=null;E!==null&&N<h.length;N++){E.index>N?(O=E,E=null):O=E.sibling;var $=f(g,E,h[N],w);if($===null){E===null&&(E=O);break}e&&E&&$.alternate===null&&t(g,E),y=s($,y,N),x===null?k=$:x.sibling=$,x=$,E=O}if(N===h.length)return n(g,E),ge&&On(g,N),k;if(E===null){for(;N<h.length;N++)E=d(g,h[N],w),E!==null&&(y=s(E,y,N),x===null?k=E:x.sibling=E,x=E);return ge&&On(g,N),k}for(E=r(g,E);N<h.length;N++)O=p(E,g,N,h[N],w),O!==null&&(e&&O.alternate!==null&&E.delete(O.key===null?N:O.key),y=s(O,y,N),x===null?k=O:x.sibling=O,x=O);return e&&E.forEach(function(T){return t(g,T)}),ge&&On(g,N),k}function v(g,y,h,w){var k=di(h);if(typeof k!="function")throw Error(B(150));if(h=k.call(h),h==null)throw Error(B(151));for(var x=k=null,E=y,N=y=0,O=null,$=h.next();E!==null&&!$.done;N++,$=h.next()){E.index>N?(O=E,E=null):O=E.sibling;var T=f(g,E,$.value,w);if(T===null){E===null&&(E=O);break}e&&E&&T.alternate===null&&t(g,E),y=s(T,y,N),x===null?k=T:x.sibling=T,x=T,E=O}if($.done)return n(g,E),ge&&On(g,N),k;if(E===null){for(;!$.done;N++,$=h.next())$=d(g,$.value,w),$!==null&&(y=s($,y,N),x===null?k=$:x.sibling=$,x=$);return ge&&On(g,N),k}for(E=r(g,E);!$.done;N++,$=h.next())$=p(E,g,N,$.value,w),$!==null&&(e&&$.alternate!==null&&E.delete($.key===null?N:$.key),y=s($,y,N),x===null?k=$:x.sibling=$,x=$);return e&&E.forEach(function(P){return t(g,P)}),ge&&On(g,N),k}function _(g,y,h,w){if(typeof h=="object"&&h!==null&&h.type===wr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Ms:e:{for(var k=h.key,x=y;x!==null;){if(x.key===k){if(k=h.type,k===wr){if(x.tag===7){n(g,x.sibling),y=i(x,h.props.children),y.return=g,g=y;break e}}else if(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===an&&ff(k)===x.type){n(g,x.sibling),y=i(x,h.props),y.ref=mi(g,x,h),y.return=g,g=y;break e}n(g,x);break}else t(g,x);x=x.sibling}h.type===wr?(y=Wn(h.props.children,g.mode,w,h.key),y.return=g,g=y):(w=No(h.type,h.key,h.props,null,g.mode,w),w.ref=mi(g,y,h),w.return=g,g=w)}return o(g);case vr:e:{for(x=h.key;y!==null;){if(y.key===x)if(y.tag===4&&y.stateNode.containerInfo===h.containerInfo&&y.stateNode.implementation===h.implementation){n(g,y.sibling),y=i(y,h.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=El(h,g.mode,w),y.return=g,g=y}return o(g);case an:return x=h._init,_(g,y,x(h._payload),w)}if(ki(h))return m(g,y,h,w);if(di(h))return v(g,y,h,w);Gs(g,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,h),y.return=g,g=y):(n(g,y),y=kl(h,g.mode,w),y.return=g,g=y),o(g)):n(g,y)}return _}var Wr=Ng(!0),Pg=Ng(!1),Ko=Nn(null),Go=null,Tr=null,Tc=null;function Nc(){Tc=Tr=Go=null}function Pc(e){var t=Ko.current;pe(Ko),e._currentValue=t}function yu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Mr(e,t){Go=e,Tc=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ge=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(Tc!==e)if(e={context:e,memoizedValue:t,next:null},Tr===null){if(Go===null)throw Error(B(308));Tr=e,Go.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return t}var Un=null;function Ac(e){Un===null?Un=[e]:Un.push(e)}function Ag(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ac(t)):(n.next=i.next,i.next=n),t.interleaved=n,Xt(e,r)}function Xt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ln=!1;function Rc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _n(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Xt(e,n)}return i=r.interleaved,i===null?(t.next=t,Ac(r)):(t.next=i.next,i.next=t),r.interleaved=t,Xt(e,n)}function So(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mc(e,n)}}function hf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yo(e,t,n,r){var i=e.updateQueue;ln=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,v=a;switch(f=t,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=_e({},d,f);break e;case 2:ln=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Jn|=o,e.lanes=o,e.memoizedState=d}}function pf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var bs={},jt=Nn(bs),Zi=Nn(bs),es=Nn(bs);function Bn(e){if(e===bs)throw Error(B(174));return e}function Ic(e,t){switch(de(es,t),de(Zi,e),de(jt,bs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jl(t,e)}pe(jt),de(jt,t)}function qr(){pe(jt),pe(Zi),pe(es)}function Ig(e){Bn(es.current);var t=Bn(jt.current),n=Jl(t,e.type);t!==n&&(de(Zi,e),de(jt,n))}function Oc(e){Zi.current===e&&(pe(jt),pe(Zi))}var ve=Nn(0);function Xo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yl=[];function $c(){for(var e=0;e<yl.length;e++)yl[e]._workInProgressVersionPrimary=null;yl.length=0}var ko=Zt.ReactCurrentDispatcher,vl=Zt.ReactCurrentBatchConfig,Xn=0,we=null,Pe=null,Re=null,Jo=!1,$i=!1,ts=0,I_=0;function ze(){throw Error(B(321))}function jc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nt(e[n],t[n]))return!1;return!0}function Lc(e,t,n,r,i,s){if(Xn=s,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ko.current=e===null||e.memoizedState===null?L_:M_,e=n(r,i),$i){s=0;do{if($i=!1,ts=0,25<=s)throw Error(B(301));s+=1,Re=Pe=null,t.updateQueue=null,ko.current=D_,e=n(r,i)}while($i)}if(ko.current=Qo,t=Pe!==null&&Pe.next!==null,Xn=0,Re=Pe=we=null,Jo=!1,t)throw Error(B(300));return e}function Mc(){var e=ts!==0;return ts=0,e}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?we.memoizedState=Re=e:Re=Re.next=e,Re}function pt(){if(Pe===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Re===null?we.memoizedState:Re.next;if(t!==null)Re=t,Pe=e;else{if(e===null)throw Error(B(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Re===null?we.memoizedState=Re=e:Re=Re.next=e}return Re}function ns(e,t){return typeof t=="function"?t(e):t}function wl(e){var t=pt(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=Pe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Xn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,we.lanes|=c,Jn|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Nt(r,t.memoizedState)||(Ge=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,we.lanes|=s,Jn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _l(e){var t=pt(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Nt(s,t.memoizedState)||(Ge=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Og(){}function $g(e,t){var n=we,r=pt(),i=t(),s=!Nt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ge=!0),r=r.queue,Dc(Mg.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,rs(9,Lg.bind(null,n,r,i,t),void 0,null),Ie===null)throw Error(B(349));Xn&30||jg(n,t,i)}return i}function jg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lg(e,t,n,r){t.value=n,t.getSnapshot=r,Dg(t)&&zg(e)}function Mg(e,t,n){return n(function(){Dg(t)&&zg(e)})}function Dg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nt(e,n)}catch{return!0}}function zg(e){var t=Xt(e,1);t!==null&&Tt(t,e,1,-1)}function gf(e){var t=Rt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e},t.queue=e,e=e.dispatch=j_.bind(null,we,e),[t.memoizedState,e]}function rs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ug(){return pt().memoizedState}function Eo(e,t,n,r){var i=Rt();we.flags|=e,i.memoizedState=rs(1|t,n,void 0,r===void 0?null:r)}function ba(e,t,n,r){var i=pt();r=r===void 0?null:r;var s=void 0;if(Pe!==null){var o=Pe.memoizedState;if(s=o.destroy,r!==null&&jc(r,o.deps)){i.memoizedState=rs(t,n,s,r);return}}we.flags|=e,i.memoizedState=rs(1|t,n,s,r)}function mf(e,t){return Eo(8390656,8,e,t)}function Dc(e,t){return ba(2048,8,e,t)}function Bg(e,t){return ba(4,2,e,t)}function Fg(e,t){return ba(4,4,e,t)}function Hg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vg(e,t,n){return n=n!=null?n.concat([e]):null,ba(4,4,Hg.bind(null,t,e),n)}function zc(){}function Wg(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qg(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Kg(e,t,n){return Xn&21?(Nt(n,t)||(n=Qp(),we.lanes|=n,Jn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ge=!0),e.memoizedState=n)}function O_(e,t){var n=ue;ue=n!==0&&4>n?n:4,e(!0);var r=vl.transition;vl.transition={};try{e(!1),t()}finally{ue=n,vl.transition=r}}function Gg(){return pt().memoizedState}function $_(e,t,n){var r=Sn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yg(e))Xg(t,n);else if(n=Ag(e,t,n,r),n!==null){var i=Ve();Tt(n,e,r,i),Jg(n,t,r)}}function j_(e,t,n){var r=Sn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yg(e))Xg(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Nt(a,o)){var l=t.interleaved;l===null?(i.next=i,Ac(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Ag(e,t,i,r),n!==null&&(i=Ve(),Tt(n,e,r,i),Jg(n,t,r))}}function Yg(e){var t=e.alternate;return e===we||t!==null&&t===we}function Xg(e,t){$i=Jo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mc(e,n)}}var Qo={readContext:ht,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},L_={readContext:ht,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:mf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Eo(4194308,4,Hg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Eo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Eo(4,2,e,t)},useMemo:function(e,t){var n=Rt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$_.bind(null,we,e),[r.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:gf,useDebugValue:zc,useDeferredValue:function(e){return Rt().memoizedState=e},useTransition:function(){var e=gf(!1),t=e[0];return e=O_.bind(null,e[1]),Rt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=we,i=Rt();if(ge){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),Ie===null)throw Error(B(349));Xn&30||jg(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,mf(Mg.bind(null,r,s,e),[e]),r.flags|=2048,rs(9,Lg.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rt(),t=Ie.identifierPrefix;if(ge){var n=Wt,r=Vt;n=(r&~(1<<32-Ct(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ts++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=I_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},M_={readContext:ht,useCallback:Wg,useContext:ht,useEffect:Dc,useImperativeHandle:Vg,useInsertionEffect:Bg,useLayoutEffect:Fg,useMemo:qg,useReducer:wl,useRef:Ug,useState:function(){return wl(ns)},useDebugValue:zc,useDeferredValue:function(e){var t=pt();return Kg(t,Pe.memoizedState,e)},useTransition:function(){var e=wl(ns)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Og,useSyncExternalStore:$g,useId:Gg,unstable_isNewReconciler:!1},D_={readContext:ht,useCallback:Wg,useContext:ht,useEffect:Dc,useImperativeHandle:Vg,useInsertionEffect:Bg,useLayoutEffect:Fg,useMemo:qg,useReducer:_l,useRef:Ug,useState:function(){return _l(ns)},useDebugValue:zc,useDeferredValue:function(e){var t=pt();return Pe===null?t.memoizedState=e:Kg(t,Pe.memoizedState,e)},useTransition:function(){var e=_l(ns)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Og,useSyncExternalStore:$g,useId:Gg,unstable_isNewReconciler:!1};function yt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ca={isMounted:function(e){return(e=e._reactInternals)?sr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ve(),i=Sn(e),s=Kt(r,i);s.payload=t,n!=null&&(s.callback=n),t=_n(e,s,i),t!==null&&(Tt(t,e,i,r),So(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ve(),i=Sn(e),s=Kt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=_n(e,s,i),t!==null&&(Tt(t,e,i,r),So(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ve(),r=Sn(e),i=Kt(n,r);i.tag=2,t!=null&&(i.callback=t),t=_n(e,i,r),t!==null&&(Tt(t,e,r,n),So(t,e,r))}};function yf(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Yi(n,r)||!Yi(i,s):!0}function Qg(e,t,n){var r=!1,i=Cn,s=t.contextType;return typeof s=="object"&&s!==null?s=ht(s):(i=Je(t)?Gn:Fe.current,r=t.contextTypes,s=(r=r!=null)?Hr(e,i):Cn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ca,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function vf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ca.enqueueReplaceState(t,t.state,null)}function wu(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Rc(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ht(s):(s=Je(t)?Gn:Fe.current,i.context=Hr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(vu(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ca.enqueueReplaceState(i,i.state,null),Yo(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Kr(e,t){try{var n="",r=t;do n+=fw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function xl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _u(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var z_=typeof WeakMap=="function"?WeakMap:Map;function Zg(e,t,n){n=Kt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ea||(ea=!0,Au=r),_u(e,t)},n}function em(e,t,n){n=Kt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){_u(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_u(e,t),typeof r!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function wf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new z_;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Z_.bind(null,e,t,n),t.then(e,e))}function _f(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xf(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kt(-1,1),t.tag=2,_n(n,t,1))),n.lanes|=1),e)}var U_=Zt.ReactCurrentOwner,Ge=!1;function He(e,t,n,r){t.child=e===null?Pg(t,null,n,r):Wr(t,e.child,n,r)}function Sf(e,t,n,r,i){n=n.render;var s=t.ref;return Mr(t,i),r=Lc(e,t,n,r,s,i),n=Mc(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jt(e,t,i)):(ge&&n&&Ec(t),t.flags|=1,He(e,t,r,i),t.child)}function kf(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Kc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,tm(e,t,s,r,i)):(e=No(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yi,n(o,r)&&e.ref===t.ref)return Jt(e,t,i)}return t.flags|=1,e=kn(s,r),e.ref=t.ref,e.return=t,t.child=e}function tm(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Yi(s,r)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,Jt(e,t,i)}return xu(e,t,n,r,i)}function nm(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(Pr,et),et|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(Pr,et),et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,de(Pr,et),et|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,de(Pr,et),et|=r;return He(e,t,i,n),t.child}function rm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xu(e,t,n,r,i){var s=Je(n)?Gn:Fe.current;return s=Hr(t,s),Mr(t,i),n=Lc(e,t,n,r,s,i),r=Mc(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jt(e,t,i)):(ge&&r&&Ec(t),t.flags|=1,He(e,t,n,i),t.child)}function Ef(e,t,n,r,i){if(Je(n)){var s=!0;Vo(t)}else s=!1;if(Mr(t,i),t.stateNode===null)bo(e,t),Qg(t,n,r),wu(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ht(u):(u=Je(n)?Gn:Fe.current,u=Hr(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&vf(t,o,r,u),ln=!1;var f=t.memoizedState;o.state=f,Yo(t,r,o,i),l=t.memoizedState,a!==r||f!==l||Xe.current||ln?(typeof c=="function"&&(vu(t,n,c,r),l=t.memoizedState),(a=ln||yf(t,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rg(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:yt(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ht(l):(l=Je(n)?Gn:Fe.current,l=Hr(t,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&vf(t,o,r,l),ln=!1,f=t.memoizedState,o.state=f,Yo(t,r,o,i);var m=t.memoizedState;a!==d||f!==m||Xe.current||ln?(typeof p=="function"&&(vu(t,n,p,r),m=t.memoizedState),(u=ln||yf(t,n,u,r,f,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Su(e,t,n,r,s,i)}function Su(e,t,n,r,i,s){rm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&uf(t,n,!1),Jt(e,t,s);r=t.stateNode,U_.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Wr(t,e.child,null,s),t.child=Wr(t,null,a,s)):He(e,t,a,s),t.memoizedState=r.state,i&&uf(t,n,!0),t.child}function im(e){var t=e.stateNode;t.pendingContext?lf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lf(e,t.context,!1),Ic(e,t.containerInfo)}function bf(e,t,n,r,i){return Vr(),Cc(i),t.flags|=256,He(e,t,n,r),t.child}var ku={dehydrated:null,treeContext:null,retryLane:0};function Eu(e){return{baseLanes:e,cachePool:null,transitions:null}}function sm(e,t,n){var r=t.pendingProps,i=ve.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),de(ve,i&1),e===null)return mu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pa(o,r,0,null),e=Wn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Eu(n),t.memoizedState=ku,e):Uc(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return B_(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=kn(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=kn(a,s):(s=Wn(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Eu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=ku,r}return s=e.child,e=s.sibling,r=kn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Uc(e,t){return t=Pa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ys(e,t,n,r){return r!==null&&Cc(r),Wr(t,e.child,null,n),e=Uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function B_(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=xl(Error(B(422))),Ys(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Pa({mode:"visible",children:r.children},i,0,null),s=Wn(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Wr(t,e.child,null,o),t.child.memoizedState=Eu(o),t.memoizedState=ku,s);if(!(t.mode&1))return Ys(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=xl(s,r,void 0),Ys(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ge||a){if(r=Ie,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xt(e,i),Tt(r,e,i,-1))}return qc(),r=xl(Error(B(421))),Ys(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=ex.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,rt=wn(i.nextSibling),it=t,ge=!0,St=null,e!==null&&(ut[ct++]=Vt,ut[ct++]=Wt,ut[ct++]=Yn,Vt=e.id,Wt=e.overflow,Yn=t),t=Uc(t,r.children),t.flags|=4096,t)}function Cf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yu(e.return,t,n)}function Sl(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function om(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(He(e,t,r.children,n),r=ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cf(e,n,t);else if(e.tag===19)Cf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(de(ve,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Xo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Sl(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Xo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Sl(t,!0,n,null,s);break;case"together":Sl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function F_(e,t,n){switch(t.tag){case 3:im(t),Vr();break;case 5:Ig(t);break;case 1:Je(t.type)&&Vo(t);break;case 4:Ic(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;de(Ko,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(de(ve,ve.current&1),t.flags|=128,null):n&t.child.childLanes?sm(e,t,n):(de(ve,ve.current&1),e=Jt(e,t,n),e!==null?e.sibling:null);de(ve,ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return om(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),de(ve,ve.current),r)break;return null;case 22:case 23:return t.lanes=0,nm(e,t,n)}return Jt(e,t,n)}var am,bu,lm,um;am=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bu=function(){};lm=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Bn(jt.current);var s=null;switch(n){case"input":i=Kl(e,i),r=Kl(e,r),s=[];break;case"select":i=_e({},i,{value:void 0}),r=_e({},r,{value:void 0}),s=[];break;case"textarea":i=Xl(e,i),r=Xl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fo)}Ql(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&he("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};um=function(e,t,n,r){n!==r&&(t.flags|=4)};function yi(e,t){if(!ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function H_(e,t,n){var r=t.pendingProps;switch(bc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return Je(t.type)&&Ho(),Ue(t),null;case 3:return r=t.stateNode,qr(),pe(Xe),pe(Fe),$c(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ks(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,St!==null&&(Ou(St),St=null))),bu(e,t),Ue(t),null;case 5:Oc(t);var i=Bn(es.current);if(n=t.type,e!==null&&t.stateNode!=null)lm(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return Ue(t),null}if(e=Bn(jt.current),Ks(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ot]=t,r[Qi]=s,e=(t.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<bi.length;i++)he(bi[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":$d(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":Ld(r,s),he("invalid",r)}Ql(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&qs(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qs(r.textContent,a,e),i=["children",""+a]):Fi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&he("scroll",r)}switch(n){case"input":Ds(r),jd(r,s,!0);break;case"textarea":Ds(r),Md(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Fo)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ot]=t,e[Qi]=r,am(e,t,!1,!1),t.stateNode=e;e:{switch(o=Zl(n,r),n){case"dialog":he("cancel",e),he("close",e),i=r;break;case"iframe":case"object":case"embed":he("load",e),i=r;break;case"video":case"audio":for(i=0;i<bi.length;i++)he(bi[i],e);i=r;break;case"source":he("error",e),i=r;break;case"img":case"image":case"link":he("error",e),he("load",e),i=r;break;case"details":he("toggle",e),i=r;break;case"input":$d(e,r),i=Kl(e,r),he("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_e({},r,{value:void 0}),he("invalid",e);break;case"textarea":Ld(e,r),i=Xl(e,r),he("invalid",e);break;default:i=r}Ql(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Up(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Dp(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Hi(e,l):typeof l=="number"&&Hi(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fi.hasOwnProperty(s)?l!=null&&s==="onScroll"&&he("scroll",e):l!=null&&cc(e,s,l,o))}switch(n){case"input":Ds(e),jd(e,r,!1);break;case"textarea":Ds(e),Md(e);break;case"option":r.value!=null&&e.setAttribute("value",""+bn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Or(e,!!r.multiple,s,!1):r.defaultValue!=null&&Or(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Fo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ue(t),null;case 6:if(e&&t.stateNode!=null)um(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=Bn(es.current),Bn(jt.current),Ks(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ot]=t,(s=r.nodeValue!==n)&&(e=it,e!==null))switch(e.tag){case 3:qs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qs(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ot]=t,t.stateNode=r}return Ue(t),null;case 13:if(pe(ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ge&&rt!==null&&t.mode&1&&!(t.flags&128))Tg(),Vr(),t.flags|=98560,s=!1;else if(s=Ks(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(B(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Ot]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ue(t),s=!1}else St!==null&&(Ou(St),St=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Ae===0&&(Ae=3):qc())),t.updateQueue!==null&&(t.flags|=4),Ue(t),null);case 4:return qr(),bu(e,t),e===null&&Xi(t.stateNode.containerInfo),Ue(t),null;case 10:return Pc(t.type._context),Ue(t),null;case 17:return Je(t.type)&&Ho(),Ue(t),null;case 19:if(pe(ve),s=t.memoizedState,s===null)return Ue(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)yi(s,!1);else{if(Ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Xo(e),o!==null){for(t.flags|=128,yi(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return de(ve,ve.current&1|2),t.child}e=e.sibling}s.tail!==null&&ke()>Gr&&(t.flags|=128,r=!0,yi(s,!1),t.lanes=4194304)}else{if(!r)if(e=Xo(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ge)return Ue(t),null}else 2*ke()-s.renderingStartTime>Gr&&n!==1073741824&&(t.flags|=128,r=!0,yi(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ke(),t.sibling=null,n=ve.current,de(ve,r?n&1|2:n&1),t):(Ue(t),null);case 22:case 23:return Wc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?et&1073741824&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function V_(e,t){switch(bc(t),t.tag){case 1:return Je(t.type)&&Ho(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qr(),pe(Xe),pe(Fe),$c(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Oc(t),null;case 13:if(pe(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(ve),null;case 4:return qr(),null;case 10:return Pc(t.type._context),null;case 22:case 23:return Wc(),null;case 24:return null;default:return null}}var Xs=!1,Be=!1,W_=typeof WeakSet=="function"?WeakSet:Set,W=null;function Nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(e,t,r)}else n.current=null}function Cu(e,t,n){try{n()}catch(r){Se(e,t,r)}}var Tf=!1;function q_(e,t){if(uu=zo,e=pg(),kc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cu={focusedElem:e,selectionRange:n},zo=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,_=m.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:yt(t.type,v),_);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(w){Se(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return m=Tf,Tf=!1,m}function ji(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cu(t,n,s)}i=i.next}while(i!==r)}}function Ta(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Tu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cm(e){var t=e.alternate;t!==null&&(e.alternate=null,cm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[Qi],delete t[hu],delete t[N_],delete t[P_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dm(e){return e.tag===5||e.tag===3||e.tag===4}function Nf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fo));else if(r!==4&&(e=e.child,e!==null))for(Nu(e,t,n),e=e.sibling;e!==null;)Nu(e,t,n),e=e.sibling}function Pu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Pu(e,t,n),e=e.sibling;e!==null;)Pu(e,t,n),e=e.sibling}var je=null,wt=!1;function rn(e,t,n){for(n=n.child;n!==null;)fm(e,t,n),n=n.sibling}function fm(e,t,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(wa,n)}catch{}switch(n.tag){case 5:Be||Nr(n,t);case 6:var r=je,i=wt;je=null,rn(e,t,n),je=r,wt=i,je!==null&&(wt?(e=je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):je.removeChild(n.stateNode));break;case 18:je!==null&&(wt?(e=je,n=n.stateNode,e.nodeType===8?gl(e.parentNode,n):e.nodeType===1&&gl(e,n),Ki(e)):gl(je,n.stateNode));break;case 4:r=je,i=wt,je=n.stateNode.containerInfo,wt=!0,rn(e,t,n),je=r,wt=i;break;case 0:case 11:case 14:case 15:if(!Be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Cu(n,t,o),i=i.next}while(i!==r)}rn(e,t,n);break;case 1:if(!Be&&(Nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Se(n,t,a)}rn(e,t,n);break;case 21:rn(e,t,n);break;case 22:n.mode&1?(Be=(r=Be)||n.memoizedState!==null,rn(e,t,n),Be=r):rn(e,t,n);break;default:rn(e,t,n)}}function Pf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new W_),t.forEach(function(r){var i=tx.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:je=a.stateNode,wt=!1;break e;case 3:je=a.stateNode.containerInfo,wt=!0;break e;case 4:je=a.stateNode.containerInfo,wt=!0;break e}a=a.return}if(je===null)throw Error(B(160));fm(s,o,i),je=null,wt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Se(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hm(t,e),t=t.sibling}function hm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gt(t,e),At(e),r&4){try{ji(3,e,e.return),Ta(3,e)}catch(v){Se(e,e.return,v)}try{ji(5,e,e.return)}catch(v){Se(e,e.return,v)}}break;case 1:gt(t,e),At(e),r&512&&n!==null&&Nr(n,n.return);break;case 5:if(gt(t,e),At(e),r&512&&n!==null&&Nr(n,n.return),e.flags&32){var i=e.stateNode;try{Hi(i,"")}catch(v){Se(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jp(i,s),Zl(a,o);var u=Zl(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Up(i,d):c==="dangerouslySetInnerHTML"?Dp(i,d):c==="children"?Hi(i,d):cc(i,c,d,u)}switch(a){case"input":Gl(i,s);break;case"textarea":Lp(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Or(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Or(i,!!s.multiple,s.defaultValue,!0):Or(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qi]=s}catch(v){Se(e,e.return,v)}}break;case 6:if(gt(t,e),At(e),r&4){if(e.stateNode===null)throw Error(B(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(v){Se(e,e.return,v)}}break;case 3:if(gt(t,e),At(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ki(t.containerInfo)}catch(v){Se(e,e.return,v)}break;case 4:gt(t,e),At(e);break;case 13:gt(t,e),At(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hc=ke())),r&4&&Pf(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Be=(u=Be)||c,gt(t,e),Be=u):gt(t,e),At(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(W=e,c=e.child;c!==null;){for(d=W=c;W!==null;){switch(f=W,p=f.child,f.tag){case 0:case 11:case 14:case 15:ji(4,f,f.return);break;case 1:Nr(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Se(r,n,v)}}break;case 5:Nr(f,f.return);break;case 22:if(f.memoizedState!==null){Rf(d);continue}}p!==null?(p.return=f,W=p):Rf(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zp("display",o))}catch(v){Se(e,e.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Se(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gt(t,e),At(e),r&4&&Pf(e);break;case 21:break;default:gt(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dm(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hi(i,""),r.flags&=-33);var s=Nf(e);Pu(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Nf(e);Nu(e,a,o);break;default:throw Error(B(161))}}catch(l){Se(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function K_(e,t,n){W=e,pm(e)}function pm(e,t,n){for(var r=(e.mode&1)!==0;W!==null;){var i=W,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xs;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Be;a=Xs;var u=Be;if(Xs=o,(Be=l)&&!u)for(W=i;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?If(i):l!==null?(l.return=o,W=l):If(i);for(;s!==null;)W=s,pm(s),s=s.sibling;W=i,Xs=a,Be=u}Af(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,W=s):Af(e)}}function Af(e){for(;W!==null;){var t=W;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Be||Ta(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Be)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&pf(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}pf(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ki(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Be||t.flags&512&&Tu(t)}catch(f){Se(t,t.return,f)}}if(t===e){W=null;break}if(n=t.sibling,n!==null){n.return=t.return,W=n;break}W=t.return}}function Rf(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var n=t.sibling;if(n!==null){n.return=t.return,W=n;break}W=t.return}}function If(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ta(4,t)}catch(l){Se(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Se(t,i,l)}}var s=t.return;try{Tu(t)}catch(l){Se(t,s,l)}break;case 5:var o=t.return;try{Tu(t)}catch(l){Se(t,o,l)}}}catch(l){Se(t,t.return,l)}if(t===e){W=null;break}var a=t.sibling;if(a!==null){a.return=t.return,W=a;break}W=t.return}}var G_=Math.ceil,Zo=Zt.ReactCurrentDispatcher,Bc=Zt.ReactCurrentOwner,ft=Zt.ReactCurrentBatchConfig,oe=0,Ie=null,be=null,Le=0,et=0,Pr=Nn(0),Ae=0,is=null,Jn=0,Na=0,Fc=0,Li=null,Ke=null,Hc=0,Gr=1/0,Bt=null,ea=!1,Au=null,xn=null,Js=!1,gn=null,ta=0,Mi=0,Ru=null,Co=-1,To=0;function Ve(){return oe&6?ke():Co!==-1?Co:Co=ke()}function Sn(e){return e.mode&1?oe&2&&Le!==0?Le&-Le:R_.transition!==null?(To===0&&(To=Qp()),To):(e=ue,e!==0||(e=window.event,e=e===void 0?16:sg(e.type)),e):1}function Tt(e,t,n,r){if(50<Mi)throw Mi=0,Ru=null,Error(B(185));Ss(e,n,r),(!(oe&2)||e!==Ie)&&(e===Ie&&(!(oe&2)&&(Na|=n),Ae===4&&dn(e,Le)),Qe(e,r),n===1&&oe===0&&!(t.mode&1)&&(Gr=ke()+500,Ea&&Pn()))}function Qe(e,t){var n=e.callbackNode;Rw(e,t);var r=Do(e,e===Ie?Le:0);if(r===0)n!==null&&Ud(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ud(n),t===1)e.tag===0?A_(Of.bind(null,e)):Eg(Of.bind(null,e)),C_(function(){!(oe&6)&&Pn()}),n=null;else{switch(Zp(r)){case 1:n=gc;break;case 4:n=Xp;break;case 16:n=Mo;break;case 536870912:n=Jp;break;default:n=Mo}n=Sm(n,gm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gm(e,t){if(Co=-1,To=0,oe&6)throw Error(B(327));var n=e.callbackNode;if(Dr()&&e.callbackNode!==n)return null;var r=Do(e,e===Ie?Le:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=na(e,r);else{t=r;var i=oe;oe|=2;var s=ym();(Ie!==e||Le!==t)&&(Bt=null,Gr=ke()+500,Vn(e,t));do try{J_();break}catch(a){mm(e,a)}while(!0);Nc(),Zo.current=s,oe=i,be!==null?t=0:(Ie=null,Le=0,t=Ae)}if(t!==0){if(t===2&&(i=iu(e),i!==0&&(r=i,t=Iu(e,i))),t===1)throw n=is,Vn(e,0),dn(e,r),Qe(e,ke()),n;if(t===6)dn(e,r);else{if(i=e.current.alternate,!(r&30)&&!Y_(i)&&(t=na(e,r),t===2&&(s=iu(e),s!==0&&(r=s,t=Iu(e,s))),t===1))throw n=is,Vn(e,0),dn(e,r),Qe(e,ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:$n(e,Ke,Bt);break;case 3:if(dn(e,r),(r&130023424)===r&&(t=Hc+500-ke(),10<t)){if(Do(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ve(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=fu($n.bind(null,e,Ke,Bt),t);break}$n(e,Ke,Bt);break;case 4:if(dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ct(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G_(r/1960))-r,10<r){e.timeoutHandle=fu($n.bind(null,e,Ke,Bt),r);break}$n(e,Ke,Bt);break;case 5:$n(e,Ke,Bt);break;default:throw Error(B(329))}}}return Qe(e,ke()),e.callbackNode===n?gm.bind(null,e):null}function Iu(e,t){var n=Li;return e.current.memoizedState.isDehydrated&&(Vn(e,t).flags|=256),e=na(e,t),e!==2&&(t=Ke,Ke=n,t!==null&&Ou(t)),e}function Ou(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function Y_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dn(e,t){for(t&=~Fc,t&=~Na,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ct(t),r=1<<n;e[n]=-1,t&=~r}}function Of(e){if(oe&6)throw Error(B(327));Dr();var t=Do(e,0);if(!(t&1))return Qe(e,ke()),null;var n=na(e,t);if(e.tag!==0&&n===2){var r=iu(e);r!==0&&(t=r,n=Iu(e,r))}if(n===1)throw n=is,Vn(e,0),dn(e,t),Qe(e,ke()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$n(e,Ke,Bt),Qe(e,ke()),null}function Vc(e,t){var n=oe;oe|=1;try{return e(t)}finally{oe=n,oe===0&&(Gr=ke()+500,Ea&&Pn())}}function Qn(e){gn!==null&&gn.tag===0&&!(oe&6)&&Dr();var t=oe;oe|=1;var n=ft.transition,r=ue;try{if(ft.transition=null,ue=1,e)return e()}finally{ue=r,ft.transition=n,oe=t,!(oe&6)&&Pn()}}function Wc(){et=Pr.current,pe(Pr)}function Vn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,b_(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(bc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ho();break;case 3:qr(),pe(Xe),pe(Fe),$c();break;case 5:Oc(r);break;case 4:qr();break;case 13:pe(ve);break;case 19:pe(ve);break;case 10:Pc(r.type._context);break;case 22:case 23:Wc()}n=n.return}if(Ie=e,be=e=kn(e.current,null),Le=et=t,Ae=0,is=null,Fc=Na=Jn=0,Ke=Li=null,Un!==null){for(t=0;t<Un.length;t++)if(n=Un[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Un=null}return e}function mm(e,t){do{var n=be;try{if(Nc(),ko.current=Qo,Jo){for(var r=we.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Jo=!1}if(Xn=0,Re=Pe=we=null,$i=!1,ts=0,Bc.current=null,n===null||n.return===null){Ae=1,is=t,be=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Le,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=_f(o);if(p!==null){p.flags&=-257,xf(p,o,a,s,t),p.mode&1&&wf(s,u,t),t=p,l=u;var m=t.updateQueue;if(m===null){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}else{if(!(t&1)){wf(s,u,t),qc();break e}l=Error(B(426))}}else if(ge&&a.mode&1){var _=_f(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),xf(_,o,a,s,t),Cc(Kr(l,a));break e}}s=l=Kr(l,a),Ae!==4&&(Ae=2),Li===null?Li=[s]:Li.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=Zg(s,l,t);hf(s,g);break e;case 1:a=l;var y=s.type,h=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(xn===null||!xn.has(h)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=em(s,a,t);hf(s,w);break e}}s=s.return}while(s!==null)}wm(n)}catch(k){t=k,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function ym(){var e=Zo.current;return Zo.current=Qo,e===null?Qo:e}function qc(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),Ie===null||!(Jn&268435455)&&!(Na&268435455)||dn(Ie,Le)}function na(e,t){var n=oe;oe|=2;var r=ym();(Ie!==e||Le!==t)&&(Bt=null,Vn(e,t));do try{X_();break}catch(i){mm(e,i)}while(!0);if(Nc(),oe=n,Zo.current=r,be!==null)throw Error(B(261));return Ie=null,Le=0,Ae}function X_(){for(;be!==null;)vm(be)}function J_(){for(;be!==null&&!Sw();)vm(be)}function vm(e){var t=xm(e.alternate,e,et);e.memoizedProps=e.pendingProps,t===null?wm(e):be=t,Bc.current=null}function wm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=V_(n,t),n!==null){n.flags&=32767,be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ae=6,be=null;return}}else if(n=H_(n,t,et),n!==null){be=n;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);Ae===0&&(Ae=5)}function $n(e,t,n){var r=ue,i=ft.transition;try{ft.transition=null,ue=1,Q_(e,t,n,r)}finally{ft.transition=i,ue=r}return null}function Q_(e,t,n,r){do Dr();while(gn!==null);if(oe&6)throw Error(B(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Iw(e,s),e===Ie&&(be=Ie=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Js||(Js=!0,Sm(Mo,function(){return Dr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ft.transition,ft.transition=null;var o=ue;ue=1;var a=oe;oe|=4,Bc.current=null,q_(e,n),hm(n,e),v_(cu),zo=!!uu,cu=uu=null,e.current=n,K_(n),kw(),oe=a,ue=o,ft.transition=s}else e.current=n;if(Js&&(Js=!1,gn=e,ta=i),s=e.pendingLanes,s===0&&(xn=null),Cw(n.stateNode),Qe(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ea)throw ea=!1,e=Au,Au=null,e;return ta&1&&e.tag!==0&&Dr(),s=e.pendingLanes,s&1?e===Ru?Mi++:(Mi=0,Ru=e):Mi=0,Pn(),null}function Dr(){if(gn!==null){var e=Zp(ta),t=ft.transition,n=ue;try{if(ft.transition=null,ue=16>e?16:e,gn===null)var r=!1;else{if(e=gn,gn=null,ta=0,oe&6)throw Error(B(331));var i=oe;for(oe|=4,W=e.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(W=u;W!==null;){var c=W;switch(c.tag){case 0:case 11:case 15:ji(8,c,s)}var d=c.child;if(d!==null)d.return=c,W=d;else for(;W!==null;){c=W;var f=c.sibling,p=c.return;if(cm(c),c===u){W=null;break}if(f!==null){f.return=p,W=f;break}W=p}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ji(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,W=g;break e}W=s.return}}var y=e.current;for(W=y;W!==null;){o=W;var h=o.child;if(o.subtreeFlags&2064&&h!==null)h.return=o,W=h;else e:for(o=y;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ta(9,a)}}catch(k){Se(a,a.return,k)}if(a===o){W=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,W=w;break e}W=a.return}}if(oe=i,Pn(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(wa,e)}catch{}r=!0}return r}finally{ue=n,ft.transition=t}}return!1}function $f(e,t,n){t=Kr(n,t),t=Zg(e,t,1),e=_n(e,t,1),t=Ve(),e!==null&&(Ss(e,1,t),Qe(e,t))}function Se(e,t,n){if(e.tag===3)$f(e,e,n);else for(;t!==null;){if(t.tag===3){$f(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r))){e=Kr(n,e),e=em(t,e,1),t=_n(t,e,1),e=Ve(),t!==null&&(Ss(t,1,e),Qe(t,e));break}}t=t.return}}function Z_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&n,Ie===e&&(Le&n)===n&&(Ae===4||Ae===3&&(Le&130023424)===Le&&500>ke()-Hc?Vn(e,0):Fc|=n),Qe(e,t)}function _m(e,t){t===0&&(e.mode&1?(t=Bs,Bs<<=1,!(Bs&130023424)&&(Bs=4194304)):t=1);var n=Ve();e=Xt(e,t),e!==null&&(Ss(e,t,n),Qe(e,n))}function ex(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_m(e,n)}function tx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),_m(e,n)}var xm;xm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Ge=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ge=!1,F_(e,t,n);Ge=!!(e.flags&131072)}else Ge=!1,ge&&t.flags&1048576&&bg(t,qo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bo(e,t),e=t.pendingProps;var i=Hr(t,Fe.current);Mr(t,n),i=Lc(null,t,r,e,i,n);var s=Mc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(r)?(s=!0,Vo(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rc(t),i.updater=Ca,t.stateNode=i,i._reactInternals=t,wu(t,r,e,n),t=Su(null,t,r,!0,s,n)):(t.tag=0,ge&&s&&Ec(t),He(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bo(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=rx(r),e=yt(r,e),i){case 0:t=xu(null,t,r,e,n);break e;case 1:t=Ef(null,t,r,e,n);break e;case 11:t=Sf(null,t,r,e,n);break e;case 14:t=kf(null,t,r,yt(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),xu(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),Ef(e,t,r,i,n);case 3:e:{if(im(t),e===null)throw Error(B(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Rg(e,t),Yo(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Kr(Error(B(423)),t),t=bf(e,t,r,n,i);break e}else if(r!==i){i=Kr(Error(B(424)),t),t=bf(e,t,r,n,i);break e}else for(rt=wn(t.stateNode.containerInfo.firstChild),it=t,ge=!0,St=null,n=Pg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vr(),r===i){t=Jt(e,t,n);break e}He(e,t,r,n)}t=t.child}return t;case 5:return Ig(t),e===null&&mu(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,du(r,i)?o=null:s!==null&&du(r,s)&&(t.flags|=32),rm(e,t),He(e,t,o,n),t.child;case 6:return e===null&&mu(t),null;case 13:return sm(e,t,n);case 4:return Ic(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Wr(t,null,r,n):He(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),Sf(e,t,r,i,n);case 7:return He(e,t,t.pendingProps,n),t.child;case 8:return He(e,t,t.pendingProps.children,n),t.child;case 12:return He(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,de(Ko,r._currentValue),r._currentValue=o,s!==null)if(Nt(s.value,o)){if(s.children===i.children&&!Xe.current){t=Jt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Kt(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),yu(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),yu(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}He(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Mr(t,n),i=ht(i),r=r(i),t.flags|=1,He(e,t,r,n),t.child;case 14:return r=t.type,i=yt(r,t.pendingProps),i=yt(r.type,i),kf(e,t,r,i,n);case 15:return tm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),bo(e,t),t.tag=1,Je(r)?(e=!0,Vo(t)):e=!1,Mr(t,n),Qg(t,r,i),wu(t,r,i,n),Su(null,t,r,!0,e,n);case 19:return om(e,t,n);case 22:return nm(e,t,n)}throw Error(B(156,t.tag))};function Sm(e,t){return Yp(e,t)}function nx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(e,t,n,r){return new nx(e,t,n,r)}function Kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rx(e){if(typeof e=="function")return Kc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fc)return 11;if(e===hc)return 14}return 2}function kn(e,t){var n=e.alternate;return n===null?(n=dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function No(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Kc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case wr:return Wn(n.children,i,s,t);case dc:o=8,i|=8;break;case Hl:return e=dt(12,n,t,i|2),e.elementType=Hl,e.lanes=s,e;case Vl:return e=dt(13,n,t,i),e.elementType=Vl,e.lanes=s,e;case Wl:return e=dt(19,n,t,i),e.elementType=Wl,e.lanes=s,e;case Ip:return Pa(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ap:o=10;break e;case Rp:o=9;break e;case fc:o=11;break e;case hc:o=14;break e;case an:o=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=dt(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Wn(e,t,n,r){return e=dt(7,e,r,t),e.lanes=n,e}function Pa(e,t,n,r){return e=dt(22,e,r,t),e.elementType=Ip,e.lanes=n,e.stateNode={isHidden:!1},e}function kl(e,t,n){return e=dt(6,e,null,t),e.lanes=n,e}function El(e,t,n){return t=dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ix(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=il(0),this.expirationTimes=il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=il(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gc(e,t,n,r,i,s,o,a,l){return e=new ix(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=dt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rc(s),e}function sx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function km(e){if(!e)return Cn;e=e._reactInternals;e:{if(sr(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(Je(n))return kg(e,n,t)}return t}function Em(e,t,n,r,i,s,o,a,l){return e=Gc(n,r,!0,e,i,s,o,a,l),e.context=km(null),n=e.current,r=Ve(),i=Sn(n),s=Kt(r,i),s.callback=t??null,_n(n,s,i),e.current.lanes=i,Ss(e,i,r),Qe(e,r),e}function Aa(e,t,n,r){var i=t.current,s=Ve(),o=Sn(i);return n=km(n),t.context===null?t.context=n:t.pendingContext=n,t=Kt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_n(i,t,o),e!==null&&(Tt(e,i,o,s),So(e,i,o)),o}function ra(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yc(e,t){jf(e,t),(e=e.alternate)&&jf(e,t)}function ox(){return null}var bm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}Ra.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));Aa(e,t,null,null)};Ra.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qn(function(){Aa(null,e,null,null)}),t[Yt]=null}};function Ra(e){this._internalRoot=e}Ra.prototype.unstable_scheduleHydration=function(e){if(e){var t=ng();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cn.length&&t!==0&&t<cn[n].priority;n++);cn.splice(n,0,e),n===0&&ig(e)}};function Jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ia(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lf(){}function ax(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ra(o);s.call(u)}}var o=Em(t,r,e,0,null,!1,!1,"",Lf);return e._reactRootContainer=o,e[Yt]=o.current,Xi(e.nodeType===8?e.parentNode:e),Qn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ra(l);a.call(u)}}var l=Gc(e,0,!1,null,null,!1,!1,"",Lf);return e._reactRootContainer=l,e[Yt]=l.current,Xi(e.nodeType===8?e.parentNode:e),Qn(function(){Aa(t,l,n,r)}),l}function Oa(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ra(o);a.call(l)}}Aa(t,o,e,i)}else o=ax(n,t,e,i,r);return ra(o)}eg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ei(t.pendingLanes);n!==0&&(mc(t,n|1),Qe(t,ke()),!(oe&6)&&(Gr=ke()+500,Pn()))}break;case 13:Qn(function(){var r=Xt(e,1);if(r!==null){var i=Ve();Tt(r,e,1,i)}}),Yc(e,1)}};yc=function(e){if(e.tag===13){var t=Xt(e,134217728);if(t!==null){var n=Ve();Tt(t,e,134217728,n)}Yc(e,134217728)}};tg=function(e){if(e.tag===13){var t=Sn(e),n=Xt(e,t);if(n!==null){var r=Ve();Tt(n,e,t,r)}Yc(e,t)}};ng=function(){return ue};rg=function(e,t){var n=ue;try{return ue=e,t()}finally{ue=n}};tu=function(e,t,n){switch(t){case"input":if(Gl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ka(r);if(!i)throw Error(B(90));$p(r),Gl(r,i)}}}break;case"textarea":Lp(e,n);break;case"select":t=n.value,t!=null&&Or(e,!!n.multiple,t,!1)}};Hp=Vc;Vp=Qn;var lx={usingClientEntryPoint:!1,Events:[Es,kr,ka,Bp,Fp,Vc]},vi={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ux={bundleType:vi.bundleType,version:vi.version,rendererPackageName:vi.rendererPackageName,rendererConfig:vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kp(e),e===null?null:e.stateNode},findFiberByHostInstance:vi.findFiberByHostInstance||ox,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qs.isDisabled&&Qs.supportsFiber)try{wa=Qs.inject(ux),$t=Qs}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lx;at.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jc(t))throw Error(B(200));return sx(e,t,null,n)};at.createRoot=function(e,t){if(!Jc(e))throw Error(B(299));var n=!1,r="",i=bm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Gc(e,1,!1,null,null,n,!1,r,i),e[Yt]=t.current,Xi(e.nodeType===8?e.parentNode:e),new Xc(t)};at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=Kp(t),e=e===null?null:e.stateNode,e};at.flushSync=function(e){return Qn(e)};at.hydrate=function(e,t,n){if(!Ia(t))throw Error(B(200));return Oa(null,e,t,!0,n)};at.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=bm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Em(t,null,e,1,n??null,i,!1,s,o),e[Yt]=t.current,Xi(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ra(t)};at.render=function(e,t,n){if(!Ia(t))throw Error(B(200));return Oa(null,e,t,!1,n)};at.unmountComponentAtNode=function(e){if(!Ia(e))throw Error(B(40));return e._reactRootContainer?(Qn(function(){Oa(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1};at.unstable_batchedUpdates=Vc;at.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ia(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return Oa(e,t,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function Cm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cm)}catch(e){console.error(e)}}Cm(),Cp.exports=at;var cx=Cp.exports,Tm,Mf=cx;Tm=Mf.createRoot,Mf.hydrateRoot;function $a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function dx(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}const fx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Qc extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class hx extends Qc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Df extends Qc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class zf extends Qc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var $u;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})($u||($u={}));class px{constructor(t,{headers:n={},customFetch:r,region:i=$u.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=fx(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return dx(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:u,signal:c,timeout:d}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let v;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?v=JSON.stringify(u):v=u;let _=c;d&&(o=new AbortController,s=setTimeout(()=>o.abort(),d),c?(_=o.signal,c.addEventListener("abort",()=>o.abort())):_=o.signal);const g=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:v,signal:_}).catch(k=>{throw new hx(k)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new Df(g);if(!g.ok)throw new zf(g);let h=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return h==="application/json"?w=yield g.json():h==="application/octet-stream"||h==="application/pdf"?w=yield g.blob():h==="text/event-stream"?w=g:h==="multipart/form-data"?w=yield g.formData():w=yield g.text(),{data:w,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof zf||a instanceof Df?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var gx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},mx=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,u=s.status,c=s.statusText;if(s.ok){var d,f;if(n.method!=="HEAD"){var p;const g=await s.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}const v=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=s.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&_&&_.length>1&&(l=parseInt(_[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var m;const v=await s.text();try{o=JSON.parse(v),Array.isArray(o)&&s.status===404&&(a=[],o=null,u=200,c="OK")}catch{s.status===404&&v===""?(u=204,c="No Content"):o={message:v}}if(o&&n.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&n.shouldThrowOnError)throw new gx(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="",l="",u="";const c=s==null?void 0:s.cause;if(c){var d,f,p,m;const g=(d=c==null?void 0:c.message)!==null&&d!==void 0?d:"",y=(f=c==null?void 0:c.code)!==null&&f!==void 0?f:"";a=`${(p=s==null?void 0:s.name)!==null&&p!==void 0?p:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"Error"}: ${g}`,y&&(a+=` (${y})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var v;a=(v=s==null?void 0:s.stack)!==null&&v!==void 0?v:""}const _=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(u="",l="Request was aborted (timeout or manual cancellation)",_>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${_} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((c==null?void 0:c.name)==="HeadersOverflowError"||(c==null?void 0:c.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",l="HTTP headers exceeded server limits (typically 16KB)",_>this.urlLengthLimit&&(l+=`. Your request URL is ${_} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:l,code:u},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},yx=class extends mx{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Uf=new RegExp("[,()]");var gr=class extends yx{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Uf.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Uf.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},vx=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new gr({method:i,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const i="POST",{url:s,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),n||o.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);s.searchParams.set("columns",l.join(","))}}return new gr({method:i,url:s,headers:o,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",c.join(","))}}return new gr({method:o,url:a,headers:l,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const r="PATCH",{url:i,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new gr({method:r,url:i,headers:s,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new gr({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function ss(e){"@babel/helpers - typeof";return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ss(e)}function wx(e,t){if(ss(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ss(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _x(e){var t=wx(e,"string");return ss(t)=="symbol"?t:t+""}function xx(e,t,n){return(t=_x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bf(Object(n),!0).forEach(function(r){xx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Sx=class Nm{constructor(t,{headers:n={},schema:r,fetch:i,timeout:s,urlLengthLimit:o=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=o;const a=i??globalThis.fetch;s!==void 0&&s>0?this.fetch=(l,u)=>{const c=new AbortController,d=setTimeout(()=>c.abort(),s),f=u==null?void 0:u.signal;if(f){if(f.aborted)return clearTimeout(d),a(l,u);const p=()=>{clearTimeout(d),c.abort()};return f.addEventListener("abort",p,{once:!0}),a(l,Zs(Zs({},u),{},{signal:c.signal})).finally(()=>{clearTimeout(d),f.removeEventListener("abort",p)})}return a(l,Zs(Zs({},u),{},{signal:c.signal})).finally(()=>clearTimeout(d))}:this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new vx(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Nm(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;const c=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(c)),d=r&&Object.values(n).some(c);d?(a="POST",u=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",u=n);const f=new Headers(this.headers);return d?f.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&f.set("Prefer",`count=${s}`),new gr({method:a,url:l,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class kx{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ex="2.97.0",bx=`realtime-js/${Ex}`,Cx="1.0.0",Pm="2.0.0",Ff=Pm,ju=1e4,Tx=1e3,Nx=100;var un;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(un||(un={}));var Te;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Te||(Te={}));var _t;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(_t||(_t={}));var Lu;(function(e){e.websocket="websocket"})(Lu||(Lu={}));var Mn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Mn||(Mn={}));class Px{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var i,s;const o=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",l=(s=t.join_ref)!==null&&s!==void 0?s:"",u=t.payload.event,c=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),v=0;m.setUint8(v++,this.KINDS.userBroadcastPush),m.setUint8(v++,l.length),m.setUint8(v++,a.length),m.setUint8(v++,o.length),m.setUint8(v++,u.length),m.setUint8(v++,d.length),m.setUint8(v++,n),Array.from(l,g=>m.setUint8(v++,g.charCodeAt(0))),Array.from(a,g=>m.setUint8(v++,g.charCodeAt(0))),Array.from(o,g=>m.setUint8(v++,g.charCodeAt(0))),Array.from(u,g=>m.setUint8(v++,g.charCodeAt(0))),Array.from(d,g=>m.setUint8(v++,g.charCodeAt(0)));var _=new Uint8Array(p.byteLength+r.byteLength);return _.set(new Uint8Array(p),0),_.set(new Uint8Array(r),p.byteLength),_.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+s));l=l+s;const d=r.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST_EVENT,event:c,payload:p};return o>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}let Am=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ce;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ce||(ce={}));const Hf=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,o)=>(s[o]=Ax(o,e,t,i),s),{}):{}},Ax=(e,t,n,r)=>{const i=t.find(a=>a.name===e),s=i==null?void 0:i.type,o=n[e];return s&&!r.includes(s)?Rm(s,o):Mu(o)},Rm=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return $x(t,n)}switch(e){case ce.bool:return Rx(t);case ce.float4:case ce.float8:case ce.int2:case ce.int4:case ce.int8:case ce.numeric:case ce.oid:return Ix(t);case ce.json:case ce.jsonb:return Ox(t);case ce.timestamp:return jx(t);case ce.abstime:case ce.date:case ce.daterange:case ce.int4range:case ce.int8range:case ce.money:case ce.reltime:case ce.text:case ce.time:case ce.timestamptz:case ce.timetz:case ce.tsrange:case ce.tstzrange:return Mu(t);default:return Mu(t)}},Mu=e=>e,Rx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Ix=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ox=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},$x=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Rm(t,a))}return e},jx=e=>typeof e=="string"?e.replace(" ","T"):e,Im=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class bl{constructor(t,n,r={},i=ju){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Vf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Vf||(Vf={}));class Di{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Di.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Di.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Di.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const f=c.map(_=>_.presence_ref),p=d.map(_=>_.presence_ref),m=c.filter(_=>p.indexOf(_.presence_ref)<0),v=d.filter(_=>f.indexOf(_.presence_ref)<0);m.length>0&&(a[u]=m),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(p=>p.presence_ref),f=c.filter(p=>d.indexOf(p.presence_ref)<0);t[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,i(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Wf||(Wf={}));var zi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zi||(zi={}));var Ft;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ft||(Ft={}));class Ar{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new bl(this,_t.join,this.params,this.timeout),this.rejoinTimer=new Am(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_t.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Di(this),this.broadcastEndpointURL=Im(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[zi.PRESENCE]&&this.bindings[zi.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Ft.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Ft.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Ft.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,g=[];for(let y=0;y<_;y++){const h=v[y],{filter:{event:w,schema:k,table:x,filter:E}}=h,N=p&&p[y];if(N&&N.event===w&&Ar.isFilterValueEqual(N.schema,k)&&Ar.isFilterValueEqual(N.table,x)&&Ar.isFilterValueEqual(N.filter,E))g.push(Object.assign(Object.assign({},h),{id:N.id}));else{this.unsubscribe(),this.state=Te.errored,t==null||t(Ft.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Ft.SUBSCRIBED);return}}).receive("error",p=>{this.state=Te.errored,t==null||t(Ft.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ft.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Te.joined&&t===zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Te.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_t.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new bl(this,_t.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Te.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new bl(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Nx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=_t;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,v,_;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((_=(v=p.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var m,v,_,g,y,h;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,k=(m=p.filter)===null||m===void 0?void 0:m.event;return w&&((v=n.ids)===null||v===void 0?void 0:v.includes(w))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const w=(y=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return w==="*"||w===((h=n==null?void 0:n.event)===null||h===void 0?void 0:h.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:v,table:_,commit_timestamp:g,type:y,errors:h}=m;f=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:g,eventType:y,new:{},old:{},errors:h}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ar.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_t.close,{},t)}_onError(t){this._on(_t.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Hf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Hf(t.columns,t.old_record)),n}}const Cl=()=>{},eo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Lx=[1e3,2e3,5e3,1e4],Mx=1e4,Dx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zx{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ju,this.transport=null,this.heartbeatIntervalMs=eo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cl,this.ref=0,this.reconnectTimer=null,this.vsn=Ff,this.logger=Cl,this.conn=null,this.sendBuffer=[],this.serializer=new Px,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Lu.websocket}`,this.httpEndpoint=Im(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case un.connecting:return Mn.Connecting;case un.open:return Mn.Open;case un.closing:return Mn.Closing;default:return Mn.Closed}}isConnected(){return this.connectionState()===Mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Ar(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Tx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},eo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===un.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===un.open||this.conn.readyState===un.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(_t.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Dx],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:bx};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(_t.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Am(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},eo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,o,a,l,u,c,d,f,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:ju,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:eo.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Cl,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Ff,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:m=>Lx[m-1]||Mx,this.vsn){case Cx:this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(m,v)=>v(JSON.stringify(m)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(m,v)=>v(JSON.parse(m));break;case Pm:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var os=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ux(e,t,n){const r=new URL(t,e);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function Bx(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Fx(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=Ux(e.baseUrl,r,i),l=await Bx(e.auth),u=await t(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&c?JSON.parse(c):c;if(!u.ok){const p=d?f:void 0,m=p==null?void 0:p.error;throw new os((m==null?void 0:m.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function to(e){return e.join("")}var Hx=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:to(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${to(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${to(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${to(e.namespace)}`}),!0}catch(t){if(t instanceof os&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof os&&n.status===409)return;throw n}}};function lr(e){return e.join("")}var Vx=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${lr(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${lr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${lr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${lr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof os&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof os&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},Wx=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Fx({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Hx(this.client,t),this.tableOps=new Vx(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},ja=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function La(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var no=class extends ja{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Om=class extends ja{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const qx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Kx=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Du=e=>{if(Array.isArray(e))return e.map(n=>Du(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Du(r)}),t},Gx=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function as(e){"@babel/helpers - typeof";return as=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},as(e)}function Yx(e,t){if(as(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(as(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xx(e){var t=Yx(e,"string");return as(t)=="symbol"?t:t+""}function Jx(e,t,n){return(t=Xx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qf(Object(n),!0).forEach(function(r){Jx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Kf=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Qx=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e,s=i.status||500;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new no(Kf(o),s,a,r))}).catch(()=>{if(r==="vectors"){const o=s+"";t(new no(i.statusText||`HTTP ${s} error`,s,o,r))}else{const o=s+"";t(new no(i.statusText||`HTTP ${s} error`,s,o,r))}});else{const o=s+"";t(new no(i.statusText||`HTTP ${s} error`,s,o,r))}}else t(new Om(Kf(e),e,r))},Zx=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?Q(Q({},i),n):(Kx(r)?(i.headers=Q({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Q(Q({},i),n))};async function wi(e,t,n,r,i,s,o){return new Promise((a,l)=>{e(n,Zx(t,r,i,s)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;if(o==="vectors"){const c=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!c||!c.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>Qx(u,l,r,o))})}function $m(e="storage"){return{get:async(t,n,r,i)=>wi(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,s)=>wi(t,"POST",n,i,s,r,e),put:async(t,n,r,i,s)=>wi(t,"PUT",n,i,s,r,e),head:async(t,n,r,i)=>wi(t,"HEAD",n,Q(Q({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,s)=>wi(t,"DELETE",n,i,s,r,e)}}const eS=$m("storage"),{get:ls,post:vt,put:zu,head:tS,remove:Zc}=eS,tt=$m("vectors");var oi=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=qx(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Q(Q({},this.headers),{},{[e]:t}),this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}},nS=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(La(t))return{data:null,error:t};throw t}}};let jm;jm=Symbol.toStringTag;var rS=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[jm]="BlobDownloadBuilder",this.promise=null}asStream(){return new nS(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(La(t))return{data:null,error:t};throw t}}};const iS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var sS=class extends oi{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let s;const o=Q(Q({},Gf),r);let a=Q(Q({},i.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Q(Q({},a),r.headers));const u=i._removeEmptyFolders(t),c=i._getFinalPath(u),d=await(e=="PUT"?zu:vt)(i.fetch,`${i.url}/object/${c}`,s,Q({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;const s=i._removeEmptyFolders(e),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",t),i.handleOperation(async()=>{let l;const u=Q({upsert:Gf.upsert},r),c=Q(Q({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{path:s,fullPath:(await zu(i.fetch,a.toString(),l,{headers:c})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const i=Q({},n.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=await vt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new ja("No token returned by API");return{signedUrl:o.toString(),path:e,token:a}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await vt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await vt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),s=await vt(r.fetch,`${r.url}/object/sign/${i}`,Q({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const i=await vt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(o=>Q(Q({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null}))})}download(e,t,n){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(e),a=()=>ls(this.fetch,`${this.url}/${r}/${o}${s}`,{headers:this.headers,noResolveJson:!0},n);return new rS(a,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>Du(await ls(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await tS(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r)&&r instanceof Om){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Zc(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const i=Q(Q(Q({},iS),t),{},{prefix:e||""});return await vt(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=Q({},e);return await vt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const oS="2.97.0",Cs={"X-Client-Info":`storage-js/${oS}`};var aS=class extends oi{constructor(e,t={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const s=i.href.replace(/\/$/,""),o=Q(Q({},Cs),t);super(s,o,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await ls(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ls(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await vt(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await zu(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await vt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Zc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},lS=class extends oi{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=Q(Q({},Cs),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await vt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await ls(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Zc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!Gx(e))throw new ja("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Wx({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},uS=class extends oi{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=Q(Q({},Cs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await tt.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await tt.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},cS=class extends oi{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=Q(Q({},Cs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},dS=class extends oi{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=Q(Q({},Cs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},fS=class extends dS{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new hS(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},hS=class extends uS{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new pS(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},pS=class extends cS{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},gS=class extends aS{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new sS(this.url,this.headers,e,this.fetch)}get vectors(){return new fS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lS(this.url+"/iceberg",this.headers,this.fetch)}};const Lm="2.97.0",mr=30*1e3,Uu=3,Tl=Uu*mr,mS="http://localhost:9999",yS="supabase.auth.token",vS={"X-Client-Info":`gotrue-js/${Lm}`},Bu="X-Supabase-Api-Version",Mm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_S=10*60*1e3;class us extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xS extends us{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function SS(e){return q(e)&&e.name==="AuthApiError"}class Dn extends us{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class en extends us{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Ze extends en{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Nl(e){return q(e)&&e.name==="AuthSessionMissingError"}class ur extends en{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ro extends en{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class io extends en{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kS(e){return q(e)&&e.name==="AuthImplicitGrantRedirectError"}class Yf extends en{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ES extends en{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Fu extends en{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Pl(e){return q(e)&&e.name==="AuthRetryableFetchError"}class Xf extends en{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Hu extends en{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jf=` 	
\r=`.split(""),bS=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Jf.length;t+=1)e[Jf[t].charCodeAt(0)]=-2;for(let t=0;t<ia.length;t+=1)e[ia[t].charCodeAt(0)]=t;return e})();function Qf(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ia[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ia[r]),t.queuedBits-=6}}function Dm(e,t,n){const r=bS[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Zf(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{NS(o,r,n)};for(let o=0;o<e.length;o+=1)Dm(e.charCodeAt(o),i,s);return t.join("")}function CS(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function TS(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}CS(r,t)}}function NS(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function zr(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Dm(e.charCodeAt(i),n,r);return new Uint8Array(t)}function PS(e){const t=[];return TS(e,n=>t.push(n)),new Uint8Array(t)}function Fn(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Qf(i,n,r)),Qf(null,n,r),t.join("")}function AS(e){return Math.round(Date.now()/1e3)+e}function RS(){return Symbol("auth-callback")}const $e=()=>typeof window<"u"&&typeof document<"u",Rn={tested:!1,writable:!1},zm=()=>{if(!$e())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rn.tested)return Rn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rn.tested=!0,Rn.writable=!0}catch{Rn.tested=!0,Rn.writable=!1}return Rn.writable};function IS(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const Um=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),OS=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",yr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},In=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Oe=async(e,t)=>{await e.removeItem(t)};class Ma{constructor(){this.promise=new Ma.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ma.promiseConstructor=Promise;function so(e){const t=e.split(".");if(t.length!==3)throw new Hu("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!wS.test(t[r]))throw new Hu("JWT not in base64url format");return{header:JSON.parse(Zf(t[0])),payload:JSON.parse(Zf(t[1])),signature:zr(t[2]),raw:{header:t[0],payload:t[1]}}}async function $S(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function jS(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){i(o);return}}})()})}function LS(e){return("0"+e.toString(16)).substr(-2)}function MS(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,LS).join("")}async function DS(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function zS(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await DS(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cr(e,t,n=!1){const r=MS();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await yr(e,`${t}-code-verifier`,i);const s=await zS(r);return[s,r===s?"plain":"s256"]}const US=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BS(e){const t=e.headers.get(Bu);if(!t||!t.match(US))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function FS(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function HS(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const VS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function dr(e){if(!VS.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Al(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WS(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function eh(e){return JSON.parse(JSON.stringify(e))}const jn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qS=[502,503,504];async function th(e){var t;if(!OS(e))throw new Fu(jn(e),0);if(qS.includes(e.status))throw new Fu(jn(e),e.status);let n;try{n=await e.json()}catch(s){throw new Dn(jn(s),s)}let r;const i=BS(e);if(i&&i.getTime()>=Mm["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Xf(jn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ze}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Xf(jn(n),e.status,n.weak_password.reasons);throw new xS(jn(n),e.status||500,r)}const KS=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ee(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Bu]||(s[Bu]=Mm["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await GS(e,t,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function GS(e,t,n,r,i,s){const o=KS(t,r,i,s);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Fu(jn(l),0)}if(a.ok||await th(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await th(l)}}function mt(e){var t;let n=null;JS(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=AS(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function nh(e){const t=mt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function YS(e){return{data:e,error:null}}function XS(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,o=$a(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function rh(e){return e}function JS(e){return e.access_token&&e.refresh_token&&e.expires_in}const Rl=["global","local","others"];class QS{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Um(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Rl[0]){if(Rl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rl.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fn})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=$a(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:XS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fn})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:rh});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(m.split(";")[1].split("=")[1]);u[`${_}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(q(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){dr(t);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fn})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){dr(t);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:fn})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){dr(t);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:fn})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){dr(t.userId);try{const{data:n,error:r}=await ee(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(q(n))return{data:null,error:n};throw n}}async _deleteFactor(t){dr(t.userId),dr(t.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ee(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:rh});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(m.split(";")[1].split("=")[1]);u[`${_}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(q(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ee(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ee(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ee(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ee(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ee(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(q(n))return{data:null,error:n};throw n}}}function ih(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const fr={debug:!!(globalThis&&zm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bm extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class sh extends Bm{}async function ZS(e,t,n){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;t>0&&setTimeout(()=>{r.abort(),fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new sh(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(fr.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}catch(i){throw(i==null?void 0:i.name)==="AbortError"?new sh(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${t}ms`):i}}function e1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Fm(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function t1(e){return parseInt(e,16)}function n1(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function r1(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=Fm(e.address),m=c?`${c}://${r}`:r,v=e.statement?`${e.statement}
`:"",_=`${m} wants you to sign in with your Ethereum account:
${p}

${v}`;let g=`URI: ${d}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const h of u){if(!h||typeof h!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${h}`);y+=`
- ${h}`}g+=y}return`${_}
${g}`}class Ee extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class sa extends Ee{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function i1({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ee({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ee({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ee({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ee({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ee({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ee({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ee({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ee({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Hm(o)){if(s.rp.id!==o)return new Ee({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Ee({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function s1({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ee({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ee({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(Hm(r)){if(n.rpId!==r)return new Ee({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class o1{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const a1=new o1;function l1(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=$a(e,["challenge","user","excludeCredentials"]),s=zr(t).buffer,o=Object.assign(Object.assign({},n),{id:zr(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:zr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function u1(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=$a(e,["challenge","allowCredentials"]),i=zr(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:zr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function c1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Fn(new Uint8Array(e.response.attestationObject)),clientDataJSON:Fn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function d1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Fn(new Uint8Array(i.authenticatorData)),clientDataJSON:Fn(new Uint8Array(i.clientDataJSON)),signature:Fn(new Uint8Array(i.signature)),userHandle:i.userHandle?Fn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Hm(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function oh(){var e,t;return!!($e()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function f1(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sa("Browser returned unexpected credential type",t)}:{data:null,error:new sa("Empty credential response",t)}}catch(t){return{data:null,error:i1({error:t,options:e})}}}async function h1(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sa("Browser returned unexpected credential type",t)}:{data:null,error:new sa("Empty credential response",t)}}catch(t){return{data:null,error:s1({error:t,options:e})}}}const p1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},g1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function oa(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(t(o)){const a=r[s];t(a)?r[s]=oa(a,o):r[s]=oa(o)}else r[s]=o}return r}function m1(e,t){return oa(p1,e,t||{})}function y1(e,t){return oa(g1,e,t||{})}class v1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:l};const u=i??a1.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;if(!c.name){const d=r;if(d)c.name=`${c.id}:${d}`;else{const p=(await this.client.getUser()).data.user,m=((o=p==null?void 0:p.user_metadata)===null||o===void 0?void 0:o.name)||(p==null?void 0:p.email)||(p==null?void 0:p.id)||"User";c.name=`${c.id}:${m}`}}c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=m1(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await f1({publicKey:c,signal:u});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const c=y1(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await h1(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:u}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(a){return q(a)?{data:null,error:a}:{data:null,error:new Dn("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new us("rpId is required for WebAuthn authentication")};try{if(!oh())return{data:null,error:new Dn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return q(o)?{data:null,error:o}:{data:null,error:new Dn("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new us("rpId is required for WebAuthn registration")};try{if(!oh())return{data:null,error:new Dn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return q(o)?{data:null,error:o}:{data:null,error:new Dn("Unexpected error in register",o)}}}}e1();const w1={url:mS,storageKey:yS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function ah(e,t,n){return await n()}const hr={};class cs{get jwks(){var t,n;return(n=(t=hr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=hr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},w1),t);if(this.storageKey=s.storageKey,this.instanceID=(n=cs.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,cs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&$e()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new QS({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Um(s.fetch),this.lock=s.lock||ah,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&$e()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ZS:this.lock=ah,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new v1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:zm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ih(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ih(this.memoryStorage)),$e()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}s.skipAutoInitialize||this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Lm}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if($e()&&(n=IS(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),$e()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),kS(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return q(n)?this._returnResult({error:n}):this._returnResult({error:new Dn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:mt}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:c,password:d,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await cr(this.storage,this.storageKey)),s=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:mt})}else if("phone"in t){const{phone:c,password:d,options:f}=t;s=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:mt})}else throw new ro("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Oe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:a}=t;n=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:nh})}else if("phone"in t){const{phone:s,password:o,options:a}=t;n=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:nh})}else throw new ro("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new ur;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(q(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,o,a,l,u,c,d,f;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:v,wallet:_,statement:g,options:y}=t;let h;if($e())if(typeof _=="object")h=_;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")h=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");h=_}const w=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),k=await h.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=Fm(k[0]);let E=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const O=await h.request({method:"eth_chainId"});E=t1(O)}const N={domain:w.host,address:x,statement:g,uri:w.href,version:"1",chainId:E,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};p=r1(N),m=await h.request({method:"personal_sign",params:[n1(p),x]})}try{const{data:v,error:_}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:mt});if(_)throw _;if(!v||!v.session||!v.user){const g=new ur;return this._returnResult({data:{user:null,session:null},error:g})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:_})}catch(v){if(q(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var n,r,i,s,o,a,l,u,c,d,f,p;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:_,wallet:g,statement:y,options:h}=t;let w;if($e())if(typeof g=="object")w=g;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))w=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const k=new URL((n=h==null?void 0:h.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const x=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},h==null?void 0:h.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),y?{statement:y}:null));let E;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")E=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)E=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)m=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),v=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(r=h==null?void 0:h.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=h==null?void 0:h.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${h.signInWithSolana.notBefore}`]:[],...!((o=h==null?void 0:h.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${h.signInWithSolana.expirationTime}`]:[],...!((a=h==null?void 0:h.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${h.signInWithSolana.chainId}`]:[],...!((l=h==null?void 0:h.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${h.signInWithSolana.nonce}`]:[],...!((u=h==null?void 0:h.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${h.signInWithSolana.requestId}`]:[],...!((d=(c=h==null?void 0:h.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...h.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const x=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=x}}try{const{data:_,error:g}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Fn(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:mt});if(g)throw g;if(!_||!_.session||!_.user){const y=new ur;return this._returnResult({data:{user:null,session:null},error:y})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:g})}catch(_){if(q(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const n=await In(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new ES;const{data:s,error:o}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:mt});if(await Oe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new ur;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),q(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=t,a=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:mt}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new ur;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(q(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,s,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await cr(this.storage,this.storageKey));const{error:d}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new ro("You must provide either an email or phone number.")}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),q(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:mt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(q(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await cr(this.storage,this.storageKey));const u=await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:YS});return!((s=u.data)===null||s===void 0)&&s.url&&$e()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),q(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ze;const{error:i}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(q(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:o}=await ee(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:o,error:a}=await ee(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new ro("You must provide either an email or phone number and a type")}catch(n){if(q(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await In(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Tl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await In(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Al()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=WS(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fn}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ze}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:fn})})}catch(n){if(q(n))return Nl(n)&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Ze;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await cr(this.storage,this.storageKey));const{data:u,error:c}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:fn});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),q(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ze;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=so(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});s={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(q(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ze;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(q(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!$e())throw new io("No browser detected.");if(t.error||t.error_description||t.error_code)throw new io(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Yf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new io("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Yf("No code detected.");const{data:y,error:h}=await this._exchangeCodeForSession(t.code);if(h)throw h;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!s||!a||!o||!u)throw new io("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const p=f-c;p*1e3<=mr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=f-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,c);const{data:v,error:_}=await this._getUser(s);if(_)throw _;const g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(r){if(q(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await In(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s&&!Nl(s))return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(SS(a)&&(a.status===404||a.status===401||a.status===403)||Nl(a)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=RS(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await cr(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),q(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:d,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return $e()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(q(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,d=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:mt}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new ur}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),q(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await jS(async i=>(i>0&&await $S(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:mt})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Pl(s)&&Date.now()+o-r<mr})}catch(r){if(this._debug(n,"error",r),q(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),$e()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await In(this.storage,this.storageKey);if(i&&this.userStorage){let o=await In(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await yr(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Al()}else if(i&&!i.user&&!i.user){const o=await In(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Oe(this.storage,this.storageKey+"-user"),await yr(this.storage,this.storageKey,i)):i.user=Al()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Tl;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Tl}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Pl(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ma;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Ze;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),q(s)){const o={data:null,error:s};return Pl(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Oe(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await yr(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=eh(i);await yr(this.storage,this.storageKey,s)}else{const i=eh(n);await yr(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Oe(this.storage,this.storageKey),await Oe(this.storage,this.storageKey+"-code-verifier"),await Oe(this.storage,this.storageKey+"-user"),this.userStorage&&await Oe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&$e()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),mr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/mr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${mr}ms, refresh threshold is ${Uu} ticks`),i<=Uu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bm)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$e()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await cr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await ee(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?c1(t.webauthn.credential_response):d1(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:l1(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u1(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,i,s;if(t)try{const{payload:p}=so(t);let m=null;p.aal&&(m=p.aal);let v=m;const{data:{user:_},error:g}=await this.getUser(t);if(g)return this._returnResult({data:null,error:g});((r=(n=_==null?void 0:_.factors)===null||n===void 0?void 0:n.filter(w=>w.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(v="aal2");const h=p.amr||[];return{data:{currentLevel:m,nextLevel:v,currentAuthenticationMethods:h},error:null}}catch(p){if(q(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=so(o.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((s=(i=o.user.factors)===null||i===void 0?void 0:i.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ee(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ze})})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Ze});const o=await ee(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&$e()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Ze});const o=await ee(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&$e()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await ee(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ze})})}catch(t){if(q(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ee(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ze})})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+_S>i)return r;const{data:s,error:o}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=so(r);n!=null&&n.allowExpired||FS(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:o},error:null}}const c=HS(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,PS(`${a}.${l}`)))throw new Hu("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}}cs.nextInstanceID={};const _1=cs,x1="2.97.0";let Ci="";typeof Deno<"u"?Ci="deno":typeof document<"u"?Ci="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ci="react-native":Ci="node";const S1={"X-Client-Info":`supabase-js-${Ci}/${x1}`},k1={headers:S1},E1={schema:"public"},b1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},C1={};function ds(e){"@babel/helpers - typeof";return ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ds(e)}function T1(e,t){if(ds(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ds(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N1(e){var t=T1(e,"string");return ds(t)=="symbol"?t:t+""}function P1(e,t,n){return(t=N1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lh(Object(n),!0).forEach(function(r){P1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const A1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),R1=()=>Headers,I1=(e,t,n)=>{const r=A1(n),i=R1();return async(s,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,xe(xe({},o),{},{headers:u}))}};function O1(e){return e.endsWith("/")?e:e+"/"}function $1(e,t){var n,r;const{db:i,auth:s,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:d}=t,f={db:xe(xe({},l),i),auth:xe(xe({},u),s),realtime:xe(xe({},c),o),storage:{},global:xe(xe(xe({},d),a),{},{headers:xe(xe({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function j1(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(O1(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var L1=class extends _1{constructor(e){super(e)}},M1=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;const s=j1(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:E1,realtime:C1,auth:xe(xe({},b1),{},{storageKey:o}),global:k1},l=$1(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=I1(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(xe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new Sx(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new gS(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new px(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:u},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new L1({url:this.authUrl.href,headers:xe(xe({},f),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new zx(this.realtimeUrl.href,xe(xe({},e),{},{params:xe(xe({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const D1=(e,t,n)=>new M1(e,t,n);function z1(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}z1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ne=D1("https://kwytxeosvksbgeqquvac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt3eXR4ZW9zdmtzYmdlcXF1dmFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE1NTgzODIsImV4cCI6MjA4NzEzNDM4Mn0.l-H_BfOIPAiewYmu7MRac2N6mWBFV3X-jcEqoAJcAfI");function U1({onAuthenticated:e}){const[t,n]=L.useState(""),[r,i]=L.useState(""),[s,o]=L.useState(!1),a=async l=>{l.preventDefault(),o(!0),i("");const{error:u}=await Ne.auth.signInWithPassword({email:"trongtb90@gmail.com",password:t});u?i("Sai mt khu. Vui lng th li."):e(),o(!1)};return A.jsx("div",{className:"password-gate",children:A.jsxs("form",{className:"password-form",onSubmit:a,children:[A.jsx("h1",{children:" H hng ca Nam"}),A.jsx("input",{type:"password",placeholder:"Nhp mt khu",value:t,onChange:l=>n(l.target.value),autoFocus:!0}),A.jsx("button",{type:"submit",disabled:s,children:s?"ang ng nhp...":"ng nhp"}),r&&A.jsx("p",{className:"error",children:r})]})})}function Ce(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ce(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var B1={value:()=>{}};function Da(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Po(n)}function Po(e){this._=e}function F1(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Po.prototype=Da.prototype={constructor:Po,on:function(e,t){var n=this._,r=F1(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=H1(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=uh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=uh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Po(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function H1(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function uh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=B1,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vu="http://www.w3.org/1999/xhtml";const ch={svg:"http://www.w3.org/2000/svg",xhtml:Vu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function za(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ch.hasOwnProperty(t)?{space:ch[t],local:e}:e}function V1(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vu&&t.documentElement.namespaceURI===Vu?t.createElement(e):t.createElementNS(n,e)}}function W1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vm(e){var t=za(e);return(t.local?W1:V1)(t)}function q1(){}function ed(e){return e==null?q1:function(){return this.querySelector(e)}}function K1(e){typeof e!="function"&&(e=ed(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new ot(r,this._parents)}function G1(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Y1(){return[]}function Wm(e){return e==null?Y1:function(){return this.querySelectorAll(e)}}function X1(e){return function(){return G1(e.apply(this,arguments))}}function J1(e){typeof e=="function"?e=X1(e):e=Wm(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new ot(r,i)}function qm(e){return function(){return this.matches(e)}}function Km(e){return function(t){return t.matches(e)}}var Q1=Array.prototype.find;function Z1(e){return function(){return Q1.call(this.children,e)}}function ek(){return this.firstElementChild}function tk(e){return this.select(e==null?ek:Z1(typeof e=="function"?e:Km(e)))}var nk=Array.prototype.filter;function rk(){return Array.from(this.children)}function ik(e){return function(){return nk.call(this.children,e)}}function sk(e){return this.selectAll(e==null?rk:ik(typeof e=="function"?e:Km(e)))}function ok(e){typeof e!="function"&&(e=qm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new ot(r,this._parents)}function Gm(e){return new Array(e.length)}function ak(){return new ot(this._enter||this._groups.map(Gm),this._parents)}function aa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}aa.prototype={constructor:aa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function lk(e){return function(){return e}}function uk(e,t,n,r,i,s){for(var o=0,a,l=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new aa(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function ck(e,t,n,r,i,s,o){var a,l,u=new Map,c=t.length,d=s.length,f=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(f[a]=p=o.call(l,l.__data__,a,t)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<d;++a)p=o.call(e,s[a],a,s)+"",(l=u.get(p))?(r[a]=l,l.__data__=s[a],u.delete(p)):n[a]=new aa(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function dk(e){return e.__data__}function fk(e,t){if(!arguments.length)return Array.from(this,dk);var n=t?ck:uk,r=this._parents,i=this._groups;typeof e!="function"&&(e=lk(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],d=i[u],f=d.length,p=hk(e.call(c,c&&c.__data__,u,r)),m=p.length,v=a[u]=new Array(m),_=o[u]=new Array(m),g=l[u]=new Array(f);n(c,d,v,_,g,p,t);for(var y=0,h=0,w,k;y<m;++y)if(w=v[y]){for(y>=h&&(h=y+1);!(k=_[h])&&++h<m;);w._next=k||null}}return o=new ot(o,r),o._enter=a,o._exit=l,o}function hk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pk(){return new ot(this._exit||this._groups.map(Gm),this._parents)}function gk(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function mk(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],d=u.length,f=a[l]=new Array(d),p,m=0;m<d;++m)(p=u[m]||c[m])&&(f[m]=p);for(;l<i;++l)a[l]=n[l];return new ot(a,this._parents)}function yk(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function vk(e){e||(e=wk);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new ot(i,this._parents).order()}function wk(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _k(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function xk(){return Array.from(this)}function Sk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function kk(){let e=0;for(const t of this)++e;return e}function Ek(){return!this.node()}function bk(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Ck(e){return function(){this.removeAttribute(e)}}function Tk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nk(e,t){return function(){this.setAttribute(e,t)}}function Pk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ak(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Rk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ik(e,t){var n=za(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Tk:Ck:typeof t=="function"?n.local?Rk:Ak:n.local?Pk:Nk)(n,t))}function Ym(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ok(e){return function(){this.style.removeProperty(e)}}function $k(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jk(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Lk(e,t,n){return arguments.length>1?this.each((t==null?Ok:typeof t=="function"?jk:$k)(e,t,n??"")):Yr(this.node(),e)}function Yr(e,t){return e.style.getPropertyValue(t)||Ym(e).getComputedStyle(e,null).getPropertyValue(t)}function Mk(e){return function(){delete this[e]}}function Dk(e,t){return function(){this[e]=t}}function zk(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Uk(e,t){return arguments.length>1?this.each((t==null?Mk:typeof t=="function"?zk:Dk)(e,t)):this.node()[e]}function Xm(e){return e.trim().split(/^|\s+/)}function td(e){return e.classList||new Jm(e)}function Jm(e){this._node=e,this._names=Xm(e.getAttribute("class")||"")}Jm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qm(e,t){for(var n=td(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Zm(e,t){for(var n=td(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Bk(e){return function(){Qm(this,e)}}function Fk(e){return function(){Zm(this,e)}}function Hk(e,t){return function(){(t.apply(this,arguments)?Qm:Zm)(this,e)}}function Vk(e,t){var n=Xm(e+"");if(arguments.length<2){for(var r=td(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Hk:t?Bk:Fk)(n,t))}function Wk(){this.textContent=""}function qk(e){return function(){this.textContent=e}}function Kk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Gk(e){return arguments.length?this.each(e==null?Wk:(typeof e=="function"?Kk:qk)(e)):this.node().textContent}function Yk(){this.innerHTML=""}function Xk(e){return function(){this.innerHTML=e}}function Jk(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qk(e){return arguments.length?this.each(e==null?Yk:(typeof e=="function"?Jk:Xk)(e)):this.node().innerHTML}function Zk(){this.nextSibling&&this.parentNode.appendChild(this)}function eE(){return this.each(Zk)}function tE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nE(){return this.each(tE)}function rE(e){var t=typeof e=="function"?e:Vm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iE(){return null}function sE(e,t){var n=typeof e=="function"?e:Vm(e),r=t==null?iE:typeof t=="function"?t:ed(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function oE(){var e=this.parentNode;e&&e.removeChild(this)}function aE(){return this.each(oE)}function lE(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cE(e){return this.select(e?uE:lE)}function dE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function fE(e){return function(t){e.call(this,t,this.__data__)}}function hE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function pE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function gE(e,t,n){return function(){var r=this.__on,i,s=fE(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function mE(e,t,n){var r=hE(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?gE:pE,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function ey(e,t,n){var r=Ym(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function yE(e,t){return function(){return ey(this,e,t)}}function vE(e,t){return function(){return ey(this,e,t.apply(this,arguments))}}function wE(e,t){return this.each((typeof t=="function"?vE:yE)(e,t))}function*_E(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var ty=[null];function ot(e,t){this._groups=e,this._parents=t}function Ts(){return new ot([[document.documentElement]],ty)}function xE(){return this}ot.prototype=Ts.prototype={constructor:ot,select:K1,selectAll:J1,selectChild:tk,selectChildren:sk,filter:ok,data:fk,enter:ak,exit:pk,join:gk,merge:mk,selection:xE,order:yk,sort:vk,call:_k,nodes:xk,node:Sk,size:kk,empty:Ek,each:bk,attr:Ik,style:Lk,property:Uk,classed:Vk,text:Gk,html:Qk,raise:eE,lower:nE,append:rE,insert:sE,remove:aE,clone:cE,datum:dE,on:mE,dispatch:wE,[Symbol.iterator]:_E};function nt(e){return typeof e=="string"?new ot([[document.querySelector(e)]],[document.documentElement]):new ot([[e]],ty)}function SE(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xt(e,t){if(e=SE(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const kE={passive:!1},fs={capture:!0,passive:!1};function Il(e){e.stopImmediatePropagation()}function Ur(e){e.preventDefault(),e.stopImmediatePropagation()}function ny(e){var t=e.document.documentElement,n=nt(e).on("dragstart.drag",Ur,fs);"onselectstart"in t?n.on("selectstart.drag",Ur,fs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ry(e,t){var n=e.document.documentElement,r=nt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ur,fs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const oo=e=>()=>e;function Wu(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Wu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function EE(e){return!e.ctrlKey&&!e.button}function bE(){return this.parentNode}function CE(e,t){return t??{x:e.x,y:e.y}}function TE(){return navigator.maxTouchPoints||"ontouchstart"in this}function iy(){var e=EE,t=bE,n=CE,r=TE,i={},s=Da("start","drag","end"),o=0,a,l,u,c,d=0;function f(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",_).on("touchmove.drag",g,kE).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,k){if(!(c||!e.call(this,w,k))){var x=h(this,t.call(this,w,k),w,k,"mouse");x&&(nt(w.view).on("mousemove.drag",m,fs).on("mouseup.drag",v,fs),ny(w.view),Il(w),u=!1,a=w.clientX,l=w.clientY,x("start",w))}}function m(w){if(Ur(w),!u){var k=w.clientX-a,x=w.clientY-l;u=k*k+x*x>d}i.mouse("drag",w)}function v(w){nt(w.view).on("mousemove.drag mouseup.drag",null),ry(w.view,u),Ur(w),i.mouse("end",w)}function _(w,k){if(e.call(this,w,k)){var x=w.changedTouches,E=t.call(this,w,k),N=x.length,O,$;for(O=0;O<N;++O)($=h(this,E,w,k,x[O].identifier,x[O]))&&(Il(w),$("start",w,x[O]))}}function g(w){var k=w.changedTouches,x=k.length,E,N;for(E=0;E<x;++E)(N=i[k[E].identifier])&&(Ur(w),N("drag",w,k[E]))}function y(w){var k=w.changedTouches,x=k.length,E,N;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),E=0;E<x;++E)(N=i[k[E].identifier])&&(Il(w),N("end",w,k[E]))}function h(w,k,x,E,N,O){var $=s.copy(),T=xt(O||x,k),P,D,S;if((S=n.call(w,new Wu("beforestart",{sourceEvent:x,target:f,identifier:N,active:o,x:T[0],y:T[1],dx:0,dy:0,dispatch:$}),E))!=null)return P=S.x-T[0]||0,D=S.y-T[1]||0,function I(R,M,b){var C=T,j;switch(R){case"start":i[N]=I,j=o++;break;case"end":delete i[N],--o;case"drag":T=xt(b||M,k),j=o;break}$.call(R,w,new Wu(R,{sourceEvent:M,subject:S,target:f,identifier:N,active:j,x:T[0]+P,y:T[1]+D,dx:T[0]-C[0],dy:T[1]-C[1],dispatch:$}),E)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:oo(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:oo(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:oo(w),f):n},f.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:oo(!!w),f):r},f.on=function(){var w=s.on.apply(s,arguments);return w===s?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function nd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function sy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ns(){}var hs=.7,la=1/hs,Br="\\s*([+-]?\\d+)\\s*",ps="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NE=/^#([0-9a-f]{3,8})$/,PE=new RegExp(`^rgb\\(${Br},${Br},${Br}\\)$`),AE=new RegExp(`^rgb\\(${Lt},${Lt},${Lt}\\)$`),RE=new RegExp(`^rgba\\(${Br},${Br},${Br},${ps}\\)$`),IE=new RegExp(`^rgba\\(${Lt},${Lt},${Lt},${ps}\\)$`),OE=new RegExp(`^hsl\\(${ps},${Lt},${Lt}\\)$`),$E=new RegExp(`^hsla\\(${ps},${Lt},${Lt},${ps}\\)$`),dh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nd(Ns,Zn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fh,formatHex:fh,formatHex8:jE,formatHsl:LE,formatRgb:hh,toString:hh});function fh(){return this.rgb().formatHex()}function jE(){return this.rgb().formatHex8()}function LE(){return oy(this).formatHsl()}function hh(){return this.rgb().formatRgb()}function Zn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=NE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ph(t):n===3?new Ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ao(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ao(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=PE.exec(e))?new Ye(t[1],t[2],t[3],1):(t=AE.exec(e))?new Ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=RE.exec(e))?ao(t[1],t[2],t[3],t[4]):(t=IE.exec(e))?ao(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=OE.exec(e))?yh(t[1],t[2]/100,t[3]/100,1):(t=$E.exec(e))?yh(t[1],t[2]/100,t[3]/100,t[4]):dh.hasOwnProperty(e)?ph(dh[e]):e==="transparent"?new Ye(NaN,NaN,NaN,0):null}function ph(e){return new Ye(e>>16&255,e>>8&255,e&255,1)}function ao(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ye(e,t,n,r)}function ME(e){return e instanceof Ns||(e=Zn(e)),e?(e=e.rgb(),new Ye(e.r,e.g,e.b,e.opacity)):new Ye}function qu(e,t,n,r){return arguments.length===1?ME(e):new Ye(e,t,n,r??1)}function Ye(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}nd(Ye,qu,sy(Ns,{brighter(e){return e=e==null?la:Math.pow(la,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hs:Math.pow(hs,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ye(qn(this.r),qn(this.g),qn(this.b),ua(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gh,formatHex:gh,formatHex8:DE,formatRgb:mh,toString:mh}));function gh(){return`#${Hn(this.r)}${Hn(this.g)}${Hn(this.b)}`}function DE(){return`#${Hn(this.r)}${Hn(this.g)}${Hn(this.b)}${Hn((isNaN(this.opacity)?1:this.opacity)*255)}`}function mh(){const e=ua(this.opacity);return`${e===1?"rgb(":"rgba("}${qn(this.r)}, ${qn(this.g)}, ${qn(this.b)}${e===1?")":`, ${e})`}`}function ua(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hn(e){return e=qn(e),(e<16?"0":"")+e.toString(16)}function yh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kt(e,t,n,r)}function oy(e){if(e instanceof kt)return new kt(e.h,e.s,e.l,e.opacity);if(e instanceof Ns||(e=Zn(e)),!e)return new kt;if(e instanceof kt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new kt(o,a,l,e.opacity)}function zE(e,t,n,r){return arguments.length===1?oy(e):new kt(e,t,n,r??1)}function kt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nd(kt,zE,sy(Ns,{brighter(e){return e=e==null?la:Math.pow(la,e),new kt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hs:Math.pow(hs,e),new kt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ye(Ol(e>=240?e-240:e+120,i,r),Ol(e,i,r),Ol(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new kt(vh(this.h),lo(this.s),lo(this.l),ua(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ua(this.opacity);return`${e===1?"hsl(":"hsla("}${vh(this.h)}, ${lo(this.s)*100}%, ${lo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vh(e){return e=(e||0)%360,e<0?e+360:e}function lo(e){return Math.max(0,Math.min(1,e||0))}function Ol(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rd=e=>()=>e;function UE(e,t){return function(n){return e+n*t}}function BE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function FE(e){return(e=+e)==1?ay:function(t,n){return n-t?BE(t,n,e):rd(isNaN(t)?n:t)}}function ay(e,t){var n=t-e;return n?UE(e,n):rd(isNaN(e)?t:e)}const ca=function e(t){var n=FE(t);function r(i,s){var o=n((i=qu(i)).r,(s=qu(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=ay(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function HE(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function VE(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function WE(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ui(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function qE(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function It(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function KE(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ui(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Ku=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$l=new RegExp(Ku.source,"g");function GE(e){return function(){return e}}function YE(e){return function(t){return e(t)+""}}function ly(e,t){var n=Ku.lastIndex=$l.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Ku.exec(e))&&(i=$l.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:It(r,i)})),n=$l.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?YE(l[0].x):GE(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Ui(e,t){var n=typeof t,r;return t==null||n==="boolean"?rd(t):(n==="number"?It:n==="string"?(r=Zn(t))?(t=r,ca):ly:t instanceof Zn?ca:t instanceof Date?qE:VE(t)?HE:Array.isArray(t)?WE:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?KE:It)(e,t)}var wh=180/Math.PI,Gu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uy(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*wh,skewX:Math.atan(l)*wh,scaleX:o,scaleY:a}}var uo;function XE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gu:uy(t.a,t.b,t.c,t.d,t.e,t.f)}function JE(e){return e==null||(uo||(uo=document.createElementNS("http://www.w3.org/2000/svg","g")),uo.setAttribute("transform",e),!(e=uo.transform.baseVal.consolidate()))?Gu:(e=e.matrix,uy(e.a,e.b,e.c,e.d,e.e,e.f))}function cy(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,p,m){if(u!==d||c!==f){var v=p.push("translate(",null,t,null,n);m.push({i:v-4,x:It(u,d)},{i:v-2,x:It(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function o(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:It(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:It(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,p,m){if(u!==d||c!==f){var v=p.push(i(p)+"scale(",null,",",null,")");m.push({i:v-4,x:It(u,d)},{i:v-2,x:It(c,f)})}else(d!==1||f!==1)&&p.push(i(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),o(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var m=-1,v=f.length,_;++m<v;)d[(_=f[m]).i]=_.x(p);return d.join("")}}}var QE=cy(XE,"px, ","px)","deg)"),ZE=cy(JE,", ",")",")"),eb=1e-12;function _h(e){return((e=Math.exp(e))+1/e)/2}function tb(e){return((e=Math.exp(e))-1/e)/2}function nb(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ao=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],f=o[2],p=c-a,m=d-l,v=p*p+m*m,_,g;if(v<eb)g=Math.log(f/u)/t,_=function(E){return[a+E*p,l+E*m,u*Math.exp(t*E*g)]};else{var y=Math.sqrt(v),h=(f*f-u*u+r*v)/(2*u*n*y),w=(f*f-u*u-r*v)/(2*f*n*y),k=Math.log(Math.sqrt(h*h+1)-h),x=Math.log(Math.sqrt(w*w+1)-w);g=(x-k)/t,_=function(E){var N=E*g,O=_h(k),$=u/(n*y)*(O*nb(t*N+k)-tb(k));return[a+$*p,l+$*m,u*O/_h(t*N+k)]}}return _.duration=g*1e3*t/Math.SQRT2,_}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);var Xr=0,Ti=0,_i=0,dy=1e3,da,Ni,fa=0,er=0,Ua=0,gs=typeof performance=="object"&&performance.now?performance:Date,fy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function id(){return er||(fy(rb),er=gs.now()+Ua)}function rb(){er=0}function ha(){this._call=this._time=this._next=null}ha.prototype=hy.prototype={constructor:ha,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?id():+n)+(t==null?0:+t),!this._next&&Ni!==this&&(Ni?Ni._next=this:da=this,Ni=this),this._call=e,this._time=n,Yu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yu())}};function hy(e,t,n){var r=new ha;return r.restart(e,t,n),r}function ib(){id(),++Xr;for(var e=da,t;e;)(t=er-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xr}function xh(){er=(fa=gs.now())+Ua,Xr=Ti=0;try{ib()}finally{Xr=0,ob(),er=0}}function sb(){var e=gs.now(),t=e-fa;t>dy&&(Ua-=t,fa=e)}function ob(){for(var e,t=da,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:da=n);Ni=e,Yu(r)}function Yu(e){if(!Xr){Ti&&(Ti=clearTimeout(Ti));var t=e-er;t>24?(e<1/0&&(Ti=setTimeout(xh,e-gs.now()-Ua)),_i&&(_i=clearInterval(_i))):(_i||(fa=gs.now(),_i=setInterval(sb,dy)),Xr=1,fy(xh))}}function Sh(e,t,n){var r=new ha;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var ab=Da("start","end","cancel","interrupt"),lb=[],py=0,kh=1,Xu=2,Ro=3,Eh=4,Ju=5,Io=6;function Ba(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;ub(e,n,{name:t,index:r,group:i,on:ab,tween:lb,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:py})}function sd(e,t){var n=Pt(e,t);if(n.state>py)throw new Error("too late; already scheduled");return n}function Dt(e,t){var n=Pt(e,t);if(n.state>Ro)throw new Error("too late; already running");return n}function Pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ub(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=hy(s,0,n.time);function s(u){n.state=kh,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,d,f,p;if(n.state!==kh)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Ro)return Sh(o);p.state===Eh?(p.state=Io,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Io,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(Sh(function(){n.state===Ro&&(n.state=Eh,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Xu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xu){for(n.state=Ro,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Ju,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===Ju&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Io,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Oo(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Xu&&r.state<Ju,r.state=Io,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function cb(e){return this.each(function(){Oo(this,e)})}function db(e,t){var n,r;return function(){var i=Dt(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function fb(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Dt(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function hb(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Pt(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?db:fb)(n,e,t))}function od(e,t,n){var r=e._id;return e.each(function(){var i=Dt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Pt(i,r).value[t]}}function gy(e,t){var n;return(typeof t=="number"?It:t instanceof Zn?ca:(n=Zn(t))?(t=n,ca):ly)(e,t)}function pb(e){return function(){this.removeAttribute(e)}}function gb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mb(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function yb(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function vb(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function wb(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function _b(e,t){var n=za(e),r=n==="transform"?ZE:gy;return this.attrTween(e,typeof t=="function"?(n.local?wb:vb)(n,r,od(this,"attr."+e,t)):t==null?(n.local?gb:pb)(n):(n.local?yb:mb)(n,r,t))}function xb(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Sb(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kb(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Sb(e,s)),n}return i._value=t,i}function Eb(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&xb(e,s)),n}return i._value=t,i}function bb(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=za(e);return this.tween(n,(r.local?kb:Eb)(r,t))}function Cb(e,t){return function(){sd(this,e).delay=+t.apply(this,arguments)}}function Tb(e,t){return t=+t,function(){sd(this,e).delay=t}}function Nb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cb:Tb)(t,e)):Pt(this.node(),t).delay}function Pb(e,t){return function(){Dt(this,e).duration=+t.apply(this,arguments)}}function Ab(e,t){return t=+t,function(){Dt(this,e).duration=t}}function Rb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pb:Ab)(t,e)):Pt(this.node(),t).duration}function Ib(e,t){if(typeof t!="function")throw new Error;return function(){Dt(this,e).ease=t}}function Ob(e){var t=this._id;return arguments.length?this.each(Ib(t,e)):Pt(this.node(),t).ease}function $b(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Dt(this,e).ease=n}}function jb(e){if(typeof e!="function")throw new Error;return this.each($b(this._id,e))}function Lb(e){typeof e!="function"&&(e=qm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Qt(r,this._parents,this._name,this._id)}function Mb(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=o[a]=new Array(c),f,p=0;p<c;++p)(f=l[p]||u[p])&&(d[p]=f);for(;a<r;++a)o[a]=t[a];return new Qt(o,this._parents,this._name,this._id)}function Db(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zb(e,t,n){var r,i,s=Db(t)?sd:Dt;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Ub(e,t){var n=this._id;return arguments.length<2?Pt(this.node(),n).on.on(e):this.each(zb(n,e,t))}function Bb(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Fb(){return this.on("end.remove",Bb(this._id))}function Hb(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ed(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Ba(u[f],t,n,f,u,Pt(c,n)));return new Qt(s,this._parents,t,n)}function Vb(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wm(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),p,m=Pt(c,n),v=0,_=f.length;v<_;++v)(p=f[v])&&Ba(p,t,n,v,f,m);s.push(f),o.push(c)}return new Qt(s,o,t,n)}var Wb=Ts.prototype.constructor;function qb(){return new Wb(this._groups,this._parents)}function Kb(e,t){var n,r,i;return function(){var s=Yr(this,e),o=(this.style.removeProperty(e),Yr(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function my(e){return function(){this.style.removeProperty(e)}}function Gb(e,t,n){var r,i=n+"",s;return function(){var o=Yr(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Yb(e,t,n){var r,i,s;return function(){var o=Yr(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Yr(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function Xb(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Dt(this,e),u=l.on,c=l.value[s]==null?a||(a=my(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function Jb(e,t,n){var r=(e+="")=="transform"?QE:gy;return t==null?this.styleTween(e,Kb(e,r)).on("end.style."+e,my(e)):typeof t=="function"?this.styleTween(e,Yb(e,r,od(this,"style."+e,t))).each(Xb(this._id,e)):this.styleTween(e,Gb(e,r,t),n).on("end.style."+e,null)}function Qb(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Zb(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Qb(e,o,n)),r}return s._value=t,s}function eC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Zb(e,t,n??""))}function tC(e){return function(){this.textContent=e}}function nC(e){return function(){var t=e(this);this.textContent=t??""}}function rC(e){return this.tween("text",typeof e=="function"?nC(od(this,"text",e)):tC(e==null?"":e+""))}function iC(e){return function(t){this.textContent=e.call(this,t)}}function sC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&iC(i)),t}return r._value=e,r}function oC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,sC(e))}function aC(){for(var e=this._name,t=this._id,n=yy(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=Pt(l,t);Ba(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Qt(r,this._parents,e,n)}function lC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=Dt(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var uC=0;function Qt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function yy(){return++uC}var Ut=Ts.prototype;Qt.prototype={constructor:Qt,select:Hb,selectAll:Vb,selectChild:Ut.selectChild,selectChildren:Ut.selectChildren,filter:Lb,merge:Mb,selection:qb,transition:aC,call:Ut.call,nodes:Ut.nodes,node:Ut.node,size:Ut.size,empty:Ut.empty,each:Ut.each,on:Ub,attr:_b,attrTween:bb,style:Jb,styleTween:eC,text:rC,textTween:oC,remove:Fb,tween:hb,delay:Nb,duration:Rb,ease:Ob,easeVarying:jb,end:lC,[Symbol.iterator]:Ut[Symbol.iterator]};function cC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dC={time:null,delay:0,duration:250,ease:cC};function fC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hC(e){var t,n;e instanceof Qt?(t=e._id,e=e._name):(t=yy(),(n=dC).time=id(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&Ba(l,e,t,u,o,n||fC(l,t));return new Qt(r,this._parents,e,t)}Ts.prototype.interrupt=cb;Ts.prototype.transition=hC;const co=e=>()=>e;function pC(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function qt(e,t,n){this.k=e,this.x=t,this.y=n}qt.prototype={constructor:qt,scale:function(e){return e===1?this:new qt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fa=new qt(1,0,0);vy.prototype=qt.prototype;function vy(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Fa;return e.__zoom}function jl(e){e.stopImmediatePropagation()}function xi(e){e.preventDefault(),e.stopImmediatePropagation()}function gC(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function mC(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function bh(){return this.__zoom||Fa}function yC(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function vC(){return navigator.maxTouchPoints||"ontouchstart"in this}function wC(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function wy(){var e=gC,t=mC,n=wC,r=yC,i=vC,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ao,u=Da("start","zoom","end"),c,d,f,p=500,m=150,v=0,_=10;function g(S){S.property("__zoom",bh).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",T).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(S,I,R,M){var b=S.selection?S.selection():S;b.property("__zoom",bh),S!==b?k(S,I,R,M):b.interrupt().each(function(){x(this,arguments).event(M).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},g.scaleBy=function(S,I,R,M){g.scaleTo(S,function(){var b=this.__zoom.k,C=typeof I=="function"?I.apply(this,arguments):I;return b*C},R,M)},g.scaleTo=function(S,I,R,M){g.transform(S,function(){var b=t.apply(this,arguments),C=this.__zoom,j=R==null?w(b):typeof R=="function"?R.apply(this,arguments):R,z=C.invert(j),U=typeof I=="function"?I.apply(this,arguments):I;return n(h(y(C,U),j,z),b,o)},R,M)},g.translateBy=function(S,I,R,M){g.transform(S,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),o)},null,M)},g.translateTo=function(S,I,R,M,b){g.transform(S,function(){var C=t.apply(this,arguments),j=this.__zoom,z=M==null?w(C):typeof M=="function"?M.apply(this,arguments):M;return n(Fa.translate(z[0],z[1]).scale(j.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof R=="function"?-R.apply(this,arguments):-R),C,o)},M,b)};function y(S,I){return I=Math.max(s[0],Math.min(s[1],I)),I===S.k?S:new qt(I,S.x,S.y)}function h(S,I,R){var M=I[0]-R[0]*S.k,b=I[1]-R[1]*S.k;return M===S.x&&b===S.y?S:new qt(S.k,M,b)}function w(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function k(S,I,R,M){S.on("start.zoom",function(){x(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(M).end()}).tween("zoom",function(){var b=this,C=arguments,j=x(b,C).event(M),z=t.apply(b,C),U=R==null?w(z):typeof R=="function"?R.apply(b,C):R,H=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),V=b.__zoom,G=typeof I=="function"?I.apply(b,C):I,Y=l(V.invert(U).concat(H/V.k),G.invert(U).concat(H/G.k));return function(X){if(X===1)X=G;else{var F=Y(X),J=H/F[2];X=new qt(J,U[0]-F[0]*J,U[1]-F[1]*J)}j.zoom(null,X)}})}function x(S,I,R){return!R&&S.__zooming||new E(S,I)}function E(S,I){this.that=S,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,I),this.taps=0}E.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,I){return this.mouse&&S!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var I=nt(this.that).datum();u.call(S,this.that,new pC(S,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:u}),I)}};function N(S,...I){if(!e.apply(this,arguments))return;var R=x(this,I).event(S),M=this.__zoom,b=Math.max(s[0],Math.min(s[1],M.k*Math.pow(2,r.apply(this,arguments)))),C=xt(S);if(R.wheel)(R.mouse[0][0]!==C[0]||R.mouse[0][1]!==C[1])&&(R.mouse[1]=M.invert(R.mouse[0]=C)),clearTimeout(R.wheel);else{if(M.k===b)return;R.mouse=[C,M.invert(C)],Oo(this),R.start()}xi(S),R.wheel=setTimeout(j,m),R.zoom("mouse",n(h(y(M,b),R.mouse[0],R.mouse[1]),R.extent,o));function j(){R.wheel=null,R.end()}}function O(S,...I){if(f||!e.apply(this,arguments))return;var R=S.currentTarget,M=x(this,I,!0).event(S),b=nt(S.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",H,!0),C=xt(S,R),j=S.clientX,z=S.clientY;ny(S.view),jl(S),M.mouse=[C,this.__zoom.invert(C)],Oo(this),M.start();function U(V){if(xi(V),!M.moved){var G=V.clientX-j,Y=V.clientY-z;M.moved=G*G+Y*Y>v}M.event(V).zoom("mouse",n(h(M.that.__zoom,M.mouse[0]=xt(V,R),M.mouse[1]),M.extent,o))}function H(V){b.on("mousemove.zoom mouseup.zoom",null),ry(V.view,M.moved),xi(V),M.event(V).end()}}function $(S,...I){if(e.apply(this,arguments)){var R=this.__zoom,M=xt(S.changedTouches?S.changedTouches[0]:S,this),b=R.invert(M),C=R.k*(S.shiftKey?.5:2),j=n(h(y(R,C),M,b),t.apply(this,I),o);xi(S),a>0?nt(this).transition().duration(a).call(k,j,M,S):nt(this).call(g.transform,j,M,S)}}function T(S,...I){if(e.apply(this,arguments)){var R=S.touches,M=R.length,b=x(this,I,S.changedTouches.length===M).event(S),C,j,z,U;for(jl(S),j=0;j<M;++j)z=R[j],U=xt(z,this),U=[U,this.__zoom.invert(U),z.identifier],b.touch0?!b.touch1&&b.touch0[2]!==U[2]&&(b.touch1=U,b.taps=0):(b.touch0=U,C=!0,b.taps=1+!!c);c&&(c=clearTimeout(c)),C&&(b.taps<2&&(d=U[0],c=setTimeout(function(){c=null},p)),Oo(this),b.start())}}function P(S,...I){if(this.__zooming){var R=x(this,I).event(S),M=S.changedTouches,b=M.length,C,j,z,U;for(xi(S),C=0;C<b;++C)j=M[C],z=xt(j,this),R.touch0&&R.touch0[2]===j.identifier?R.touch0[0]=z:R.touch1&&R.touch1[2]===j.identifier&&(R.touch1[0]=z);if(j=R.that.__zoom,R.touch1){var H=R.touch0[0],V=R.touch0[1],G=R.touch1[0],Y=R.touch1[1],X=(X=G[0]-H[0])*X+(X=G[1]-H[1])*X,F=(F=Y[0]-V[0])*F+(F=Y[1]-V[1])*F;j=y(j,Math.sqrt(X/F)),z=[(H[0]+G[0])/2,(H[1]+G[1])/2],U=[(V[0]+Y[0])/2,(V[1]+Y[1])/2]}else if(R.touch0)z=R.touch0[0],U=R.touch0[1];else return;R.zoom("touch",n(h(j,z,U),R.extent,o))}}function D(S,...I){if(this.__zooming){var R=x(this,I).event(S),M=S.changedTouches,b=M.length,C,j;for(jl(S),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),C=0;C<b;++C)j=M[C],R.touch0&&R.touch0[2]===j.identifier?delete R.touch0:R.touch1&&R.touch1[2]===j.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(j=xt(j,this),Math.hypot(d[0]-j[0],d[1]-j[1])<_)){var z=nt(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return g.wheelDelta=function(S){return arguments.length?(r=typeof S=="function"?S:co(+S),g):r},g.filter=function(S){return arguments.length?(e=typeof S=="function"?S:co(!!S),g):e},g.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:co(!!S),g):i},g.extent=function(S){return arguments.length?(t=typeof S=="function"?S:co([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),g):t},g.scaleExtent=function(S){return arguments.length?(s[0]=+S[0],s[1]=+S[1],g):[s[0],s[1]]},g.translateExtent=function(S){return arguments.length?(o[0][0]=+S[0][0],o[1][0]=+S[1][0],o[0][1]=+S[0][1],o[1][1]=+S[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(S){return arguments.length?(n=S,g):n},g.duration=function(S){return arguments.length?(a=+S,g):a},g.interpolate=function(S){return arguments.length?(l=S,g):l},g.on=function(){var S=u.on.apply(u,arguments);return S===u?g:S},g.clickDistance=function(S){return arguments.length?(v=(S=+S)*S,g):Math.sqrt(v)},g.tapDistance=function(S){return arguments.length?(_=+S,g):_},g}const Mt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ms=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],_y=["Enter"," ","Escape"],xy={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Jr;(function(e){e.Strict="strict",e.Loose="loose"})(Jr||(Jr={}));var Kn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Kn||(Kn={}));var ys;(function(e){e.Partial="partial",e.Full="full"})(ys||(ys={}));const Sy={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var hn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(hn||(hn={}));var pa;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(pa||(pa={}));var K;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(K||(K={}));const Ch={[K.Left]:K.Right,[K.Right]:K.Left,[K.Top]:K.Bottom,[K.Bottom]:K.Top};function ky(e){return e===null?null:e?"valid":"invalid"}const Ey=e=>"id"in e&&"source"in e&&"target"in e,_C=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ad=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ps=(e,t=[0,0])=>{const{width:n,height:r}=tn(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},xC=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):ad(i)?i:t.nodeLookup.get(i.id));const a=o?ga(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ha(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Va(n)},As=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=Ha(n,ga(i)),r=!0)}),r?Va(n):{x:0,y:0,width:0,height:0}},ld=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...Is(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const u of e.values()){const{measured:c,selectable:d=!0,hidden:f=!1}=u;if(o&&!d||f)continue;const p=c.width??u.width??u.initialWidth??null,m=c.height??u.height??u.initialHeight??null,v=vs(a,Zr(u)),_=(p??0)*(m??0),g=s&&v>0;(!u.internals.handleBounds||g||v>=_||u.dragging)&&l.push(u)}return l},SC=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function kC(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function EC({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const a=kC(e,o),l=As(a),u=ud(l,t,n,(o==null?void 0:o.minZoom)??i,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await r.setViewport(u,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)}function by({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},c=o.origin??r;let d=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!a)s==null||s("005",Mt.error005());else{const p=a.measured.width,m=a.measured.height;p&&m&&(d=[[l,u],[l+p,u+m]])}else a&&ei(o.extent)&&(d=[[o.extent[0][0]+l,o.extent[0][1]+u],[o.extent[1][0]+l,o.extent[1][1]+u]]);const f=ei(d)?tr(t,d,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(s==null||s("015",Mt.error015())),{position:{x:f.x-l+(o.measured.width??0)*c[0],y:f.y-u+(o.measured.height??0)*c[1]},positionAbsolute:f}}async function bC({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(f=>f.id)),o=[];for(const f of n){if(f.deletable===!1)continue;const p=s.has(f.id),m=!p&&f.parentId&&o.find(v=>v.id===f.parentId);(p||m)&&o.push(f)}const a=new Set(t.map(f=>f.id)),l=r.filter(f=>f.deletable!==!1),c=SC(o,l);for(const f of l)a.has(f.id)&&!c.find(m=>m.id===f.id)&&c.push(f);if(!i)return{edges:c,nodes:o};const d=await i({nodes:o,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:o}:{edges:[],nodes:[]}:d}const Qr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),tr=(e={x:0,y:0},t,n)=>({x:Qr(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Qr(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Cy(e,t,n){const{width:r,height:i}=tn(n),{x:s,y:o}=n.internals.positionAbsolute;return tr(e,[[s,o],[s+r,o+i]],t)}const Th=(e,t,n)=>e<t?Qr(Math.abs(e-t),1,t)/t:e>n?-Qr(Math.abs(e-n),1,t)/t:0,Ty=(e,t,n=15,r=40)=>{const i=Th(e.x,r,t.width-r)*n,s=Th(e.y,r,t.height-r)*n;return[i,s]},Ha=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Qu=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Va=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Zr=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=ad(e)?e.internals.positionAbsolute:Ps(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},ga=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=ad(e)?e.internals.positionAbsolute:Ps(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},Ny=(e,t)=>Va(Ha(Qu(e),Qu(t))),vs=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Nh=e=>Et(e.width)&&Et(e.height)&&Et(e.x)&&Et(e.y),Et=e=>!isNaN(e)&&isFinite(e),CC=(e,t)=>{},Rs=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Is=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return s?Rs(a,o):a},ma=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function pr(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function TC(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=pr(e,n),i=pr(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=pr(e.top??e.y??0,n),i=pr(e.bottom??e.y??0,n),s=pr(e.left??e.x??0,t),o=pr(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function NC(e,t,n,r,i,s){const{x:o,y:a}=ma(e,[t,n,r]),{x:l,y:u}=ma({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,d=s-u;return{left:Math.floor(o),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}const ud=(e,t,n,r,i,s)=>{const o=TC(s,t,n),a=(t-o.x)/e.width,l=(n-o.y)/e.height,u=Math.min(a,l),c=Qr(u,r,i),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*c,m=n/2-f*c,v=NC(e,p,m,c,t,n),_={left:Math.min(v.left-o.left,0),top:Math.min(v.top-o.top,0),right:Math.min(v.right-o.right,0),bottom:Math.min(v.bottom-o.bottom,0)};return{x:p-_.left+_.right,y:m-_.top+_.bottom,zoom:c}},ws=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ei(e){return e!=null&&e!=="parent"}function tn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Py(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Ay(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function Ph(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function PC(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function AC(e){return{...xy,...e||{}}}function Bi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=bt(e),a=Is({x:s-((i==null?void 0:i.left)??0),y:o-((i==null?void 0:i.top)??0)},r),{x:l,y:u}=n?Rs(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const cd=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ry=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},RC=["INPUT","SELECT","TEXTAREA"];function Iy(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:RC.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Oy=e=>"clientX"in e,bt=(e,t)=>{var s,o;const n=Oy(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Ah=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...cd(o)}})};function $y({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=e*.125+i*.375+o*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function fo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Rh({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case K.Left:return[t-fo(t-r,s),n];case K.Right:return[t+fo(r-t,s),n];case K.Top:return[t,n-fo(n-i,s)];case K.Bottom:return[t,n+fo(i-n,s)]}}function jy({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:i,targetPosition:s=K.Top,curvature:o=.25}){const[a,l]=Rh({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[u,c]=Rh({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,f,p,m]=$y({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${r},${i}`,d,f,p,m]}function Ly({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function IC({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:s="basic"}){if(s==="manual")return r;const o=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return o+a}function OC({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=Ha(ga(e),ga(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return vs(o,Va(s))>0}const $C=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,jC=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),LC=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||$C;let i;return Ey(e)?i={...e}:i={...e,id:r(e)},jC(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function My({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=Ly({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const Ih={[K.Left]:{x:-1,y:0},[K.Right]:{x:1,y:0},[K.Top]:{x:0,y:-1},[K.Bottom]:{x:0,y:1}},MC=({source:e,sourcePosition:t=K.Bottom,target:n})=>t===K.Left||t===K.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Oh=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function DC({source:e,sourcePosition:t=K.Bottom,target:n,targetPosition:r=K.Top,center:i,offset:s,stepPosition:o}){const a=Ih[t],l=Ih[r],u={x:e.x+a.x*s,y:e.y+a.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},d=MC({source:u,sourcePosition:t,target:c}),f=d.x!==0?"x":"y",p=d[f];let m=[],v,_;const g={x:0,y:0},y={x:0,y:0},[,,h,w]=Ly({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*l[f]===-1){f==="x"?(v=i.x??u.x+(c.x-u.x)*o,_=i.y??(u.y+c.y)/2):(v=i.x??(u.x+c.x)/2,_=i.y??u.y+(c.y-u.y)*o);const x=[{x:v,y:u.y},{x:v,y:c.y}],E=[{x:u.x,y:_},{x:c.x,y:_}];a[f]===p?m=f==="x"?x:E:m=f==="x"?E:x}else{const x=[{x:u.x,y:c.y}],E=[{x:c.x,y:u.y}];if(f==="x"?m=a.x===p?E:x:m=a.y===p?x:E,t===r){const P=Math.abs(e[f]-n[f]);if(P<=s){const D=Math.min(s-1,s-P);a[f]===p?g[f]=(u[f]>e[f]?-1:1)*D:y[f]=(c[f]>n[f]?-1:1)*D}}if(t!==r){const P=f==="x"?"y":"x",D=a[f]===l[P],S=u[P]>c[P],I=u[P]<c[P];(a[f]===1&&(!D&&S||D&&I)||a[f]!==1&&(!D&&I||D&&S))&&(m=f==="x"?x:E)}const N={x:u.x+g.x,y:u.y+g.y},O={x:c.x+y.x,y:c.y+y.y},$=Math.max(Math.abs(N.x-m[0].x),Math.abs(O.x-m[0].x)),T=Math.max(Math.abs(N.y-m[0].y),Math.abs(O.y-m[0].y));$>=T?(v=(N.x+O.x)/2,_=m[0].y):(v=m[0].x,_=(N.y+O.y)/2)}return[[e,{x:u.x+g.x,y:u.y+g.y},...m,{x:c.x+y.x,y:c.y+y.y},n],v,_,h,w]}function zC(e,t,n,r){const i=Math.min(Oh(e,t)/2,Oh(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function Zu({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:i,targetPosition:s=K.Top,borderRadius:o=5,centerX:a,centerY:l,offset:u=20,stepPosition:c=.5}){const[d,f,p,m,v]=DC({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:u,stepPosition:c});return[d.reduce((g,y,h)=>{let w="";return h>0&&h<d.length-1?w=zC(d[h-1],y,d[h+1],o):w=`${h===0?"M":"L"}${y.x} ${y.y}`,g+=w,g},""),f,p,m,v]}function $h(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function UC(e){var d;const{sourceNode:t,targetNode:n}=e;if(!$h(t)||!$h(n))return null;const r=t.internals.handleBounds||jh(t.handles),i=n.internals.handleBounds||jh(n.handles),s=Lh((r==null?void 0:r.source)??[],e.sourceHandle),o=Lh(e.connectionMode===Jr.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!s||!o)return(d=e.onError)==null||d.call(e,"008",Mt.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(s==null?void 0:s.position)||K.Bottom,l=(o==null?void 0:o.position)||K.Top,u=nr(t,s,a),c=nr(n,o,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function jh(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function nr(e,t,n=K.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??tn(e);if(r)return{x:i+o/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case K.Top:return{x:i+o/2,y:s};case K.Right:return{x:i+o,y:s+a/2};case K.Bottom:return{x:i+o/2,y:s+a};case K.Left:return{x:i,y:s+a/2}}}function Lh(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function ec(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function BC(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=ec(l,t);s.has(u)||(o.push({id:u,color:l.color||n,...l}),s.add(u))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const Dy=1e3,FC=10,dd={nodeOrigin:[0,0],nodeExtent:ms,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},HC={...dd,checkEquality:!0};function fd(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function VC(e,t,n){const r=fd(dd,n);for(const i of e.values())if(i.parentId)pd(i,e,t,r);else{const s=Ps(i,r.nodeOrigin),o=ei(i.extent)?i.extent:r.nodeExtent,a=tr(s,o,tn(i));i.internals.positionAbsolute=a}}function WC(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const s={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(s):i.type==="target"&&r.push(s)}return{source:n,target:r}}function hd(e){return e==="manual"}function tc(e,t,n,r={}){var u,c;const i=fd(HC,r),s={i:0},o=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!hd(i.zIndexMode)?Dy:0;let l=e.length>0;t.clear(),n.clear();for(const d of e){let f=o.get(d.id);if(i.checkEquality&&d===(f==null?void 0:f.internals.userNode))t.set(d.id,f);else{const p=Ps(d,i.nodeOrigin),m=ei(d.extent)?d.extent:i.nodeExtent,v=tr(p,m,tn(d));f={...i.defaults,...d,measured:{width:(u=d.measured)==null?void 0:u.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:v,handleBounds:WC(d,f),z:zy(d,a,i.zIndexMode),userNode:d}},t.set(d.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(l=!1),d.parentId&&pd(f,t,n,r,s)}return l}function qC(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function pd(e,t,n,r,i){const{elevateNodesOnSelect:s,nodeOrigin:o,nodeExtent:a,zIndexMode:l}=fd(dd,r),u=e.parentId,c=t.get(u);if(!c){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}qC(e,n),i&&!c.parentId&&c.internals.rootParentIndex===void 0&&l==="auto"&&(c.internals.rootParentIndex=++i.i,c.internals.z=c.internals.z+i.i*FC),i&&c.internals.rootParentIndex!==void 0&&(i.i=c.internals.rootParentIndex);const d=s&&!hd(l)?Dy:0,{x:f,y:p,z:m}=KC(e,c,o,a,d,l),{positionAbsolute:v}=e.internals,_=f!==v.x||p!==v.y;(_||m!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:_?{x:f,y:p}:v,z:m}})}function zy(e,t,n){const r=Et(e.zIndex)?e.zIndex:0;return hd(n)?r:r+(e.selected?t:0)}function KC(e,t,n,r,i,s){const{x:o,y:a}=t.internals.positionAbsolute,l=tn(e),u=Ps(e,n),c=ei(e.extent)?tr(u,e.extent,l):u;let d=tr({x:o+c.x,y:a+c.y},r,l);e.extent==="parent"&&(d=Cy(d,l,t));const f=zy(e,i,s),p=t.internals.z??0;return{x:d.x,y:d.y,z:p>=f?p+1:f}}function gd(e,t,n,r=[0,0]){var o;const i=[],s=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const u=((o=s.get(a.parentId))==null?void 0:o.expandedRect)??Zr(l),c=Ny(u,a.rect);s.set(a.parentId,{expandedRect:c,parent:l})}return s.size>0&&s.forEach(({expandedRect:a,parent:l},u)=>{var h;const c=l.internals.positionAbsolute,d=tn(l),f=l.origin??r,p=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,m=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,v=Math.max(d.width,Math.round(a.width)),_=Math.max(d.height,Math.round(a.height)),g=(v-d.width)*f[0],y=(_-d.height)*f[1];(p>0||m>0||g||y)&&(i.push({id:u,type:"position",position:{x:l.position.x-p+g,y:l.position.y-m+y}}),(h=n.get(u))==null||h.forEach(w=>{e.some(k=>k.id===w.id)||i.push({id:w.id,type:"position",position:{x:w.position.x+p,y:w.position.y+m}})})),(d.width<a.width||d.height<a.height||p||m)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:v+(p?f[0]*p-g:0),height:_+(m?f[1]*m-y:0)}})}),i}function GC(e,t,n,r,i,s,o){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const u=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const p of e.values()){const m=t.get(p.id);if(!m)continue;if(m.hidden){t.set(m.id,{...m,internals:{...m.internals,handleBounds:void 0}}),l=!0;continue}const v=cd(p.nodeElement),_=m.measured.width!==v.width||m.measured.height!==v.height;if(!!(v.width&&v.height&&(_||!m.internals.handleBounds||p.force))){const y=p.nodeElement.getBoundingClientRect(),h=ei(m.extent)?m.extent:s;let{positionAbsolute:w}=m.internals;m.parentId&&m.extent==="parent"?w=Cy(w,v,t.get(m.parentId)):h&&(w=tr(w,h,v));const k={...m,measured:v,internals:{...m.internals,positionAbsolute:w,handleBounds:{source:Ah("source",p.nodeElement,y,d,m.id),target:Ah("target",p.nodeElement,y,d,m.id)}}};t.set(m.id,k),m.parentId&&pd(k,t,n,{nodeOrigin:i,zIndexMode:o}),l=!0,_&&(u.push({id:m.id,type:"dimensions",dimensions:v}),m.expandParent&&m.parentId&&f.push({id:m.id,parentId:m.parentId,rect:Zr(k,i)}))}}if(f.length>0){const p=gd(f,t,n,i);u.push(...p)}return{changes:u,updatedInternals:l}}async function YC({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function Mh(e,t,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${i}-${e}`;const l=r.get(o)||new Map;if(r.set(o,l.set(n,t)),s){o=`${i}-${e}-${s}`;const u=r.get(o)||new Map;r.set(o,u.set(n,t))}}function Uy(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},u=`${i}-${o}--${s}-${a}`,c=`${s}-${a}--${i}-${o}`;Mh("source",l,c,e,i,o),Mh("target",l,u,e,s,a),t.set(r.id,r)}}function By(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:By(n,t):!1}function Dh(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function XC(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!By(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Ll({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,a,l;const i=[];for(const[u,c]of t){const d=(o=n.get(u))==null?void 0:o.internals.userNode;d&&i.push({...d,position:c.position,dragging:r})}if(!e)return[i[0],i];const s=(a=n.get(e))==null?void 0:a.internals.userNode;return[s?{...s,position:((l=t.get(e))==null?void 0:l.position)||s.position,dragging:r}:i[0],i]}function JC({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Rs(s,t);return{x:o.x-s.x,y:o.y-s.y}}function QC({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,l=!1,u={x:0,y:0},c=null,d=!1,f=null,p=!1,m=!1,v=null;function _({noDragClassName:y,handleSelector:h,domNode:w,isSelectable:k,nodeId:x,nodeClickDistance:E=0}){f=nt(w);function N({x:P,y:D}){const{nodeLookup:S,nodeExtent:I,snapGrid:R,snapToGrid:M,nodeOrigin:b,onNodeDrag:C,onSelectionDrag:j,onError:z,updateNodePositions:U}=t();s={x:P,y:D};let H=!1;const V=a.size>1,G=V&&I?Qu(As(a)):null,Y=V&&M?JC({dragItems:a,snapGrid:R,x:P,y:D}):null;for(const[X,F]of a){if(!S.has(X))continue;let J={x:P-F.distance.x,y:D-F.distance.y};M&&(J=Y?{x:Math.round(J.x+Y.x),y:Math.round(J.y+Y.y)}:Rs(J,R));let re=null;if(V&&I&&!F.extent&&G){const{positionAbsolute:Z}=F.internals,le=Z.x-G.x+I[0][0],fe=Z.x+F.measured.width-G.x2+I[1][0],ae=Z.y-G.y+I[0][1],De=Z.y+F.measured.height-G.y2+I[1][1];re=[[le,ae],[fe,De]]}const{position:ne,positionAbsolute:te}=by({nodeId:X,nextPosition:J,nodeLookup:S,nodeExtent:re||I,nodeOrigin:b,onError:z});H=H||F.position.x!==ne.x||F.position.y!==ne.y,F.position=ne,F.internals.positionAbsolute=te}if(m=m||H,!!H&&(U(a,!0),v&&(r||C||!x&&j))){const[X,F]=Ll({nodeId:x,dragItems:a,nodeLookup:S});r==null||r(v,a,X,F),C==null||C(v,X,F),x||j==null||j(v,F)}}async function O(){if(!c)return;const{transform:P,panBy:D,autoPanSpeed:S,autoPanOnNodeDrag:I}=t();if(!I){l=!1,cancelAnimationFrame(o);return}const[R,M]=Ty(u,c,S);(R!==0||M!==0)&&(s.x=(s.x??0)-R/P[2],s.y=(s.y??0)-M/P[2],await D({x:R,y:M})&&N(s)),o=requestAnimationFrame(O)}function $(P){var V;const{nodeLookup:D,multiSelectionActive:S,nodesDraggable:I,transform:R,snapGrid:M,snapToGrid:b,selectNodesOnDrag:C,onNodeDragStart:j,onSelectionDragStart:z,unselectNodesAndEdges:U}=t();d=!0,(!C||!k)&&!S&&x&&((V=D.get(x))!=null&&V.selected||U()),k&&C&&x&&(e==null||e(x));const H=Bi(P.sourceEvent,{transform:R,snapGrid:M,snapToGrid:b,containerBounds:c});if(s=H,a=XC(D,I,H,x),a.size>0&&(n||j||!x&&z)){const[G,Y]=Ll({nodeId:x,dragItems:a,nodeLookup:D});n==null||n(P.sourceEvent,a,G,Y),j==null||j(P.sourceEvent,G,Y),x||z==null||z(P.sourceEvent,Y)}}const T=iy().clickDistance(E).on("start",P=>{const{domNode:D,nodeDragThreshold:S,transform:I,snapGrid:R,snapToGrid:M}=t();c=(D==null?void 0:D.getBoundingClientRect())||null,p=!1,m=!1,v=P.sourceEvent,S===0&&$(P),s=Bi(P.sourceEvent,{transform:I,snapGrid:R,snapToGrid:M,containerBounds:c}),u=bt(P.sourceEvent,c)}).on("drag",P=>{const{autoPanOnNodeDrag:D,transform:S,snapGrid:I,snapToGrid:R,nodeDragThreshold:M,nodeLookup:b}=t(),C=Bi(P.sourceEvent,{transform:S,snapGrid:I,snapToGrid:R,containerBounds:c});if(v=P.sourceEvent,(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||x&&!b.has(x))&&(p=!0),!p){if(!l&&D&&d&&(l=!0,O()),!d){const j=bt(P.sourceEvent,c),z=j.x-u.x,U=j.y-u.y;Math.sqrt(z*z+U*U)>M&&$(P)}(s.x!==C.xSnapped||s.y!==C.ySnapped)&&a&&d&&(u=bt(P.sourceEvent,c),N(C))}}).on("end",P=>{if(!(!d||p)&&(l=!1,d=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:D,updateNodePositions:S,onNodeDragStop:I,onSelectionDragStop:R}=t();if(m&&(S(a,!1),m=!1),i||I||!x&&R){const[M,b]=Ll({nodeId:x,dragItems:a,nodeLookup:D,dragging:!1});i==null||i(P.sourceEvent,a,M,b),I==null||I(P.sourceEvent,M,b),x||R==null||R(P.sourceEvent,b)}}}).filter(P=>{const D=P.target;return!P.button&&(!y||!Dh(D,`.${y}`,w))&&(!h||Dh(D,h,w))});f.call(T)}function g(){f==null||f.on(".drag",null)}return{update:_,destroy:g}}function ZC(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())vs(i,Zr(s))>0&&r.push(s);return r}const eT=250;function tT(e,t,n,r){var a,l;let i=[],s=1/0;const o=ZC(e,n,t+eT);for(const u of o){const c=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((l=u.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=nr(u,d,d.position,!0),m=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));m>t||(m<s?(i=[{...d,x:f,y:p}],s=m):m===s&&i.push({...d,x:f,y:p}))}}if(!i.length)return null;if(i.length>1){const u=r.type==="source"?"target":"source";return i.find(c=>c.type===u)??i[0]}return i[0]}function Fy(e,t,n,r,i,s=!1){var u,c,d;const o=r.get(e);if(!o)return null;const a=i==="strict"?(u=o.internals.handleBounds)==null?void 0:u[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((d=o.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return l&&s?{...l,...nr(o,l,l.position,!0)}:l}function Hy(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function nT(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Vy=()=>!0;function rT(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:p,onConnectStart:m,onConnect:v,onConnectEnd:_,isValidConnection:g=Vy,onReconnectEnd:y,updateConnection:h,getTransform:w,getFromHandle:k,autoPanSpeed:x,dragThreshold:E=1,handleDomNode:N}){const O=Ry(e.target);let $=0,T;const{x:P,y:D}=bt(e),S=Hy(s,N),I=a==null?void 0:a.getBoundingClientRect();let R=!1;if(!I||!S)return;const M=Fy(i,S,r,l,t);if(!M)return;let b=bt(e,I),C=!1,j=null,z=!1,U=null;function H(){if(!c||!I)return;const[ne,te]=Ty(b,I,x);f({x:ne,y:te}),$=requestAnimationFrame(H)}const V={...M,nodeId:i,type:S,position:M.position},G=l.get(i);let X={inProgress:!0,isValid:null,from:nr(G,V,K.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:G,to:b,toHandle:null,toPosition:Ch[V.position],toNode:null,pointer:b};function F(){R=!0,h(X),m==null||m(e,{nodeId:i,handleId:r,handleType:S})}E===0&&F();function J(ne){if(!R){const{x:De,y:nn}=bt(ne),zt=De-P,An=nn-D;if(!(zt*zt+An*An>E*E))return;F()}if(!k()||!V){re(ne);return}const te=w();b=bt(ne,I),T=tT(Is(b,te,!1,[1,1]),n,l,V),C||(H(),C=!0);const Z=Wy(ne,{handle:T,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:g,doc:O,lib:u,flowId:d,nodeLookup:l});U=Z.handleDomNode,j=Z.connection,z=nT(!!T,Z.isValid);const le=l.get(i),fe=le?nr(le,V,K.Left,!0):X.from,ae={...X,from:fe,isValid:z,to:Z.toHandle&&z?ma({x:Z.toHandle.x,y:Z.toHandle.y},te):b,toHandle:Z.toHandle,toPosition:z&&Z.toHandle?Z.toHandle.position:Ch[V.position],toNode:Z.toHandle?l.get(Z.toHandle.nodeId):null,pointer:b};h(ae),X=ae}function re(ne){if(!("touches"in ne&&ne.touches.length>0)){if(R){(T||U)&&j&&z&&(v==null||v(j));const{inProgress:te,...Z}=X,le={...Z,toPosition:X.toHandle?X.toPosition:null};_==null||_(ne,le),s&&(y==null||y(ne,le))}p(),cancelAnimationFrame($),C=!1,z=!1,j=null,U=null,O.removeEventListener("mousemove",J),O.removeEventListener("mouseup",re),O.removeEventListener("touchmove",J),O.removeEventListener("touchend",re)}}O.addEventListener("mousemove",J),O.addEventListener("mouseup",re),O.addEventListener("touchmove",J),O.addEventListener("touchend",re)}function Wy(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:l,isValidConnection:u=Vy,nodeLookup:c}){const d=s==="target",f=t?o.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y:m}=bt(e),v=o.elementFromPoint(p,m),_=v!=null&&v.classList.contains(`${a}-flow__handle`)?v:f,g={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const y=Hy(void 0,_),h=_.getAttribute("data-nodeid"),w=_.getAttribute("data-handleid"),k=_.classList.contains("connectable"),x=_.classList.contains("connectableend");if(!h||!y)return g;const E={source:d?h:r,sourceHandle:d?w:i,target:d?r:h,targetHandle:d?i:w};g.connection=E;const O=k&&x&&(n===Jr.Strict?d&&y==="source"||!d&&y==="target":h!==r||w!==i);g.isValid=O&&u(E),g.toHandle=Fy(h,y,w,c,n,!0)}return g}const nc={onPointerDown:rT,isValid:Wy};function iT({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=nt(e);function s({translateExtent:a,width:l,height:u,zoomStep:c=1,pannable:d=!0,zoomable:f=!0,inversePan:p=!1}){const m=h=>{if(h.sourceEvent.type!=="wheel"||!t)return;const w=n(),k=h.sourceEvent.ctrlKey&&ws()?10:1,x=-h.sourceEvent.deltaY*(h.sourceEvent.deltaMode===1?.05:h.sourceEvent.deltaMode?1:.002)*c,E=w[2]*Math.pow(2,x*k);t.scaleTo(E)};let v=[0,0];const _=h=>{(h.sourceEvent.type==="mousedown"||h.sourceEvent.type==="touchstart")&&(v=[h.sourceEvent.clientX??h.sourceEvent.touches[0].clientX,h.sourceEvent.clientY??h.sourceEvent.touches[0].clientY])},g=h=>{const w=n();if(h.sourceEvent.type!=="mousemove"&&h.sourceEvent.type!=="touchmove"||!t)return;const k=[h.sourceEvent.clientX??h.sourceEvent.touches[0].clientX,h.sourceEvent.clientY??h.sourceEvent.touches[0].clientY],x=[k[0]-v[0],k[1]-v[1]];v=k;const E=r()*Math.max(w[2],Math.log(w[2]))*(p?-1:1),N={x:w[0]-x[0]*E,y:w[1]-x[1]*E},O=[[0,0],[l,u]];t.setViewportConstrained({x:N.x,y:N.y,zoom:w[2]},O,a)},y=wy().on("start",_).on("zoom",d?g:null).on("zoom.wheel",f?m:null);i.call(y,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:xt}}const Wa=e=>({x:e.x,y:e.y,zoom:e.k}),Ml=({x:e,y:t,zoom:n})=>Fa.translate(e,t).scale(n),Rr=(e,t)=>e.target.closest(`.${t}`),qy=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),sT=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Dl=(e,t=0,n=sT,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},Ky=e=>{const t=e.ctrlKey&&ws()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function oT({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(Rr(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&o){const _=xt(c),g=Ky(c),y=d*Math.pow(2,g);r.scaleTo(n,y,_,c);return}const f=c.deltaMode===1?20:1;let p=i===Kn.Vertical?0:c.deltaX*f,m=i===Kn.Horizontal?0:c.deltaY*f;!ws()&&c.shiftKey&&i!==Kn.Vertical&&(p=c.deltaY*f,m=0),r.translateBy(n,-(p/d)*s,-(m/d)*s,{internal:!0});const v=Wa(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l==null||l(c,v),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,v),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(c,v))}}function aT({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,a=Rr(r,e);if(r.ctrlKey&&s&&a&&r.preventDefault(),o||a)return null;r.preventDefault(),n.call(this,r,i)}}function lT({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var s,o,a;if((s=r.sourceEvent)!=null&&s.internal)return;const i=Wa(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function uT({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{var o,a;e.usedRightMouseButton=!!(n&&qy(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!((a=s.sourceEvent)!=null&&a.internal)&&(i==null||i(s.sourceEvent,Wa(s.transform)))}}function cT({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,s&&qy(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const l=Wa(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(o.sourceEvent,l)},n?150:0)}}}function dT({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:l,lib:u,connectionInProgress:c}){return d=>{var _;const f=e||t,p=n&&d.ctrlKey,m=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Rr(d,`${u}-flow__node`)||Rr(d,`${u}-flow__edge`)))return!0;if(!r&&!f&&!i&&!s&&!n||o||c&&!m||Rr(d,a)&&m||Rr(d,l)&&(!m||i&&m&&!e)||!n&&d.ctrlKey&&m)return!1;if(!n&&d.type==="touchstart"&&((_=d.touches)==null?void 0:_.length)>1)return d.preventDefault(),!1;if(!f&&!i&&!p&&m||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const v=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||m)&&v}}function fT({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),d=wy().scaleExtent([t,n]).translateExtent(r),f=nt(e).call(d);y({x:i.x,y:i.y,zoom:Qr(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const p=f.on("wheel.zoom"),m=f.on("dblclick.zoom");d.wheelDelta(Ky);function v(T,P){return f?new Promise(D=>{d==null||d.interpolate((P==null?void 0:P.interpolate)==="linear"?Ui:Ao).transform(Dl(f,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>D(!0)),T)}):Promise.resolve(!1)}function _({noWheelClassName:T,noPanClassName:P,onPaneContextMenu:D,userSelectionActive:S,panOnScroll:I,panOnDrag:R,panOnScrollMode:M,panOnScrollSpeed:b,preventScrolling:C,zoomOnPinch:j,zoomOnScroll:z,zoomOnDoubleClick:U,zoomActivationKeyPressed:H,lib:V,onTransformChange:G,connectionInProgress:Y,paneClickDistance:X,selectionOnDrag:F}){S&&!u.isZoomingOrPanning&&g();const J=I&&!H&&!S;d.clickDistance(F?1/0:!Et(X)||X<0?0:X);const re=J?oT({zoomPanValues:u,noWheelClassName:T,d3Selection:f,d3Zoom:d,panOnScrollMode:M,panOnScrollSpeed:b,zoomOnPinch:j,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a}):aT({noWheelClassName:T,preventScrolling:C,d3ZoomHandler:p});if(f.on("wheel.zoom",re,{passive:!1}),!S){const te=lT({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:o});d.on("start",te);const Z=uT({zoomPanValues:u,panOnDrag:R,onPaneContextMenu:!!D,onPanZoom:s,onTransformChange:G});d.on("zoom",Z);const le=cT({zoomPanValues:u,panOnDrag:R,panOnScroll:I,onPaneContextMenu:D,onPanZoomEnd:a,onDraggingChange:l});d.on("end",le)}const ne=dT({zoomActivationKeyPressed:H,panOnDrag:R,zoomOnScroll:z,panOnScroll:I,zoomOnDoubleClick:U,zoomOnPinch:j,userSelectionActive:S,noPanClassName:P,noWheelClassName:T,lib:V,connectionInProgress:Y});d.filter(ne),U?f.on("dblclick.zoom",m):f.on("dblclick.zoom",null)}function g(){d.on("zoom",null)}async function y(T,P,D){const S=Ml(T),I=d==null?void 0:d.constrain()(S,P,D);return I&&await v(I),new Promise(R=>R(I))}async function h(T,P){const D=Ml(T);return await v(D,P),new Promise(S=>S(D))}function w(T){if(f){const P=Ml(T),D=f.property("__zoom");(D.k!==T.zoom||D.x!==T.x||D.y!==T.y)&&(d==null||d.transform(f,P,null,{sync:!0}))}}function k(){const T=f?vy(f.node()):{x:0,y:0,k:1};return{x:T.x,y:T.y,zoom:T.k}}function x(T,P){return f?new Promise(D=>{d==null||d.interpolate((P==null?void 0:P.interpolate)==="linear"?Ui:Ao).scaleTo(Dl(f,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>D(!0)),T)}):Promise.resolve(!1)}function E(T,P){return f?new Promise(D=>{d==null||d.interpolate((P==null?void 0:P.interpolate)==="linear"?Ui:Ao).scaleBy(Dl(f,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>D(!0)),T)}):Promise.resolve(!1)}function N(T){d==null||d.scaleExtent(T)}function O(T){d==null||d.translateExtent(T)}function $(T){const P=!Et(T)||T<0?0:T;d==null||d.clickDistance(P)}return{update:_,destroy:g,setViewport:h,setViewportConstrained:y,getViewport:k,scaleTo:x,scaleBy:E,setScaleExtent:N,setTranslateExtent:O,syncViewport:w,setClickDistance:$}}var ti;(function(e){e.Line="line",e.Handle="handle"})(ti||(ti={}));function hT({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}function zh(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function sn(e,t){return Math.max(0,t-e)}function on(e,t){return Math.max(0,e-t)}function ho(e,t,n){return Math.max(0,t-e,e-n)}function Uh(e,t){return e?!t:t}function pT(e,t,n,r,i,s,o,a){let{affectsX:l,affectsY:u}=t;const{isHorizontal:c,isVertical:d}=t,f=c&&d,{xSnapped:p,ySnapped:m}=n,{minWidth:v,maxWidth:_,minHeight:g,maxHeight:y}=r,{x:h,y:w,width:k,height:x,aspectRatio:E}=e;let N=Math.floor(c?p-e.pointerX:0),O=Math.floor(d?m-e.pointerY:0);const $=k+(l?-N:N),T=x+(u?-O:O),P=-s[0]*k,D=-s[1]*x;let S=ho($,v,_),I=ho(T,g,y);if(o){let b=0,C=0;l&&N<0?b=sn(h+N+P,o[0][0]):!l&&N>0&&(b=on(h+$+P,o[1][0])),u&&O<0?C=sn(w+O+D,o[0][1]):!u&&O>0&&(C=on(w+T+D,o[1][1])),S=Math.max(S,b),I=Math.max(I,C)}if(a){let b=0,C=0;l&&N>0?b=on(h+N,a[0][0]):!l&&N<0&&(b=sn(h+$,a[1][0])),u&&O>0?C=on(w+O,a[0][1]):!u&&O<0&&(C=sn(w+T,a[1][1])),S=Math.max(S,b),I=Math.max(I,C)}if(i){if(c){const b=ho($/E,g,y)*E;if(S=Math.max(S,b),o){let C=0;!l&&!u||l&&!u&&f?C=on(w+D+$/E,o[1][1])*E:C=sn(w+D+(l?N:-N)/E,o[0][1])*E,S=Math.max(S,C)}if(a){let C=0;!l&&!u||l&&!u&&f?C=sn(w+$/E,a[1][1])*E:C=on(w+(l?N:-N)/E,a[0][1])*E,S=Math.max(S,C)}}if(d){const b=ho(T*E,v,_)/E;if(I=Math.max(I,b),o){let C=0;!l&&!u||u&&!l&&f?C=on(h+T*E+P,o[1][0])/E:C=sn(h+(u?O:-O)*E+P,o[0][0])/E,I=Math.max(I,C)}if(a){let C=0;!l&&!u||u&&!l&&f?C=sn(h+T*E,a[1][0])/E:C=on(h+(u?O:-O)*E,a[0][0])/E,I=Math.max(I,C)}}}O=O+(O<0?I:-I),N=N+(N<0?S:-S),i&&(f?$>T*E?O=(Uh(l,u)?-N:N)/E:N=(Uh(l,u)?-O:O)*E:c?(O=N/E,u=l):(N=O*E,l=u));const R=l?h+N:h,M=u?w+O:w;return{width:k+(l?-N:N),height:x+(u?-O:O),x:s[0]*N*(l?-1:1)+R,y:s[1]*O*(u?-1:1)+M}}const Gy={width:0,height:0,x:0,y:0},gT={...Gy,pointerX:0,pointerY:0,aspectRatio:1};function mT(e){return[[0,0],[e.measured.width,e.measured.height]]}function yT(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,a=n[0]*s,l=n[1]*o;return[[r-a,i-l],[r+s-a,i+o-l]]}function vT({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=nt(e);let o={controlDirection:zh("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:u,boundaries:c,keepAspectRatio:d,resizeDirection:f,onResizeStart:p,onResize:m,onResizeEnd:v,shouldResize:_}){let g={...Gy},y={...gT};o={boundaries:c,resizeDirection:f,keepAspectRatio:d,controlDirection:zh(u)};let h,w=null,k=[],x,E,N,O=!1;const $=iy().on("start",T=>{const{nodeLookup:P,transform:D,snapGrid:S,snapToGrid:I,nodeOrigin:R,paneDomNode:M}=n();if(h=P.get(t),!h)return;w=(M==null?void 0:M.getBoundingClientRect())??null;const{xSnapped:b,ySnapped:C}=Bi(T.sourceEvent,{transform:D,snapGrid:S,snapToGrid:I,containerBounds:w});g={width:h.measured.width??0,height:h.measured.height??0,x:h.position.x??0,y:h.position.y??0},y={...g,pointerX:b,pointerY:C,aspectRatio:g.width/g.height},x=void 0,h.parentId&&(h.extent==="parent"||h.expandParent)&&(x=P.get(h.parentId),E=x&&h.extent==="parent"?mT(x):void 0),k=[],N=void 0;for(const[j,z]of P)if(z.parentId===t&&(k.push({id:j,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const U=yT(z,h,z.origin??R);N?N=[[Math.min(U[0][0],N[0][0]),Math.min(U[0][1],N[0][1])],[Math.max(U[1][0],N[1][0]),Math.max(U[1][1],N[1][1])]]:N=U}p==null||p(T,{...g})}).on("drag",T=>{const{transform:P,snapGrid:D,snapToGrid:S,nodeOrigin:I}=n(),R=Bi(T.sourceEvent,{transform:P,snapGrid:D,snapToGrid:S,containerBounds:w}),M=[];if(!h)return;const{x:b,y:C,width:j,height:z}=g,U={},H=h.origin??I,{width:V,height:G,x:Y,y:X}=pT(y,o.controlDirection,R,o.boundaries,o.keepAspectRatio,H,E,N),F=V!==j,J=G!==z,re=Y!==b&&F,ne=X!==C&&J;if(!re&&!ne&&!F&&!J)return;if((re||ne||H[0]===1||H[1]===1)&&(U.x=re?Y:g.x,U.y=ne?X:g.y,g.x=U.x,g.y=U.y,k.length>0)){const fe=Y-b,ae=X-C;for(const De of k)De.position={x:De.position.x-fe+H[0]*(V-j),y:De.position.y-ae+H[1]*(G-z)},M.push(De)}if((F||J)&&(U.width=F&&(!o.resizeDirection||o.resizeDirection==="horizontal")?V:g.width,U.height=J&&(!o.resizeDirection||o.resizeDirection==="vertical")?G:g.height,g.width=U.width,g.height=U.height),x&&h.expandParent){const fe=H[0]*(U.width??0);U.x&&U.x<fe&&(g.x=fe,y.x=y.x-(U.x-fe));const ae=H[1]*(U.height??0);U.y&&U.y<ae&&(g.y=ae,y.y=y.y-(U.y-ae))}const te=hT({width:g.width,prevWidth:j,height:g.height,prevHeight:z,affectsX:o.controlDirection.affectsX,affectsY:o.controlDirection.affectsY}),Z={...g,direction:te};(_==null?void 0:_(T,Z))!==!1&&(O=!0,m==null||m(T,Z),r(U,M))}).on("end",T=>{O&&(v==null||v(T,{...g}),i==null||i({...g}),O=!1)});s.call($)}function l(){s.on(".drag",null)}return{update:a,destroy:l}}var Yy={exports:{}},Xy={},Jy={exports:{}},Qy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ni=L;function wT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _T=typeof Object.is=="function"?Object.is:wT,xT=ni.useState,ST=ni.useEffect,kT=ni.useLayoutEffect,ET=ni.useDebugValue;function bT(e,t){var n=t(),r=xT({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return kT(function(){i.value=n,i.getSnapshot=t,zl(i)&&s({inst:i})},[e,n,t]),ST(function(){return zl(i)&&s({inst:i}),e(function(){zl(i)&&s({inst:i})})},[e]),ET(n),n}function zl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_T(e,n)}catch{return!0}}function CT(e,t){return t()}var TT=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CT:bT;Qy.useSyncExternalStore=ni.useSyncExternalStore!==void 0?ni.useSyncExternalStore:TT;Jy.exports=Qy;var NT=Jy.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=L,PT=NT;function AT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var RT=typeof Object.is=="function"?Object.is:AT,IT=PT.useSyncExternalStore,OT=qa.useRef,$T=qa.useEffect,jT=qa.useMemo,LT=qa.useDebugValue;Xy.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=OT(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=jT(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return d=m}return d=p}if(m=d,RT(c,p))return m;var v=r(p);return i!==void 0&&i(m,v)?(c=p,m):(c=p,d=v)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var a=IT(e,s[0],s[1]);return $T(function(){o.hasValue=!0,o.value=a},[a]),LT(a),a};Yy.exports=Xy;var MT=Yy.exports;const DT=pp(MT),zT={},Bh=e=>{let t;const n=new Set,r=(c,d)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const p=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,p))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(zT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},UT=e=>e?Bh(e):Bh,{useDebugValue:BT}=Zv,{useSyncExternalStoreWithSelector:FT}=DT,HT=e=>e;function Zy(e,t=HT,n){const r=FT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return BT(r),r}const Fh=(e,t)=>{const n=UT(e),r=(i,s=t)=>Zy(n,i,s);return Object.assign(r,n),r},VT=(e,t)=>e?Fh(e,t):Fh;function me(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Ka=L.createContext(null),WT=Ka.Provider,e0=Mt.error001();function se(e,t){const n=L.useContext(Ka);if(n===null)throw new Error(e0);return Zy(n,e,t)}function ye(){const e=L.useContext(Ka);if(e===null)throw new Error(e0);return L.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Hh={display:"none"},qT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},t0="react-flow__node-desc",n0="react-flow__edge-desc",KT="react-flow__aria-live",GT=e=>e.ariaLiveMessage,YT=e=>e.ariaLabelConfig;function XT({rfId:e}){const t=se(GT);return A.jsx("div",{id:`${KT}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:qT,children:t})}function JT({rfId:e,disableKeyboardA11y:t}){const n=se(YT);return A.jsxs(A.Fragment,{children:[A.jsx("div",{id:`${t0}-${e}`,style:Hh,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),A.jsx("div",{id:`${n0}-${e}`,style:Hh,children:n["edge.a11yDescription.default"]}),!t&&A.jsx(XT,{rfId:e})]})}const Os=L.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return A.jsx("div",{className:Ce(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});Os.displayName="Panel";function QT({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:A.jsx(Os,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:A.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const ZT=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},po=e=>e.id;function eN(e,t){return me(e.selectedNodes.map(po),t.selectedNodes.map(po))&&me(e.selectedEdges.map(po),t.selectedEdges.map(po))}function tN({onSelectionChange:e}){const t=ye(),{selectedNodes:n,selectedEdges:r}=se(ZT,eN);return L.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const nN=e=>!!e.onSelectionChangeHandlers;function rN({onSelectionChange:e}){const t=se(nN);return e||t?A.jsx(tN,{onSelectionChange:e}):null}const r0=[0,0],iN={x:0,y:0,zoom:1},sN=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Vh=[...sN,"rfId"],oN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Wh={translateExtent:ms,nodeOrigin:r0,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function aN(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:l}=se(oN,me),u=ye();L.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{c.current=Wh,a()}),[]);const c=L.useRef(Wh);return L.useEffect(()=>{for(const d of Vh){const f=e[d],p=c.current[d];f!==p&&(typeof e[d]>"u"||(d==="nodes"?t(f):d==="edges"?n(f):d==="minZoom"?r(f):d==="maxZoom"?i(f):d==="translateExtent"?s(f):d==="nodeExtent"?o(f):d==="ariaLabelConfig"?u.setState({ariaLabelConfig:AC(f)}):d==="fitView"?u.setState({fitViewQueued:f}):d==="fitViewOptions"?u.setState({fitViewOptions:f}):u.setState({[d]:f})))}c.current=e},Vh.map(d=>e[d])),null}function qh(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function lN(e){var r;const[t,n]=L.useState(e==="system"?null:e);return L.useEffect(()=>{if(e!=="system"){n(e);return}const i=qh(),s=()=>n(i!=null&&i.matches?"dark":"light");return s(),i==null||i.addEventListener("change",s),()=>{i==null||i.removeEventListener("change",s)}},[e]),t!==null?t:(r=qh())!=null&&r.matches?"dark":"light"}const Kh=typeof document<"u"?document:null;function _s(e=null,t={target:Kh,actInsideInputWithModifier:!0}){const[n,r]=L.useState(!1),i=L.useRef(!1),s=L.useRef(new Set([])),[o,a]=L.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=u.reduce((d,f)=>d.concat(...f),[]);return[u,c]}return[[],[]]},[e]);return L.useEffect(()=>{const l=(t==null?void 0:t.target)??Kh,u=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=p=>{var _,g;if(i.current=p.ctrlKey||p.metaKey||p.shiftKey||p.altKey,(!i.current||i.current&&!u)&&Iy(p))return!1;const v=Yh(p.code,a);if(s.current.add(p[v]),Gh(o,s.current,!1)){const y=((g=(_=p.composedPath)==null?void 0:_.call(p))==null?void 0:g[0])||p.target,h=(y==null?void 0:y.nodeName)==="BUTTON"||(y==null?void 0:y.nodeName)==="A";t.preventDefault!==!1&&(i.current||!h)&&p.preventDefault(),r(!0)}},d=p=>{const m=Yh(p.code,a);Gh(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(p[m]),p.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,r]),n}function Gh(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Yh(e,t){return t.includes(e)?"code":"key"}const uN=()=>{const e=ye();return L.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=e.getState(),l=ud(t,r,i,s,o,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:a,y:l}=o.getBoundingClientRect(),u={x:t.x-a,y:t.y-l},c=n.snapGrid??i,d=n.snapToGrid??s;return Is(u,r,d,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=ma(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function i0(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const l of o)cN(l,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function cN(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function s0(e,t){return i0(e,t)}function o0(e,t){return i0(e,t)}function Ln(e,t){return{id:e,type:"select",selected:t}}function Ir(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Ln(s.id,o)))}return r}function Xh({items:e=[],lookup:t}){var i;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,o]of e.entries()){const a=t.get(o.id),l=((i=a==null?void 0:a.internals)==null?void 0:i.userNode)??a;l!==void 0&&l!==o&&n.push({id:o.id,item:o,type:"replace"}),l===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function Jh(e){return{id:e.id,type:"remove"}}const Qh=e=>_C(e),dN=e=>Ey(e);function a0(e){return L.forwardRef(e)}const fN=typeof window<"u"?L.useLayoutEffect:L.useEffect;function Zh(e){const[t,n]=L.useState(BigInt(0)),[r]=L.useState(()=>hN(()=>n(i=>i+BigInt(1))));return fN(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function hN(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const l0=L.createContext(null);function pN({children:e}){const t=ye(),n=L.useCallback(a=>{const{nodes:l=[],setNodes:u,hasDefaultNodes:c,onNodesChange:d,nodeLookup:f,fitViewQueued:p,onNodesChangeMiddlewareMap:m}=t.getState();let v=l;for(const g of a)v=typeof g=="function"?g(v):g;let _=Xh({items:v,lookup:f});for(const g of m.values())_=g(_);c&&u(v),_.length>0?d==null||d(_):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:g,nodes:y,setNodes:h}=t.getState();g&&h(y)})},[]),r=Zh(n),i=L.useCallback(a=>{const{edges:l=[],setEdges:u,hasDefaultEdges:c,onEdgesChange:d,edgeLookup:f}=t.getState();let p=l;for(const m of a)p=typeof m=="function"?m(p):m;c?u(p):d&&d(Xh({items:p,lookup:f}))},[]),s=Zh(i),o=L.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return A.jsx(l0.Provider,{value:o,children:e})}function gN(){const e=L.useContext(l0);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const mN=e=>!!e.panZoom;function md(){const e=uN(),t=ye(),n=gN(),r=se(mN),i=L.useMemo(()=>{const s=d=>t.getState().nodeLookup.get(d),o=d=>{n.nodeQueue.push(d)},a=d=>{n.edgeQueue.push(d)},l=d=>{var g,y;const{nodeLookup:f,nodeOrigin:p}=t.getState(),m=Qh(d)?d:f.get(d.id),v=m.parentId?Ay(m.position,m.measured,m.parentId,f,p):m.position,_={...m,position:v,width:((g=m.measured)==null?void 0:g.width)??m.width,height:((y=m.measured)==null?void 0:y.height)??m.height};return Zr(_)},u=(d,f,p={replace:!1})=>{o(m=>m.map(v=>{if(v.id===d){const _=typeof f=="function"?f(v):f;return p.replace&&Qh(_)?_:{...v,..._}}return v}))},c=(d,f,p={replace:!1})=>{a(m=>m.map(v=>{if(v.id===d){const _=typeof f=="function"?f(v):f;return p.replace&&dN(_)?_:{...v,..._}}return v}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=s(d))==null?void 0:f.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:o,setEdges:a,addNodes:d=>{const f=Array.isArray(d)?d:[d];n.nodeQueue.push(p=>[...p,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:p}=t.getState(),[m,v,_]=p;return{nodes:d.map(g=>({...g})),edges:f.map(g=>({...g})),viewport:{x:m,y:v,zoom:_}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:p,edges:m,onNodesDelete:v,onEdgesDelete:_,triggerNodeChanges:g,triggerEdgeChanges:y,onDelete:h,onBeforeDelete:w}=t.getState(),{nodes:k,edges:x}=await bC({nodesToRemove:d,edgesToRemove:f,nodes:p,edges:m,onBeforeDelete:w}),E=x.length>0,N=k.length>0;if(E){const O=x.map(Jh);_==null||_(x),y(O)}if(N){const O=k.map(Jh);v==null||v(k),g(O)}return(N||E)&&(h==null||h({nodes:k,edges:x})),{deletedNodes:k,deletedEdges:x}},getIntersectingNodes:(d,f=!0,p)=>{const m=Nh(d),v=m?d:l(d),_=p!==void 0;return v?(p||t.getState().nodes).filter(g=>{const y=t.getState().nodeLookup.get(g.id);if(y&&!m&&(g.id===d.id||!y.internals.positionAbsolute))return!1;const h=Zr(_?g:y),w=vs(h,v);return f&&w>0||w>=h.width*h.height||w>=v.width*v.height}):[]},isNodeIntersecting:(d,f,p=!0)=>{const v=Nh(d)?d:l(d);if(!v)return!1;const _=vs(v,f);return p&&_>0||_>=f.width*f.height||_>=v.width*v.height},updateNode:u,updateNodeData:(d,f,p={replace:!1})=>{u(d,m=>{const v=typeof f=="function"?f(m):f;return p.replace?{...m,data:v}:{...m,data:{...m.data,...v}}},p)},updateEdge:c,updateEdgeData:(d,f,p={replace:!1})=>{c(d,m=>{const v=typeof f=="function"?f(m):f;return p.replace?{...m,data:v}:{...m,data:{...m.data,...v}}},p)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return xC(d,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:d,id:f,nodeId:p})=>{var m;return Array.from(((m=t.getState().connectionLookup.get(`${p}-${d}${f?`-${f}`:""}`))==null?void 0:m.values())??[])},getNodeConnections:({type:d,handleId:f,nodeId:p})=>{var m;return Array.from(((m=t.getState().connectionLookup.get(`${p}${d?f?`-${d}-${f}`:`-${d}`:""}`))==null?void 0:m.values())??[])},fitView:async d=>{const f=t.getState().fitViewResolver??PC();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:f}),n.nodeQueue.push(p=>[...p]),f.promise}}},[]);return L.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const ep=e=>e.selected,yN=typeof window<"u"?window:void 0;function vN({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ye(),{deleteElements:r}=md(),i=_s(e,{actInsideInputWithModifier:!1}),s=_s(t,{target:yN});L.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(ep),edges:o.filter(ep)}),n.setState({nodesSelectionActive:!1})}},[i]),L.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function wN(e){const t=ye();L.useEffect(()=>{const n=()=>{var i,s,o,a;if(!e.current||!(((s=(i=e.current).checkVisibility)==null?void 0:s.call(i))??!0))return!1;const r=cd(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",Mt.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Ga={position:"absolute",width:"100%",height:"100%",top:0,left:0},_N=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function xN({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Kn.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:u,minZoom:c,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:p=!0,children:m,noWheelClassName:v,noPanClassName:_,onViewportChange:g,isControlledViewport:y,paneClickDistance:h,selectionOnDrag:w}){const k=ye(),x=L.useRef(null),{userSelectionActive:E,lib:N,connectionInProgress:O}=se(_N,me),$=_s(f),T=L.useRef();wN(x);const P=L.useCallback(D=>{g==null||g({x:D[0],y:D[1],zoom:D[2]}),y||k.setState({transform:D})},[g,y]);return L.useEffect(()=>{if(x.current){T.current=fT({domNode:x.current,minZoom:c,maxZoom:d,translateExtent:u,viewport:l,onDraggingChange:R=>k.setState(M=>M.paneDragging===R?M:{paneDragging:R}),onPanZoomStart:(R,M)=>{const{onViewportChangeStart:b,onMoveStart:C}=k.getState();C==null||C(R,M),b==null||b(M)},onPanZoom:(R,M)=>{const{onViewportChange:b,onMove:C}=k.getState();C==null||C(R,M),b==null||b(M)},onPanZoomEnd:(R,M)=>{const{onViewportChangeEnd:b,onMoveEnd:C}=k.getState();C==null||C(R,M),b==null||b(M)}});const{x:D,y:S,zoom:I}=T.current.getViewport();return k.setState({panZoom:T.current,transform:[D,S,I],domNode:x.current.closest(".react-flow")}),()=>{var R;(R=T.current)==null||R.destroy()}}},[]),L.useEffect(()=>{var D;(D=T.current)==null||D.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:$,preventScrolling:p,noPanClassName:_,userSelectionActive:E,noWheelClassName:v,lib:N,onTransformChange:P,connectionInProgress:O,selectionOnDrag:w,paneClickDistance:h})},[e,t,n,r,i,s,o,a,$,p,_,E,v,N,P,O,w,h]),A.jsx("div",{className:"react-flow__renderer",ref:x,style:Ga,children:m})}const SN=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function kN(){const{userSelectionActive:e,userSelectionRect:t}=se(SN,me);return e&&t?A.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Ul=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},EN=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function bN({isSelecting:e,selectionKeyPressed:t,selectionMode:n=ys.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:s,onSelectionStart:o,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:p,children:m}){const v=ye(),{userSelectionActive:_,elementsSelectable:g,dragging:y,connectionInProgress:h}=se(EN,me),w=g&&(e||_),k=L.useRef(null),x=L.useRef(),E=L.useRef(new Set),N=L.useRef(new Set),O=L.useRef(!1),$=b=>{if(O.current||h){O.current=!1;return}l==null||l(b),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},T=b=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){b.preventDefault();return}u==null||u(b)},P=c?b=>c(b):void 0,D=b=>{O.current&&(b.stopPropagation(),O.current=!1)},S=b=>{var G,Y;const{domNode:C}=v.getState();if(x.current=C==null?void 0:C.getBoundingClientRect(),!x.current)return;const j=b.target===k.current;if(!j&&!!b.target.closest(".nokey")||!e||!(s&&j||t)||b.button!==0||!b.isPrimary)return;(Y=(G=b.target)==null?void 0:G.setPointerCapture)==null||Y.call(G,b.pointerId),O.current=!1;const{x:H,y:V}=bt(b.nativeEvent,x.current);v.setState({userSelectionRect:{width:0,height:0,startX:H,startY:V,x:H,y:V}}),j||(b.stopPropagation(),b.preventDefault())},I=b=>{const{userSelectionRect:C,transform:j,nodeLookup:z,edgeLookup:U,connectionLookup:H,triggerNodeChanges:V,triggerEdgeChanges:G,defaultEdgeOptions:Y,resetSelectedElements:X}=v.getState();if(!x.current||!C)return;const{x:F,y:J}=bt(b.nativeEvent,x.current),{startX:re,startY:ne}=C;if(!O.current){const ae=t?0:i;if(Math.hypot(F-re,J-ne)<=ae)return;X(),o==null||o(b)}O.current=!0;const te={startX:re,startY:ne,x:F<re?F:re,y:J<ne?J:ne,width:Math.abs(F-re),height:Math.abs(J-ne)},Z=E.current,le=N.current;E.current=new Set(ld(z,te,j,n===ys.Partial,!0).map(ae=>ae.id)),N.current=new Set;const fe=(Y==null?void 0:Y.selectable)??!0;for(const ae of E.current){const De=H.get(ae);if(De)for(const{edgeId:nn}of De.values()){const zt=U.get(nn);zt&&(zt.selectable??fe)&&N.current.add(nn)}}if(!Ph(Z,E.current)){const ae=Ir(z,E.current,!0);V(ae)}if(!Ph(le,N.current)){const ae=Ir(U,N.current);G(ae)}v.setState({userSelectionRect:te,userSelectionActive:!0,nodesSelectionActive:!1})},R=b=>{var C,j;b.button===0&&((j=(C=b.target)==null?void 0:C.releasePointerCapture)==null||j.call(C,b.pointerId),!_&&b.target===k.current&&v.getState().userSelectionRect&&($==null||$(b)),v.setState({userSelectionActive:!1,userSelectionRect:null}),O.current&&(a==null||a(b),v.setState({nodesSelectionActive:E.current.size>0})))},M=r===!0||Array.isArray(r)&&r.includes(0);return A.jsxs("div",{className:Ce(["react-flow__pane",{draggable:M,dragging:y,selection:e}]),onClick:w?void 0:Ul($,k),onContextMenu:Ul(T,k),onWheel:Ul(P,k),onPointerEnter:w?void 0:d,onPointerMove:w?I:f,onPointerUp:w?R:void 0,onPointerDownCapture:w?S:void 0,onClickCapture:w?D:void 0,onPointerLeave:p,ref:k,style:Ga,children:[m,A.jsx(kN,{})]})}function rc({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",Mt.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function u0({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=ye(),[l,u]=L.useState(!1),c=L.useRef();return L.useEffect(()=>{c.current=QC({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{rc({id:d,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),L.useEffect(()=>{if(!(t||!e.current||!c.current))return c.current.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{var d;(d=c.current)==null||d.destroy()}},[n,r,t,s,e,i,o]),l}const CN=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function c0(){const e=ye();return L.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:l,nodeLookup:u,nodeOrigin:c}=e.getState(),d=new Map,f=CN(o),p=i?s[0]:5,m=i?s[1]:5,v=n.direction.x*p*n.factor,_=n.direction.y*m*n.factor;for(const[,g]of u){if(!f(g))continue;let y={x:g.internals.positionAbsolute.x+v,y:g.internals.positionAbsolute.y+_};i&&(y=Rs(y,s));const{position:h,positionAbsolute:w}=by({nodeId:g.id,nextPosition:y,nodeLookup:u,nodeExtent:r,nodeOrigin:c,onError:a});g.position=h,g.internals.positionAbsolute=w,d.set(g.id,g)}l(d)},[])}const yd=L.createContext(null),TN=yd.Provider;yd.Consumer;const d0=()=>L.useContext(yd),NN=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),PN=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:l,isValid:u}=o,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:s===Jr.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&u}};function AN({type:e="source",position:t=K.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:d,...f},p){var I,R;const m=o||null,v=e==="target",_=ye(),g=d0(),{connectOnClick:y,noPanClassName:h,rfId:w}=se(NN,me),{connectingFrom:k,connectingTo:x,clickConnecting:E,isPossibleEndHandle:N,connectionInProcess:O,clickConnectionInProcess:$,valid:T}=se(PN(g,m,e),me);g||(R=(I=_.getState()).onError)==null||R.call(I,"010",Mt.error010());const P=M=>{const{defaultEdgeOptions:b,onConnect:C,hasDefaultEdges:j}=_.getState(),z={...b,...M};if(j){const{edges:U,setEdges:H}=_.getState();H(LC(z,U))}C==null||C(z),a==null||a(z)},D=M=>{if(!g)return;const b=Oy(M.nativeEvent);if(i&&(b&&M.button===0||!b)){const C=_.getState();nc.onPointerDown(M.nativeEvent,{handleDomNode:M.currentTarget,autoPanOnConnect:C.autoPanOnConnect,connectionMode:C.connectionMode,connectionRadius:C.connectionRadius,domNode:C.domNode,nodeLookup:C.nodeLookup,lib:C.lib,isTarget:v,handleId:m,nodeId:g,flowId:C.rfId,panBy:C.panBy,cancelConnection:C.cancelConnection,onConnectStart:C.onConnectStart,onConnectEnd:(...j)=>{var z,U;return(U=(z=_.getState()).onConnectEnd)==null?void 0:U.call(z,...j)},updateConnection:C.updateConnection,onConnect:P,isValidConnection:n||((...j)=>{var z,U;return((U=(z=_.getState()).isValidConnection)==null?void 0:U.call(z,...j))??!0}),getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,autoPanSpeed:C.autoPanSpeed,dragThreshold:C.connectionDragThreshold})}b?c==null||c(M):d==null||d(M)},S=M=>{const{onClickConnectStart:b,onClickConnectEnd:C,connectionClickStartHandle:j,connectionMode:z,isValidConnection:U,lib:H,rfId:V,nodeLookup:G,connection:Y}=_.getState();if(!g||!j&&!i)return;if(!j){b==null||b(M.nativeEvent,{nodeId:g,handleId:m,handleType:e}),_.setState({connectionClickStartHandle:{nodeId:g,type:e,id:m}});return}const X=Ry(M.target),F=n||U,{connection:J,isValid:re}=nc.isValid(M.nativeEvent,{handle:{nodeId:g,id:m,type:e},connectionMode:z,fromNodeId:j.nodeId,fromHandleId:j.id||null,fromType:j.type,isValidConnection:F,flowId:V,doc:X,lib:H,nodeLookup:G});re&&J&&P(J);const ne=structuredClone(Y);delete ne.inProgress,ne.toPosition=ne.toHandle?ne.toHandle.position:null,C==null||C(M,ne),_.setState({connectionClickStartHandle:null})};return A.jsx("div",{"data-handleid":m,"data-nodeid":g,"data-handlepos":t,"data-id":`${w}-${g}-${m}-${e}`,className:Ce(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",h,u,{source:!v,target:v,connectable:r,connectablestart:i,connectableend:s,clickconnecting:E,connectingfrom:k,connectingto:x,valid:T,connectionindicator:r&&(!O||N)&&(O||$?s:i)}]),onMouseDown:D,onTouchStart:D,onClick:y?S:void 0,ref:p,...f,children:l})}const rr=L.memo(a0(AN));function RN({data:e,isConnectable:t,sourcePosition:n=K.Bottom}){return A.jsxs(A.Fragment,{children:[e==null?void 0:e.label,A.jsx(rr,{type:"source",position:n,isConnectable:t})]})}function IN({data:e,isConnectable:t,targetPosition:n=K.Top,sourcePosition:r=K.Bottom}){return A.jsxs(A.Fragment,{children:[A.jsx(rr,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,A.jsx(rr,{type:"source",position:r,isConnectable:t})]})}function ON(){return null}function $N({data:e,isConnectable:t,targetPosition:n=K.Top}){return A.jsxs(A.Fragment,{children:[A.jsx(rr,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const ya={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},tp={input:RN,default:IN,output:$N,group:ON};function jN(e){var t,n,r,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const LN=e=>{const{width:t,height:n,x:r,y:i}=As(e.nodeLookup,{filter:s=>!!s.selected});return{width:Et(t)?t:null,height:Et(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function MN({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ye(),{width:i,height:s,transformString:o,userSelectionActive:a}=se(LN,me),l=c0(),u=L.useRef(null);L.useEffect(()=>{var p;n||(p=u.current)==null||p.focus({preventScroll:!0})},[n]);const c=!a&&i!==null&&s!==null;if(u0({nodeRef:u,disabled:!c}),!c)return null;const d=e?p=>{const m=r.getState().nodes.filter(v=>v.selected);e(p,m)}:void 0,f=p=>{Object.prototype.hasOwnProperty.call(ya,p.key)&&(p.preventDefault(),l({direction:ya[p.key],factor:p.shiftKey?4:1}))};return A.jsx("div",{className:Ce(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:A.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:s}})})}const np=typeof window<"u"?window:void 0,DN=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function f0({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:c,selectionMode:d,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:m,panActivationKeyCode:v,zoomActivationKeyCode:_,elementsSelectable:g,zoomOnScroll:y,zoomOnPinch:h,panOnScroll:w,panOnScrollSpeed:k,panOnScrollMode:x,zoomOnDoubleClick:E,panOnDrag:N,defaultViewport:O,translateExtent:$,minZoom:T,maxZoom:P,preventScrolling:D,onSelectionContextMenu:S,noWheelClassName:I,noPanClassName:R,disableKeyboardA11y:M,onViewportChange:b,isControlledViewport:C}){const{nodesSelectionActive:j,userSelectionActive:z}=se(DN,me),U=_s(u,{target:np}),H=_s(v,{target:np}),V=H||N,G=H||w,Y=c&&V!==!0,X=U||z||Y;return vN({deleteKeyCode:l,multiSelectionKeyCode:m}),A.jsx(xN,{onPaneContextMenu:s,elementsSelectable:g,zoomOnScroll:y,zoomOnPinch:h,panOnScroll:G,panOnScrollSpeed:k,panOnScrollMode:x,zoomOnDoubleClick:E,panOnDrag:!U&&V,defaultViewport:O,translateExtent:$,minZoom:T,maxZoom:P,zoomActivationKeyCode:_,preventScrolling:D,noWheelClassName:I,noPanClassName:R,onViewportChange:b,isControlledViewport:C,paneClickDistance:a,selectionOnDrag:Y,children:A.jsxs(bN,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:V,isSelecting:!!X,selectionMode:d,selectionKeyPressed:U,paneClickDistance:a,selectionOnDrag:Y,children:[e,j&&A.jsx(MN,{onSelectionContextMenu:S,noPanClassName:R,disableKeyboardA11y:M})]})})}f0.displayName="FlowRenderer";const zN=L.memo(f0),UN=e=>t=>e?ld(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function BN(e){return se(L.useCallback(UN(e),[e]),me)}const FN=e=>e.updateNodeInternals;function HN(){const e=se(FN),[t]=L.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return L.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function VN({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=ye(),s=L.useRef(null),o=L.useRef(null),a=L.useRef(e.sourcePosition),l=L.useRef(e.targetPosition),u=L.useRef(t),c=n&&!!e.internals.handleBounds;return L.useEffect(()=>{s.current&&!e.hidden&&(!c||o.current!==s.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(s.current),o.current=s.current)},[c,e.hidden]),L.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),L.useEffect(()=>{if(s.current){const d=u.current!==t,f=a.current!==e.sourcePosition,p=l.current!==e.targetPosition;(d||f||p)&&(u.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function WN({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:l,nodesConnectable:u,nodesFocusable:c,resizeObserver:d,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:m,rfId:v,nodeTypes:_,nodeClickDistance:g,onError:y}){const{node:h,internals:w,isParent:k}=se(F=>{const J=F.nodeLookup.get(e),re=F.parentLookup.has(e);return{node:J,internals:J.internals,isParent:re}},me);let x=h.type||"default",E=(_==null?void 0:_[x])||tp[x];E===void 0&&(y==null||y("003",Mt.error003(x)),x="default",E=(_==null?void 0:_.default)||tp.default);const N=!!(h.draggable||a&&typeof h.draggable>"u"),O=!!(h.selectable||l&&typeof h.selectable>"u"),$=!!(h.connectable||u&&typeof h.connectable>"u"),T=!!(h.focusable||c&&typeof h.focusable>"u"),P=ye(),D=Py(h),S=VN({node:h,nodeType:x,hasDimensions:D,resizeObserver:d}),I=u0({nodeRef:S,disabled:h.hidden||!N,noDragClassName:f,handleSelector:h.dragHandle,nodeId:e,isSelectable:O,nodeClickDistance:g}),R=c0();if(h.hidden)return null;const M=tn(h),b=jN(h),C=O||N||t||n||r||i,j=n?F=>n(F,{...w.userNode}):void 0,z=r?F=>r(F,{...w.userNode}):void 0,U=i?F=>i(F,{...w.userNode}):void 0,H=s?F=>s(F,{...w.userNode}):void 0,V=o?F=>o(F,{...w.userNode}):void 0,G=F=>{const{selectNodesOnDrag:J,nodeDragThreshold:re}=P.getState();O&&(!J||!N||re>0)&&rc({id:e,store:P,nodeRef:S}),t&&t(F,{...w.userNode})},Y=F=>{if(!(Iy(F.nativeEvent)||m)){if(_y.includes(F.key)&&O){const J=F.key==="Escape";rc({id:e,store:P,unselect:J,nodeRef:S})}else if(N&&h.selected&&Object.prototype.hasOwnProperty.call(ya,F.key)){F.preventDefault();const{ariaLabelConfig:J}=P.getState();P.setState({ariaLiveMessage:J["node.a11yDescription.ariaLiveMessage"]({direction:F.key.replace("Arrow","").toLowerCase(),x:~~w.positionAbsolute.x,y:~~w.positionAbsolute.y})}),R({direction:ya[F.key],factor:F.shiftKey?4:1})}}},X=()=>{var le;if(m||!((le=S.current)!=null&&le.matches(":focus-visible")))return;const{transform:F,width:J,height:re,autoPanOnNodeFocus:ne,setCenter:te}=P.getState();if(!ne)return;ld(new Map([[e,h]]),{x:0,y:0,width:J,height:re},F,!0).length>0||te(h.position.x+M.width/2,h.position.y+M.height/2,{zoom:F[2]})};return A.jsx("div",{className:Ce(["react-flow__node",`react-flow__node-${x}`,{[p]:N},h.className,{selected:h.selected,selectable:O,parent:k,draggable:N,dragging:I}]),ref:S,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:C?"all":"none",visibility:D?"visible":"hidden",...h.style,...b},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:j,onMouseMove:z,onMouseLeave:U,onContextMenu:H,onClick:G,onDoubleClick:V,onKeyDown:T?Y:void 0,tabIndex:T?0:void 0,onFocus:T?X:void 0,role:h.ariaRole??(T?"group":void 0),"aria-roledescription":"node","aria-describedby":m?void 0:`${t0}-${v}`,"aria-label":h.ariaLabel,...h.domAttributes,children:A.jsx(TN,{value:e,children:A.jsx(E,{id:e,data:h.data,type:x,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:h.selected??!1,selectable:O,draggable:N,deletable:h.deletable??!0,isConnectable:$,sourcePosition:h.sourcePosition,targetPosition:h.targetPosition,dragging:I,dragHandle:h.dragHandle,zIndex:w.z,parentId:h.parentId,...M})})})}var qN=L.memo(WN);const KN=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function h0(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=se(KN,me),o=BN(e.onlyRenderVisibleElements),a=HN();return A.jsx("div",{className:"react-flow__nodes",style:Ga,children:o.map(l=>A.jsx(qN,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},l))})}h0.displayName="NodeRenderer";const GN=L.memo(h0);function YN(e){return se(L.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&OC({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),me)}const XN=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return A.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},JN=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return A.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},rp={[pa.Arrow]:XN,[pa.ArrowClosed]:JN};function QN(e){const t=ye();return L.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(rp,e)?rp[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Mt.error009(e)),null)},[e])}const ZN=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=QN(t);return l?A.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:A.jsx(l,{color:n,strokeWidth:o})}):null},p0=({defaultColor:e,rfId:t})=>{const n=se(s=>s.edges),r=se(s=>s.defaultEdgeOptions),i=L.useMemo(()=>BC(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?A.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:A.jsx("defs",{children:i.map(s=>A.jsx(ZN,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};p0.displayName="MarkerDefinitions";var eP=L.memo(p0);function g0({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c}){const[d,f]=L.useState({x:1,y:0,width:0,height:0}),p=Ce(["react-flow__edge-textwrapper",u]),m=L.useRef(null);return L.useEffect(()=>{if(m.current){const v=m.current.getBBox();f({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),n?A.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:p,visibility:d.width?"visible":"hidden",...c,children:[i&&A.jsx("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),A.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:m,style:r,children:n}),l]}):null}g0.displayName="EdgeText";const tP=L.memo(g0);function Ya({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:u=20,...c}){return A.jsxs(A.Fragment,{children:[A.jsx("path",{...c,d:e,fill:"none",className:Ce(["react-flow__edge-path",c.className])}),u?A.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,r&&Et(t)&&Et(n)?A.jsx(tP,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function ip({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===K.Left||e===K.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function m0({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:i,targetPosition:s=K.Top}){const[o,a]=ip({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=ip({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,d,f,p]=$y({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${e},${t} C${o},${a} ${l},${u} ${r},${i}`,c,d,f,p]}function y0(e){return L.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:a,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:v,markerStart:_,interactionWidth:g})=>{const[y,h,w]=m0({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),k=e.isInternal?void 0:t;return A.jsx(Ya,{id:k,path:y,labelX:h,labelY:w,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:v,markerStart:_,interactionWidth:g})})}const nP=y0({isInternal:!1}),v0=y0({isInternal:!0});nP.displayName="SimpleBezierEdge";v0.displayName="SimpleBezierEdgeInternal";function w0(e){return L.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,sourcePosition:p=K.Bottom,targetPosition:m=K.Top,markerEnd:v,markerStart:_,pathOptions:g,interactionWidth:y})=>{const[h,w,k]=Zu({sourceX:n,sourceY:r,sourcePosition:p,targetX:i,targetY:s,targetPosition:m,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset,stepPosition:g==null?void 0:g.stepPosition}),x=e.isInternal?void 0:t;return A.jsx(Ya,{id:x,path:h,labelX:w,labelY:k,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:v,markerStart:_,interactionWidth:y})})}const _0=w0({isInternal:!1}),x0=w0({isInternal:!0});_0.displayName="SmoothStepEdge";x0.displayName="SmoothStepEdgeInternal";function S0(e){return L.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return A.jsx(_0,{...n,id:r,pathOptions:L.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const rP=S0({isInternal:!1}),k0=S0({isInternal:!0});rP.displayName="StepEdge";k0.displayName="StepEdgeInternal";function E0(e){return L.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:v})=>{const[_,g,y]=My({sourceX:n,sourceY:r,targetX:i,targetY:s}),h=e.isInternal?void 0:t;return A.jsx(Ya,{id:h,path:_,labelX:g,labelY:y,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:v})})}const iP=E0({isInternal:!1}),b0=E0({isInternal:!0});iP.displayName="StraightEdge";b0.displayName="StraightEdgeInternal";function C0(e){return L.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=K.Bottom,targetPosition:a=K.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:v,markerStart:_,pathOptions:g,interactionWidth:y})=>{const[h,w,k]=jy({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:g==null?void 0:g.curvature}),x=e.isInternal?void 0:t;return A.jsx(Ya,{id:x,path:h,labelX:w,labelY:k,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:v,markerStart:_,interactionWidth:y})})}const sP=C0({isInternal:!1}),T0=C0({isInternal:!0});sP.displayName="BezierEdge";T0.displayName="BezierEdgeInternal";const sp={default:T0,straight:b0,step:k0,smoothstep:x0,simplebezier:v0},op={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},oP=(e,t,n)=>n===K.Left?e-t:n===K.Right?e+t:e,aP=(e,t,n)=>n===K.Top?e-t:n===K.Bottom?e+t:e,ap="react-flow__edgeupdater";function lp({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return A.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Ce([ap,`${ap}-${a}`]),cx:oP(t,r,e),cy:aP(n,r,e),r,stroke:"transparent",fill:"transparent"})}function lP({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,onReconnect:u,onReconnectStart:c,onReconnectEnd:d,setReconnecting:f,setUpdateHover:p}){const m=ye(),v=(w,k)=>{if(w.button!==0)return;const{autoPanOnConnect:x,domNode:E,connectionMode:N,connectionRadius:O,lib:$,onConnectStart:T,cancelConnection:P,nodeLookup:D,rfId:S,panBy:I,updateConnection:R}=m.getState(),M=k.type==="target",b=(z,U)=>{f(!1),d==null||d(z,n,k.type,U)},C=z=>u==null?void 0:u(n,z),j=(z,U)=>{f(!0),c==null||c(w,n,k.type),T==null||T(z,U)};nc.onPointerDown(w.nativeEvent,{autoPanOnConnect:x,connectionMode:N,connectionRadius:O,domNode:E,handleId:k.id,nodeId:k.nodeId,nodeLookup:D,isTarget:M,edgeUpdaterType:k.type,lib:$,flowId:S,cancelConnection:P,panBy:I,isValidConnection:(...z)=>{var U,H;return((H=(U=m.getState()).isValidConnection)==null?void 0:H.call(U,...z))??!0},onConnect:C,onConnectStart:j,onConnectEnd:(...z)=>{var U,H;return(H=(U=m.getState()).onConnectEnd)==null?void 0:H.call(U,...z)},onReconnectEnd:b,updateConnection:R,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold,handleDomNode:w.currentTarget})},_=w=>v(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),g=w=>v(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),y=()=>p(!0),h=()=>p(!1);return A.jsxs(A.Fragment,{children:[(e===!0||e==="source")&&A.jsx(lp,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:_,onMouseEnter:y,onMouseOut:h,type:"source"}),(e===!0||e==="target")&&A.jsx(lp,{position:l,centerX:s,centerY:o,radius:t,onMouseDown:g,onMouseEnter:y,onMouseOut:h,type:"target"})]})}function uP({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,reconnectRadius:c,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,rfId:m,edgeTypes:v,noPanClassName:_,onError:g,disableKeyboardA11y:y}){let h=se(te=>te.edgeLookup.get(e));const w=se(te=>te.defaultEdgeOptions);h=w?{...w,...h}:h;let k=h.type||"default",x=(v==null?void 0:v[k])||sp[k];x===void 0&&(g==null||g("011",Mt.error011(k)),k="default",x=(v==null?void 0:v.default)||sp.default);const E=!!(h.focusable||t&&typeof h.focusable>"u"),N=typeof d<"u"&&(h.reconnectable||n&&typeof h.reconnectable>"u"),O=!!(h.selectable||r&&typeof h.selectable>"u"),$=L.useRef(null),[T,P]=L.useState(!1),[D,S]=L.useState(!1),I=ye(),{zIndex:R,sourceX:M,sourceY:b,targetX:C,targetY:j,sourcePosition:z,targetPosition:U}=se(L.useCallback(te=>{const Z=te.nodeLookup.get(h.source),le=te.nodeLookup.get(h.target);if(!Z||!le)return{zIndex:h.zIndex,...op};const fe=UC({id:e,sourceNode:Z,targetNode:le,sourceHandle:h.sourceHandle||null,targetHandle:h.targetHandle||null,connectionMode:te.connectionMode,onError:g});return{zIndex:IC({selected:h.selected,zIndex:h.zIndex,sourceNode:Z,targetNode:le,elevateOnSelect:te.elevateEdgesOnSelect,zIndexMode:te.zIndexMode}),...fe||op}},[h.source,h.target,h.sourceHandle,h.targetHandle,h.selected,h.zIndex]),me),H=L.useMemo(()=>h.markerStart?`url('#${ec(h.markerStart,m)}')`:void 0,[h.markerStart,m]),V=L.useMemo(()=>h.markerEnd?`url('#${ec(h.markerEnd,m)}')`:void 0,[h.markerEnd,m]);if(h.hidden||M===null||b===null||C===null||j===null)return null;const G=te=>{var ae;const{addSelectedEdges:Z,unselectNodesAndEdges:le,multiSelectionActive:fe}=I.getState();O&&(I.setState({nodesSelectionActive:!1}),h.selected&&fe?(le({nodes:[],edges:[h]}),(ae=$.current)==null||ae.blur()):Z([e])),i&&i(te,h)},Y=s?te=>{s(te,{...h})}:void 0,X=o?te=>{o(te,{...h})}:void 0,F=a?te=>{a(te,{...h})}:void 0,J=l?te=>{l(te,{...h})}:void 0,re=u?te=>{u(te,{...h})}:void 0,ne=te=>{var Z;if(!y&&_y.includes(te.key)&&O){const{unselectNodesAndEdges:le,addSelectedEdges:fe}=I.getState();te.key==="Escape"?((Z=$.current)==null||Z.blur(),le({edges:[h]})):fe([e])}};return A.jsx("svg",{style:{zIndex:R},children:A.jsxs("g",{className:Ce(["react-flow__edge",`react-flow__edge-${k}`,h.className,_,{selected:h.selected,animated:h.animated,inactive:!O&&!i,updating:T,selectable:O}]),onClick:G,onDoubleClick:Y,onContextMenu:X,onMouseEnter:F,onMouseMove:J,onMouseLeave:re,onKeyDown:E?ne:void 0,tabIndex:E?0:void 0,role:h.ariaRole??(E?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":h.ariaLabel===null?void 0:h.ariaLabel||`Edge from ${h.source} to ${h.target}`,"aria-describedby":E?`${n0}-${m}`:void 0,ref:$,...h.domAttributes,children:[!D&&A.jsx(x,{id:e,source:h.source,target:h.target,type:h.type,selected:h.selected,animated:h.animated,selectable:O,deletable:h.deletable??!0,label:h.label,labelStyle:h.labelStyle,labelShowBg:h.labelShowBg,labelBgStyle:h.labelBgStyle,labelBgPadding:h.labelBgPadding,labelBgBorderRadius:h.labelBgBorderRadius,sourceX:M,sourceY:b,targetX:C,targetY:j,sourcePosition:z,targetPosition:U,data:h.data,style:h.style,sourceHandleId:h.sourceHandle,targetHandleId:h.targetHandle,markerStart:H,markerEnd:V,pathOptions:"pathOptions"in h?h.pathOptions:void 0,interactionWidth:h.interactionWidth}),N&&A.jsx(lP,{edge:h,isReconnectable:N,reconnectRadius:c,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,sourceX:M,sourceY:b,targetX:C,targetY:j,sourcePosition:z,targetPosition:U,setUpdateHover:P,setReconnecting:S})]})})}var cP=L.memo(uP);const dP=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function N0({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:m,disableKeyboardA11y:v}){const{edgesFocusable:_,edgesReconnectable:g,elementsSelectable:y,onError:h}=se(dP,me),w=YN(t);return A.jsxs("div",{className:"react-flow__edges",children:[A.jsx(eP,{defaultColor:e,rfId:n}),w.map(k=>A.jsx(cP,{id:k,edgesFocusable:_,edgesReconnectable:g,elementsSelectable:y,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:c,reconnectRadius:d,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:m,rfId:n,onError:h,edgeTypes:r,disableKeyboardA11y:v},k))]})}N0.displayName="EdgeRenderer";const fP=L.memo(N0),hP=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function pP({children:e}){const t=se(hP);return A.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function gP(e){const t=md(),n=L.useRef(!1);L.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const mP=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function yP(e){const t=se(mP),n=ye();return L.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function vP(e){return e.connection.inProgress?{...e.connection,to:Is(e.connection.to,e.transform)}:{...e.connection}}function wP(e){return vP}function _P(e){const t=wP();return se(t,me)}const xP=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function SP({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:l}=se(xP,me);return!(s&&i&&l)?null:A.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:A.jsx("g",{className:Ce(["react-flow__connection",ky(a)]),children:A.jsx(P0,{style:t,type:n,CustomComponent:r,isValid:a})})})}const P0=({style:e,type:t=hn.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:l,to:u,toNode:c,toHandle:d,toPosition:f,pointer:p}=_P();if(!i)return;if(n)return A.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:f,connectionStatus:ky(r),toNode:c,toHandle:d,pointer:p});let m="";const v={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case hn.Bezier:[m]=jy(v);break;case hn.SimpleBezier:[m]=m0(v);break;case hn.Step:[m]=Zu({...v,borderRadius:0});break;case hn.SmoothStep:[m]=Zu(v);break;default:[m]=My(v)}return A.jsx("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};P0.displayName="ConnectionLine";const kP={};function up(e=kP){L.useRef(e),ye(),L.useEffect(()=>{},[e])}function EP(){ye(),L.useRef(!1),L.useEffect(()=>{},[])}function A0({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:p,connectionLineType:m,connectionLineStyle:v,connectionLineComponent:_,connectionLineContainerStyle:g,selectionKeyCode:y,selectionOnDrag:h,selectionMode:w,multiSelectionKeyCode:k,panActivationKeyCode:x,zoomActivationKeyCode:E,deleteKeyCode:N,onlyRenderVisibleElements:O,elementsSelectable:$,defaultViewport:T,translateExtent:P,minZoom:D,maxZoom:S,preventScrolling:I,defaultMarkerColor:R,zoomOnScroll:M,zoomOnPinch:b,panOnScroll:C,panOnScrollSpeed:j,panOnScrollMode:z,zoomOnDoubleClick:U,panOnDrag:H,onPaneClick:V,onPaneMouseEnter:G,onPaneMouseMove:Y,onPaneMouseLeave:X,onPaneScroll:F,onPaneContextMenu:J,paneClickDistance:re,nodeClickDistance:ne,onEdgeContextMenu:te,onEdgeMouseEnter:Z,onEdgeMouseMove:le,onEdgeMouseLeave:fe,reconnectRadius:ae,onReconnect:De,onReconnectStart:nn,onReconnectEnd:zt,noDragClassName:An,noWheelClassName:ai,noPanClassName:li,disableKeyboardA11y:ui,nodeExtent:Xa,rfId:$s,viewport:or,onViewportChange:ci}){return up(e),up(t),EP(),gP(n),yP(or),A.jsx(zN,{onPaneClick:V,onPaneMouseEnter:G,onPaneMouseMove:Y,onPaneMouseLeave:X,onPaneContextMenu:J,onPaneScroll:F,paneClickDistance:re,deleteKeyCode:N,selectionKeyCode:y,selectionOnDrag:h,selectionMode:w,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:k,panActivationKeyCode:x,zoomActivationKeyCode:E,elementsSelectable:$,zoomOnScroll:M,zoomOnPinch:b,zoomOnDoubleClick:U,panOnScroll:C,panOnScrollSpeed:j,panOnScrollMode:z,panOnDrag:H,defaultViewport:T,translateExtent:P,minZoom:D,maxZoom:S,onSelectionContextMenu:d,preventScrolling:I,noDragClassName:An,noWheelClassName:ai,noPanClassName:li,disableKeyboardA11y:ui,onViewportChange:ci,isControlledViewport:!!or,children:A.jsxs(pP,{children:[A.jsx(fP,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:De,onReconnectStart:nn,onReconnectEnd:zt,onlyRenderVisibleElements:O,onEdgeContextMenu:te,onEdgeMouseEnter:Z,onEdgeMouseMove:le,onEdgeMouseLeave:fe,reconnectRadius:ae,defaultMarkerColor:R,noPanClassName:li,disableKeyboardA11y:ui,rfId:$s}),A.jsx(SP,{style:v,type:m,component:_,containerStyle:g}),A.jsx("div",{className:"react-flow__edgelabel-renderer"}),A.jsx(GN,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,nodeClickDistance:ne,onlyRenderVisibleElements:O,noPanClassName:li,noDragClassName:An,disableKeyboardA11y:ui,nodeExtent:Xa,rfId:$s}),A.jsx("div",{className:"react-flow__viewport-portal"})]})})}A0.displayName="GraphView";const bP=L.memo(A0),cp=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l=.5,maxZoom:u=2,nodeOrigin:c,nodeExtent:d,zIndexMode:f="basic"}={})=>{const p=new Map,m=new Map,v=new Map,_=new Map,g=r??t??[],y=n??e??[],h=c??[0,0],w=d??ms;Uy(v,_,g);const k=tc(y,p,m,{nodeOrigin:h,nodeExtent:w,zIndexMode:f});let x=[0,0,1];if(o&&i&&s){const E=As(p,{filter:T=>!!((T.width||T.initialWidth)&&(T.height||T.initialHeight))}),{x:N,y:O,zoom:$}=ud(E,i,s,l,u,(a==null?void 0:a.padding)??.1);x=[N,O,$]}return{rfId:"1",width:i??0,height:s??0,transform:x,nodes:y,nodesInitialized:k,nodeLookup:p,parentLookup:m,edges:g,edgeLookup:_,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:u,translateExtent:ms,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Jr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:h,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:a,fitViewResolver:null,connection:{...Sy},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:CC,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:xy,zIndexMode:f,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},CP=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d,zIndexMode:f})=>VT((p,m)=>{async function v(){const{nodeLookup:_,panZoom:g,fitViewOptions:y,fitViewResolver:h,width:w,height:k,minZoom:x,maxZoom:E}=m();g&&(await EC({nodes:_,width:w,height:k,panZoom:g,minZoom:x,maxZoom:E},y),h==null||h.resolve(!0),p({fitViewResolver:null}))}return{...cp({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:f}),setNodes:_=>{const{nodeLookup:g,parentLookup:y,nodeOrigin:h,elevateNodesOnSelect:w,fitViewQueued:k,zIndexMode:x}=m(),E=tc(_,g,y,{nodeOrigin:h,nodeExtent:d,elevateNodesOnSelect:w,checkEquality:!0,zIndexMode:x});k&&E?(v(),p({nodes:_,nodesInitialized:E,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:_,nodesInitialized:E})},setEdges:_=>{const{connectionLookup:g,edgeLookup:y}=m();Uy(g,y,_),p({edges:_})},setDefaultNodesAndEdges:(_,g)=>{if(_){const{setNodes:y}=m();y(_),p({hasDefaultNodes:!0})}if(g){const{setEdges:y}=m();y(g),p({hasDefaultEdges:!0})}},updateNodeInternals:_=>{const{triggerNodeChanges:g,nodeLookup:y,parentLookup:h,domNode:w,nodeOrigin:k,nodeExtent:x,debug:E,fitViewQueued:N,zIndexMode:O}=m(),{changes:$,updatedInternals:T}=GC(_,y,h,w,k,x,O);T&&(VC(y,h,{nodeOrigin:k,nodeExtent:x,zIndexMode:O}),N?(v(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),($==null?void 0:$.length)>0&&(E&&console.log("React Flow: trigger node changes",$),g==null||g($)))},updateNodePositions:(_,g=!1)=>{const y=[];let h=[];const{nodeLookup:w,triggerNodeChanges:k,connection:x,updateConnection:E,onNodesChangeMiddlewareMap:N}=m();for(const[O,$]of _){const T=w.get(O),P=!!(T!=null&&T.expandParent&&(T!=null&&T.parentId)&&($!=null&&$.position)),D={id:O,type:"position",position:P?{x:Math.max(0,$.position.x),y:Math.max(0,$.position.y)}:$.position,dragging:g};if(T&&x.inProgress&&x.fromNode.id===T.id){const S=nr(T,x.fromHandle,K.Left,!0);E({...x,from:S})}P&&T.parentId&&y.push({id:O,parentId:T.parentId,rect:{...$.internals.positionAbsolute,width:$.measured.width??0,height:$.measured.height??0}}),h.push(D)}if(y.length>0){const{parentLookup:O,nodeOrigin:$}=m(),T=gd(y,w,O,$);h.push(...T)}for(const O of N.values())h=O(h);k(h)},triggerNodeChanges:_=>{const{onNodesChange:g,setNodes:y,nodes:h,hasDefaultNodes:w,debug:k}=m();if(_!=null&&_.length){if(w){const x=s0(_,h);y(x)}k&&console.log("React Flow: trigger node changes",_),g==null||g(_)}},triggerEdgeChanges:_=>{const{onEdgesChange:g,setEdges:y,edges:h,hasDefaultEdges:w,debug:k}=m();if(_!=null&&_.length){if(w){const x=o0(_,h);y(x)}k&&console.log("React Flow: trigger edge changes",_),g==null||g(_)}},addSelectedNodes:_=>{const{multiSelectionActive:g,edgeLookup:y,nodeLookup:h,triggerNodeChanges:w,triggerEdgeChanges:k}=m();if(g){const x=_.map(E=>Ln(E,!0));w(x);return}w(Ir(h,new Set([..._]),!0)),k(Ir(y))},addSelectedEdges:_=>{const{multiSelectionActive:g,edgeLookup:y,nodeLookup:h,triggerNodeChanges:w,triggerEdgeChanges:k}=m();if(g){const x=_.map(E=>Ln(E,!0));k(x);return}k(Ir(y,new Set([..._]))),w(Ir(h,new Set,!0))},unselectNodesAndEdges:({nodes:_,edges:g}={})=>{const{edges:y,nodes:h,nodeLookup:w,triggerNodeChanges:k,triggerEdgeChanges:x}=m(),E=_||h,N=g||y,O=[];for(const T of E){if(!T.selected)continue;const P=w.get(T.id);P&&(P.selected=!1),O.push(Ln(T.id,!1))}const $=[];for(const T of N)T.selected&&$.push(Ln(T.id,!1));k(O),x($)},setMinZoom:_=>{const{panZoom:g,maxZoom:y}=m();g==null||g.setScaleExtent([_,y]),p({minZoom:_})},setMaxZoom:_=>{const{panZoom:g,minZoom:y}=m();g==null||g.setScaleExtent([y,_]),p({maxZoom:_})},setTranslateExtent:_=>{var g;(g=m().panZoom)==null||g.setTranslateExtent(_),p({translateExtent:_})},resetSelectedElements:()=>{const{edges:_,nodes:g,triggerNodeChanges:y,triggerEdgeChanges:h,elementsSelectable:w}=m();if(!w)return;const k=g.reduce((E,N)=>N.selected?[...E,Ln(N.id,!1)]:E,[]),x=_.reduce((E,N)=>N.selected?[...E,Ln(N.id,!1)]:E,[]);y(k),h(x)},setNodeExtent:_=>{const{nodes:g,nodeLookup:y,parentLookup:h,nodeOrigin:w,elevateNodesOnSelect:k,nodeExtent:x,zIndexMode:E}=m();_[0][0]===x[0][0]&&_[0][1]===x[0][1]&&_[1][0]===x[1][0]&&_[1][1]===x[1][1]||(tc(g,y,h,{nodeOrigin:w,nodeExtent:_,elevateNodesOnSelect:k,checkEquality:!1,zIndexMode:E}),p({nodeExtent:_}))},panBy:_=>{const{transform:g,width:y,height:h,panZoom:w,translateExtent:k}=m();return YC({delta:_,panZoom:w,transform:g,translateExtent:k,width:y,height:h})},setCenter:async(_,g,y)=>{const{width:h,height:w,maxZoom:k,panZoom:x}=m();if(!x)return Promise.resolve(!1);const E=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:k;return await x.setViewport({x:h/2-_*E,y:w/2-g*E,zoom:E},{duration:y==null?void 0:y.duration,ease:y==null?void 0:y.ease,interpolate:y==null?void 0:y.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...Sy}})},updateConnection:_=>{p({connection:_})},reset:()=>p({...cp()})}},Object.is);function TP({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:a,initialFitViewOptions:l,fitView:u,nodeOrigin:c,nodeExtent:d,zIndexMode:f,children:p}){const[m]=L.useState(()=>CP({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:u,minZoom:o,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:d,zIndexMode:f}));return A.jsx(WT,{value:m,children:A.jsx(pN,{children:p})})}function NP({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:f,zIndexMode:p}){return L.useContext(Ka)?A.jsx(A.Fragment,{children:e}):A.jsx(TP,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:c,nodeOrigin:d,nodeExtent:f,zIndexMode:p,children:e})}const PP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function AP({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:m,onConnectEnd:v,onClickConnectStart:_,onClickConnectEnd:g,onNodeMouseEnter:y,onNodeMouseMove:h,onNodeMouseLeave:w,onNodeContextMenu:k,onNodeDoubleClick:x,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:O,onNodesDelete:$,onEdgesDelete:T,onDelete:P,onSelectionChange:D,onSelectionDragStart:S,onSelectionDrag:I,onSelectionDragStop:R,onSelectionContextMenu:M,onSelectionStart:b,onSelectionEnd:C,onBeforeDelete:j,connectionMode:z,connectionLineType:U=hn.Bezier,connectionLineStyle:H,connectionLineComponent:V,connectionLineContainerStyle:G,deleteKeyCode:Y="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:F=!1,selectionMode:J=ys.Full,panActivationKeyCode:re="Space",multiSelectionKeyCode:ne=ws()?"Meta":"Control",zoomActivationKeyCode:te=ws()?"Meta":"Control",snapToGrid:Z,snapGrid:le,onlyRenderVisibleElements:fe=!1,selectNodesOnDrag:ae,nodesDraggable:De,autoPanOnNodeFocus:nn,nodesConnectable:zt,nodesFocusable:An,nodeOrigin:ai=r0,edgesFocusable:li,edgesReconnectable:ui,elementsSelectable:Xa=!0,defaultViewport:$s=iN,minZoom:or=.5,maxZoom:ci=2,translateExtent:_d=ms,preventScrolling:j0=!0,nodeExtent:Ja,defaultMarkerColor:L0="#b1b1b7",zoomOnScroll:M0=!0,zoomOnPinch:D0=!0,panOnScroll:z0=!1,panOnScrollSpeed:U0=.5,panOnScrollMode:B0=Kn.Free,zoomOnDoubleClick:F0=!0,panOnDrag:H0=!0,onPaneClick:V0,onPaneMouseEnter:W0,onPaneMouseMove:q0,onPaneMouseLeave:K0,onPaneScroll:G0,onPaneContextMenu:Y0,paneClickDistance:X0=1,nodeClickDistance:J0=0,children:Q0,onReconnect:Z0,onReconnectStart:ev,onReconnectEnd:tv,onEdgeContextMenu:nv,onEdgeDoubleClick:rv,onEdgeMouseEnter:iv,onEdgeMouseMove:sv,onEdgeMouseLeave:ov,reconnectRadius:av=10,onNodesChange:lv,onEdgesChange:uv,noDragClassName:cv="nodrag",noWheelClassName:dv="nowheel",noPanClassName:xd="nopan",fitView:Sd,fitViewOptions:kd,connectOnClick:fv,attributionPosition:hv,proOptions:pv,defaultEdgeOptions:gv,elevateNodesOnSelect:mv=!0,elevateEdgesOnSelect:yv=!1,disableKeyboardA11y:Ed=!1,autoPanOnConnect:vv,autoPanOnNodeDrag:wv,autoPanSpeed:_v,connectionRadius:xv,isValidConnection:Sv,onError:kv,style:Ev,id:bd,nodeDragThreshold:bv,connectionDragThreshold:Cv,viewport:Tv,onViewportChange:Nv,width:Pv,height:Av,colorMode:Rv="light",debug:Iv,onScroll:js,ariaLabelConfig:Ov,zIndexMode:Cd="basic",...$v},jv){const Qa=bd||"1",Lv=lN(Rv),Mv=L.useCallback(Td=>{Td.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),js==null||js(Td)},[js]);return A.jsx("div",{"data-testid":"rf__wrapper",...$v,onScroll:Mv,style:{...Ev,...PP},ref:jv,className:Ce(["react-flow",i,Lv]),id:bd,role:"application",children:A.jsxs(NP,{nodes:e,edges:t,width:Pv,height:Av,fitView:Sd,fitViewOptions:kd,minZoom:or,maxZoom:ci,nodeOrigin:ai,nodeExtent:Ja,zIndexMode:Cd,children:[A.jsx(bP,{onInit:u,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:h,onNodeMouseLeave:w,onNodeContextMenu:k,onNodeDoubleClick:x,nodeTypes:s,edgeTypes:o,connectionLineType:U,connectionLineStyle:H,connectionLineComponent:V,connectionLineContainerStyle:G,selectionKeyCode:X,selectionOnDrag:F,selectionMode:J,deleteKeyCode:Y,multiSelectionKeyCode:ne,panActivationKeyCode:re,zoomActivationKeyCode:te,onlyRenderVisibleElements:fe,defaultViewport:$s,translateExtent:_d,minZoom:or,maxZoom:ci,preventScrolling:j0,zoomOnScroll:M0,zoomOnPinch:D0,zoomOnDoubleClick:F0,panOnScroll:z0,panOnScrollSpeed:U0,panOnScrollMode:B0,panOnDrag:H0,onPaneClick:V0,onPaneMouseEnter:W0,onPaneMouseMove:q0,onPaneMouseLeave:K0,onPaneScroll:G0,onPaneContextMenu:Y0,paneClickDistance:X0,nodeClickDistance:J0,onSelectionContextMenu:M,onSelectionStart:b,onSelectionEnd:C,onReconnect:Z0,onReconnectStart:ev,onReconnectEnd:tv,onEdgeContextMenu:nv,onEdgeDoubleClick:rv,onEdgeMouseEnter:iv,onEdgeMouseMove:sv,onEdgeMouseLeave:ov,reconnectRadius:av,defaultMarkerColor:L0,noDragClassName:cv,noWheelClassName:dv,noPanClassName:xd,rfId:Qa,disableKeyboardA11y:Ed,nodeExtent:Ja,viewport:Tv,onViewportChange:Nv}),A.jsx(aN,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:m,onConnectEnd:v,onClickConnectStart:_,onClickConnectEnd:g,nodesDraggable:De,autoPanOnNodeFocus:nn,nodesConnectable:zt,nodesFocusable:An,edgesFocusable:li,edgesReconnectable:ui,elementsSelectable:Xa,elevateNodesOnSelect:mv,elevateEdgesOnSelect:yv,minZoom:or,maxZoom:ci,nodeExtent:Ja,onNodesChange:lv,onEdgesChange:uv,snapToGrid:Z,snapGrid:le,connectionMode:z,translateExtent:_d,connectOnClick:fv,defaultEdgeOptions:gv,fitView:Sd,fitViewOptions:kd,onNodesDelete:$,onEdgesDelete:T,onDelete:P,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:O,onSelectionDrag:I,onSelectionDragStart:S,onSelectionDragStop:R,onMove:c,onMoveStart:d,onMoveEnd:f,noPanClassName:xd,nodeOrigin:ai,rfId:Qa,autoPanOnConnect:vv,autoPanOnNodeDrag:wv,autoPanSpeed:_v,onError:kv,connectionRadius:xv,isValidConnection:Sv,selectNodesOnDrag:ae,nodeDragThreshold:bv,connectionDragThreshold:Cv,onBeforeDelete:j,debug:Iv,ariaLabelConfig:Ov,zIndexMode:Cd}),A.jsx(rN,{onSelectionChange:D}),Q0,A.jsx(QT,{proOptions:pv,position:hv}),A.jsx(JT,{rfId:Qa,disableKeyboardA11y:Ed})]})})}var RP=a0(AP);function IP(e){const[t,n]=L.useState(e),r=L.useCallback(i=>n(s=>s0(i,s)),[]);return[t,n,r]}function OP(e){const[t,n]=L.useState(e),r=L.useCallback(i=>n(s=>o0(i,s)),[]);return[t,n,r]}function $P({dimensions:e,lineWidth:t,variant:n,className:r}){return A.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ce(["react-flow__background-pattern",n,r])})}function jP({radius:e,className:t}){return A.jsx("circle",{cx:e,cy:e,r:e,className:Ce(["react-flow__background-pattern","dots",t])})}var En;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(En||(En={}));const LP={[En.Dots]:1,[En.Lines]:1,[En.Cross]:6},MP=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function R0({id:e,variant:t=En.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:l,className:u,patternClassName:c}){const d=L.useRef(null),{transform:f,patternId:p}=se(MP,me),m=r||LP[t],v=t===En.Dots,_=t===En.Cross,g=Array.isArray(n)?n:[n,n],y=[g[0]*f[2]||1,g[1]*f[2]||1],h=m*f[2],w=Array.isArray(s)?s:[s,s],k=_?[h,h]:y,x=[w[0]*f[2]||1+k[0]/2,w[1]*f[2]||1+k[1]/2],E=`${p}${e||""}`;return A.jsxs("svg",{className:Ce(["react-flow__background",u]),style:{...l,...Ga,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:d,"data-testid":"rf__background",children:[A.jsx("pattern",{id:E,x:f[0]%y[0],y:f[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`,children:v?A.jsx(jP,{radius:h/2,className:c}):A.jsx($P,{dimensions:k,lineWidth:i,variant:t,className:c})}),A.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}R0.displayName="Background";const DP=L.memo(R0);function zP(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:A.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function UP(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:A.jsx("path",{d:"M0 0h32v4.2H0z"})})}function BP(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:A.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function FP(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:A.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function HP(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:A.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function go({children:e,className:t,...n}){return A.jsx("button",{type:"button",className:Ce(["react-flow__controls-button",t]),...n,children:e})}const VP=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function I0({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:u,children:c,position:d="bottom-left",orientation:f="vertical","aria-label":p}){const m=ye(),{isInteractive:v,minZoomReached:_,maxZoomReached:g,ariaLabelConfig:y}=se(VP,me),{zoomIn:h,zoomOut:w,fitView:k}=md(),x=()=>{h(),s==null||s()},E=()=>{w(),o==null||o()},N=()=>{k(i),a==null||a()},O=()=>{m.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),l==null||l(!v)},$=f==="horizontal"?"horizontal":"vertical";return A.jsxs(Os,{className:Ce(["react-flow__controls",$,u]),position:d,style:e,"data-testid":"rf__controls","aria-label":p??y["controls.ariaLabel"],children:[t&&A.jsxs(A.Fragment,{children:[A.jsx(go,{onClick:x,className:"react-flow__controls-zoomin",title:y["controls.zoomIn.ariaLabel"],"aria-label":y["controls.zoomIn.ariaLabel"],disabled:g,children:A.jsx(zP,{})}),A.jsx(go,{onClick:E,className:"react-flow__controls-zoomout",title:y["controls.zoomOut.ariaLabel"],"aria-label":y["controls.zoomOut.ariaLabel"],disabled:_,children:A.jsx(UP,{})})]}),n&&A.jsx(go,{className:"react-flow__controls-fitview",onClick:N,title:y["controls.fitView.ariaLabel"],"aria-label":y["controls.fitView.ariaLabel"],children:A.jsx(BP,{})}),r&&A.jsx(go,{className:"react-flow__controls-interactive",onClick:O,title:y["controls.interactive.ariaLabel"],"aria-label":y["controls.interactive.ariaLabel"],children:v?A.jsx(HP,{}):A.jsx(FP,{})}),c]})}I0.displayName="Controls";const WP=L.memo(I0);function qP({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,selected:f,onClick:p}){const{background:m,backgroundColor:v}=s||{},_=o||m||v;return A.jsx("rect",{className:Ce(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:_,stroke:a,strokeWidth:l},shapeRendering:d,onClick:p?g=>p(g,e):void 0})}const KP=L.memo(qP),GP=e=>e.nodes.map(t=>t.id),Bl=e=>e instanceof Function?e:()=>e;function YP({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=KP,onClick:o}){const a=se(GP,me),l=Bl(t),u=Bl(e),c=Bl(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return A.jsx(A.Fragment,{children:a.map(f=>A.jsx(JP,{id:f,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:d},f))})}function XP({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:l}){const{node:u,x:c,y:d,width:f,height:p}=se(m=>{const v=m.nodeLookup.get(e);if(!v)return{node:void 0,x:0,y:0,width:0,height:0};const _=v.internals.userNode,{x:g,y}=v.internals.positionAbsolute,{width:h,height:w}=tn(_);return{node:_,x:g,y,width:h,height:w}},me);return!u||u.hidden||!Py(u)?null:A.jsx(a,{x:c,y:d,width:f,height:p,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:s,shapeRendering:o,onClick:l,id:u.id})}const JP=L.memo(XP);var QP=L.memo(YP);const ZP=200,eA=150,tA=e=>!e.hidden,nA=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Ny(As(e.nodeLookup,{filter:tA}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},rA="react-flow__minimap-desc";function O0({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:l,maskColor:u,maskStrokeColor:c,maskStrokeWidth:d,position:f="bottom-right",onClick:p,onNodeClick:m,pannable:v=!1,zoomable:_=!1,ariaLabel:g,inversePan:y,zoomStep:h=1,offsetScale:w=5}){const k=ye(),x=L.useRef(null),{boundingRect:E,viewBB:N,rfId:O,panZoom:$,translateExtent:T,flowWidth:P,flowHeight:D,ariaLabelConfig:S}=se(nA,me),I=(e==null?void 0:e.width)??ZP,R=(e==null?void 0:e.height)??eA,M=E.width/I,b=E.height/R,C=Math.max(M,b),j=C*I,z=C*R,U=w*C,H=E.x-(j-E.width)/2-U,V=E.y-(z-E.height)/2-U,G=j+U*2,Y=z+U*2,X=`${rA}-${O}`,F=L.useRef(0),J=L.useRef();F.current=C,L.useEffect(()=>{if(x.current&&$)return J.current=iT({domNode:x.current,panZoom:$,getTransform:()=>k.getState().transform,getViewScale:()=>F.current}),()=>{var Z;(Z=J.current)==null||Z.destroy()}},[$]),L.useEffect(()=>{var Z;(Z=J.current)==null||Z.update({translateExtent:T,width:P,height:D,inversePan:y,pannable:v,zoomStep:h,zoomable:_})},[v,_,y,h,T,P,D]);const re=p?Z=>{var ae;const[le,fe]=((ae=J.current)==null?void 0:ae.pointer(Z))||[0,0];p(Z,{x:le,y:fe})}:void 0,ne=m?L.useCallback((Z,le)=>{const fe=k.getState().nodeLookup.get(le).internals.userNode;m(Z,fe)},[]):void 0,te=g??S["minimap.ariaLabel"];return A.jsx(Os,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*C:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Ce(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:A.jsxs("svg",{width:I,height:R,viewBox:`${H} ${V} ${G} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":X,ref:x,onClick:re,children:[te&&A.jsx("title",{id:X,children:te}),A.jsx(QP,{onClick:ne,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),A.jsx("path",{className:"react-flow__minimap-mask",d:`M${H-U},${V-U}h${G+U*2}v${Y+U*2}h${-G-U*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}O0.displayName="MiniMap";const iA=L.memo(O0),sA=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,oA={[ti.Line]:"right",[ti.Handle]:"bottom-right"};function aA({nodeId:e,position:t,variant:n=ti.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:f,autoScale:p=!0,shouldResize:m,onResizeStart:v,onResize:_,onResizeEnd:g}){const y=d0(),h=typeof e=="string"?e:y,w=ye(),k=L.useRef(null),x=n===ti.Handle,E=se(L.useCallback(sA(x&&p),[x,p]),me),N=L.useRef(null),O=t??oA[n];L.useEffect(()=>{if(!(!k.current||!h))return N.current||(N.current=vT({domNode:k.current,nodeId:h,getStoreItems:()=>{const{nodeLookup:T,transform:P,snapGrid:D,snapToGrid:S,nodeOrigin:I,domNode:R}=w.getState();return{nodeLookup:T,transform:P,snapGrid:D,snapToGrid:S,nodeOrigin:I,paneDomNode:R}},onChange:(T,P)=>{const{triggerNodeChanges:D,nodeLookup:S,parentLookup:I,nodeOrigin:R}=w.getState(),M=[],b={x:T.x,y:T.y},C=S.get(h);if(C&&C.expandParent&&C.parentId){const j=C.origin??R,z=T.width??C.measured.width??0,U=T.height??C.measured.height??0,H={id:C.id,parentId:C.parentId,rect:{width:z,height:U,...Ay({x:T.x??C.position.x,y:T.y??C.position.y},{width:z,height:U},C.parentId,S,j)}},V=gd([H],S,I,R);M.push(...V),b.x=T.x?Math.max(j[0]*z,T.x):void 0,b.y=T.y?Math.max(j[1]*U,T.y):void 0}if(b.x!==void 0&&b.y!==void 0){const j={id:h,type:"position",position:{...b}};M.push(j)}if(T.width!==void 0&&T.height!==void 0){const z={id:h,type:"dimensions",resizing:!0,setAttributes:f?f==="horizontal"?"width":"height":!0,dimensions:{width:T.width,height:T.height}};M.push(z)}for(const j of P){const z={...j,type:"position"};M.push(z)}D(M)},onEnd:({width:T,height:P})=>{const D={id:h,type:"dimensions",resizing:!1,dimensions:{width:T,height:P}};w.getState().triggerNodeChanges([D])}})),N.current.update({controlPosition:O,boundaries:{minWidth:a,minHeight:l,maxWidth:u,maxHeight:c},keepAspectRatio:d,resizeDirection:f,onResizeStart:v,onResize:_,onResizeEnd:g,shouldResize:m}),()=>{var T;(T=N.current)==null||T.destroy()}},[O,a,l,u,c,d,v,_,g,m]);const $=O.split("-");return A.jsx("div",{className:Ce(["react-flow__resize-control","nodrag",...$,n,r]),ref:k,style:{...i,scale:E,...o&&{[x?"backgroundColor":"borderColor"]:o}},children:s})}L.memo(aA);const vd=L.createContext(null),lA="b9a96ad6-6391-4d8b-8571-3261286d451f";function uA({id:e,data:t}){const[n,r]=L.useState(!1),i=L.useContext(vd),s=e===lA,o=i?!i.has(e):!1,a=i?i.has(e):!1,l=["member-card",o?"dimmed":"",a?"highlighted":"",s?"special":""].filter(Boolean).join(" ");return A.jsxs("div",{className:l,children:[A.jsx(rr,{type:"target",position:K.Top,id:"child"}),A.jsx("button",{className:"delete-btn nodrag",onClick:()=>t.onDelete(e),title:"Xo",children:""}),A.jsx("div",{className:"member-photo-wrap",onClick:()=>r(!n),children:t.photoUrl?A.jsx("img",{src:t.photoUrl,alt:t.name,className:"member-photo",onError:u=>{u.target.style.display="none"}}):A.jsx("div",{className:"member-photo-placeholder",children:""})}),n&&A.jsx("input",{className:"member-photo-input nodrag",placeholder:"Dn URL nh...",defaultValue:t.photoUrl||"",autoFocus:!0,onBlur:u=>{t.onUpdateField(e,"photo_url",u.target.value),r(!1)},onKeyDown:u=>{u.key==="Enter"&&u.target.blur()}}),A.jsx("div",{className:"member-name nodrag",contentEditable:!0,suppressContentEditableWarning:!0,onBlur:u=>t.onUpdateField(e,"name",u.currentTarget.textContent||""),children:t.name}),A.jsx("div",{className:"member-memo nodrag",contentEditable:!0,suppressContentEditableWarning:!0,onBlur:u=>t.onUpdateField(e,"memo",u.currentTarget.textContent||""),children:t.memo||""}),A.jsx(rr,{type:"source",position:K.Bottom,id:"parent"})]})}const cA=L.memo(uA);function dA({id:e}){const t=L.useContext(vd),n=t?!t.has(e):!1;return A.jsxs("div",{className:`heart-node ${n?"dimmed":""}`,title:"Nhn p  xo kt hn",children:[A.jsx("span",{className:"heart-icon",children:""}),A.jsx(rr,{type:"source",position:K.Bottom,id:"heart-child"})]})}const fA=L.memo(dA);function hA({onSelect:e,onCancel:t}){return A.jsx("div",{className:"dialog-overlay",onClick:t,children:A.jsxs("div",{className:"dialog",onClick:n=>n.stopPropagation(),children:[A.jsx("h3",{children:"Chn quan h"}),A.jsxs("div",{className:"dialog-buttons",children:[A.jsx("button",{className:"btn-father",onClick:()=>e("father"),children:" B"}),A.jsx("button",{className:"btn-mother",onClick:()=>e("mother"),children:" M"}),A.jsx("button",{className:"btn-spouse",onClick:()=>e("spouse"),children:" Kt hn"})]}),A.jsx("button",{className:"btn-cancel",onClick:t,children:"Hu"})]})})}function dp(e,t,n){return{id:e.id,type:"member",position:{x:e.position_x,y:e.position_y},data:{name:e.name,photoUrl:e.photo_url,memo:e.memo,fatherId:e.father_id,motherId:e.mother_id,spouseId:e.spouse_id,onUpdateField:t,onDelete:n}}}function $0(e){const t=new Map;for(const n of e){if(!n.spouse_id)continue;const r=[n.id,n.spouse_id].sort(),i=r.join("_");t.has(i)||t.set(i,r)}return t}function wd(e){return`heart_${e}`}function pA(e){const t=$0(e),n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,[s,o]]of t){const a=r.get(s),l=r.get(o);!a||!l||n.push({id:wd(i),type:"heart",position:{x:(a.position_x+l.position_x)/2+72,y:(a.position_y+l.position_y)/2+42},draggable:!1,selectable:!1,data:{spouseA:s,spouseB:o}})}return n}function fp(e){const t=[],n=$0(e);for(const r of e){const s=r.father_id&&r.mother_id?[r.father_id,r.mother_id].sort().join("_"):null;if(s&&n.has(s)){const a=wd(s);t.push({id:`${a}-child-${r.id}`,source:a,target:r.id,sourceHandle:"heart-child",targetHandle:"child",type:"smoothstep",data:{relation:"heart-child"},style:{stroke:"#8b5cf6",strokeWidth:2}})}else r.father_id&&t.push({id:`${r.father_id}-father-${r.id}`,source:r.father_id,target:r.id,sourceHandle:"parent",targetHandle:"child",label:"B",type:"smoothstep",data:{relation:"father"},style:{stroke:"#2563eb",strokeWidth:2}}),r.mother_id&&t.push({id:`${r.mother_id}-mother-${r.id}`,source:r.mother_id,target:r.id,sourceHandle:"parent",targetHandle:"child",label:"M",type:"smoothstep",data:{relation:"mother"},style:{stroke:"#db2777",strokeWidth:2}})}return t}function hp(e,t){const n=[e],r=[e];for(;r.length>0;){const i=r.shift();for(const s of t)(s.father_id===i||s.mother_id===i)&&!n.includes(s.id)&&(n.push(s.id),r.push(s.id))}return n}function gA(){const e=L.useRef([]),[t,n,r]=IP([]),[i,s,o]=OP([]),[a,l]=L.useState(null),[u,c]=L.useState(null),d=L.useRef(new Map),f=L.useCallback(async($,T,P)=>{e.current=e.current.map(D=>D.id===$?{...D,[T]:P}:D),n(D=>D.map(S=>{if(S.id!==$)return S;const I=T==="photo_url"?"photoUrl":T;return{...S,data:{...S.data,[I]:P}}})),await Ne.from("members").update({[T]:P}).eq("id",$)},[n]),p=L.useCallback($=>{c($)},[]),m=L.useCallback($=>{const T=$.map(D=>dp(D,f,p)),P=pA($);n([...T,...P]),s(fp($))},[n,s,f,p]),v=L.useCallback(async()=>{if(!u)return;const $=hp(u,e.current);for(const P of $){const D=e.current.find(S=>S.id===P);D!=null&&D.spouse_id&&!$.includes(D.spouse_id)&&(await Ne.from("members").update({spouse_id:null}).eq("id",D.spouse_id),e.current=e.current.map(S=>S.id===D.spouse_id?{...S,spouse_id:null}:S))}const{error:T}=await Ne.from("members").delete().in("id",$);T||(e.current=e.current.filter(P=>!$.includes(P.id)),m(e.current),c(null))},[u,m]),_=L.useCallback(()=>c(null),[]);L.useEffect(()=>{async function $(){const{data:T}=await Ne.from("members").select("*").order("created_at",{ascending:!0});T&&(e.current=T,m(T))}$()},[m]);const g=L.useCallback(($,T)=>{const P=e.current.find(j=>j.id===T.id);if(!(P!=null&&P.spouse_id))return;const D=e.current.find(j=>j.id===P.spouse_id);if(!D)return;const S=T.position.x-P.position_x,I=T.position.y-P.position_y,R=D.position_x+S,M=D.position_y+I,b=[T.id,P.spouse_id].sort().join("_"),C=wd(b);n(j=>j.map(z=>z.id===P.spouse_id?{...z,position:{x:R,y:M}}:z.id===C?{...z,position:{x:(T.position.x+R)/2+72,y:(T.position.y+M)/2+42}}:z))},[n]),y=L.useCallback(($,T)=>{const P=T.id,{x:D,y:S}=T.position,I=e.current.find(C=>C.id===P),R=D-((I==null?void 0:I.position_x)??D),M=S-((I==null?void 0:I.position_y)??S);if(e.current=e.current.map(C=>C.id===P?{...C,position_x:D,position_y:S}:C),I!=null&&I.spouse_id){const C=e.current.find(j=>j.id===I.spouse_id);if(C){const j=C.position_x+R,z=C.position_y+M;e.current=e.current.map(H=>H.id===I.spouse_id?{...H,position_x:j,position_y:z}:H);const U=d.current.get(I.spouse_id);U&&clearTimeout(U),d.current.set(I.spouse_id,setTimeout(async()=>{await Ne.from("members").update({position_x:j,position_y:z}).eq("id",I.spouse_id),d.current.delete(I.spouse_id)},300))}}s(fp(e.current));const b=d.current.get(P);b&&clearTimeout(b),d.current.set(P,setTimeout(async()=>{await Ne.from("members").update({position_x:D,position_y:S}).eq("id",P),d.current.delete(P)},300))},[s]),h=L.useCallback($=>{$.source&&$.target&&l({sourceId:$.source,targetId:$.target})},[]),w=L.useCallback(async $=>{if(!a)return;const{sourceId:T,targetId:P}=a;if($==="spouse"){const D=e.current.find(S=>S.id===T);if(D){const S=D.position_x+220,I=D.position_y;await Promise.all([Ne.from("members").update({spouse_id:P}).eq("id",T),Ne.from("members").update({spouse_id:T,position_x:S,position_y:I}).eq("id",P)]),e.current=e.current.map(R=>R.id===T?{...R,spouse_id:P}:R.id===P?{...R,spouse_id:T,position_x:S,position_y:I}:R)}else await Promise.all([Ne.from("members").update({spouse_id:P}).eq("id",T),Ne.from("members").update({spouse_id:T}).eq("id",P)]),e.current=e.current.map(S=>S.id===T?{...S,spouse_id:P}:S.id===P?{...S,spouse_id:T}:S);m(e.current)}else{const D=$==="father"?"father_id":"mother_id";await Ne.from("members").update({[D]:T}).eq("id",P),e.current=e.current.map(S=>S.id===P?{...S,[D]:T}:S),m(e.current)}l(null)},[a,m]),k=L.useCallback(()=>l(null),[]),x=L.useCallback(async($,T)=>{var D;const P=(D=T.data)==null?void 0:D.relation;if(P==="heart-child"){if(!window.confirm("Xo quan h cha m ny?"))return;const S=T.target;await Ne.from("members").update({father_id:null,mother_id:null}).eq("id",S),e.current=e.current.map(I=>I.id===S?{...I,father_id:null,mother_id:null}:I),m(e.current)}else{if(!window.confirm("Xo quan h ny?"))return;const S=P==="father"?"father_id":"mother_id";await Ne.from("members").update({[S]:null}).eq("id",T.target),e.current=e.current.map(I=>I.id===T.target?{...I,[S]:null}:I),m(e.current)}},[m]),E=L.useCallback(async($,T)=>{await Promise.all([Ne.from("members").update({spouse_id:null}).eq("id",$),Ne.from("members").update({spouse_id:null}).eq("id",T)]),e.current=e.current.map(P=>P.id===$||P.id===T?{...P,spouse_id:null}:P),m(e.current)},[m]),N=L.useCallback(async()=>{const{data:$}=await Ne.from("members").insert({name:"Ngi mi",position_x:100+Math.random()*400,position_y:100+Math.random()*400}).select().single();$&&(e.current=[...e.current,$],n(T=>[...T,dp($,f,p)]))},[n,f,p]),O=L.useCallback(()=>{if(!u)return null;const $=e.current.find(P=>P.id===u),T=hp(u,e.current).length;return{name:($==null?void 0:$.name)||"",descendantCount:T}},[u]);return{nodes:t,edges:i,membersRef:e,onNodesChange:r,onEdgesChange:o,onNodeDrag:g,onNodeDragStop:y,handleConnect:h,handleAddMember:N,handleEdgeClick:x,handleDeleteMarriage:E,pendingConnection:a,confirmRelationship:w,cancelConnection:k,deleteTarget:u,getDeleteInfo:O,confirmDelete:v,cancelDelete:_}}const mo="b9a96ad6-6391-4d8b-8571-3261286d451f";function mA(e,t){if(e===mo)return null;const n=new Map;function r(c,d){n.has(c)||n.set(c,[]),n.has(d)||n.set(d,[]),n.get(c).push(d),n.get(d).push(c)}const i=new Map;for(const c of t)if(c.spouse_id){const d=[c.id,c.spouse_id].sort(),f=d.join("_");i.has(f)||i.set(f,d)}for(const[c,[d,f]]of i){const p=`heart_${c}`;r(d,p),r(f,p)}for(const c of t){n.has(c.id)||n.set(c.id,[]);const f=c.father_id&&c.mother_id?[c.father_id,c.mother_id].sort().join("_"):null;if(f&&i.has(f)){const m=`heart_${f}`;r(m,c.id)}else c.father_id&&r(c.id,c.father_id),c.mother_id&&r(c.id,c.mother_id)}function s(c){const d=new Map;d.set(c,0);const f=[c];let p=0;for(;p<f.length;){const m=f[p++],v=d.get(m);for(const _ of n.get(m)||[])d.has(_)||(d.set(_,v+1),f.push(_))}return d}const o=s(e),a=s(mo),l=o.get(mo);if(l===void 0)return null;const u=new Set;for(const[c,d]of o){const f=a.get(c);f!==void 0&&d+f===l&&u.add(c)}u.add(mo);for(const[c,[d,f]]of i){const p=`heart_${c}`;u.has(p)&&(u.add(d),u.add(f))}return u}const yA={member:cA,heart:fA};function vA(){const{nodes:e,edges:t,membersRef:n,onNodesChange:r,onEdgesChange:i,onNodeDrag:s,onNodeDragStop:o,handleConnect:a,handleAddMember:l,handleEdgeClick:u,handleDeleteMarriage:c,pendingConnection:d,confirmRelationship:f,cancelConnection:p,deleteTarget:m,getDeleteInfo:v,confirmDelete:_,cancelDelete:g}=gA(),[y,h]=L.useState(null),w=L.useMemo(()=>y?mA(y,n.current):null,[y,n]),k=L.useMemo(()=>w?t.map($=>{const T=w.has($.source)&&w.has($.target);return{...$,style:{...$.style,opacity:T?1:.15}}}):t,[t,w]),x=L.useCallback(($,T)=>{T.id.startsWith("heart_")||h(T.id)},[]),E=L.useCallback(()=>{h(null)},[]),N=L.useCallback(($,T)=>{if(!T.id.startsWith("heart_")||!window.confirm("Xo quan h kt hn ny?"))return;const P=T.data;c(P.spouseA,P.spouseB)},[c]),O=v();return A.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[A.jsx(vd.Provider,{value:w,children:A.jsxs(RP,{nodes:e,edges:k,nodeTypes:yA,onNodesChange:r,onEdgesChange:i,onConnect:a,onNodeDrag:s,onNodeDragStop:o,onEdgeClick:u,onNodeDoubleClick:N,onNodeMouseEnter:x,onNodeMouseLeave:E,fitView:!0,defaultEdgeOptions:{type:"smoothstep"},children:[A.jsx(DP,{}),A.jsx(WP,{}),A.jsx(iA,{}),A.jsx(Os,{position:"top-left",children:A.jsx("button",{className:"add-member-btn",onClick:l,children:"+ Thm thnh vin"})})]})}),d&&A.jsx(hA,{onSelect:f,onCancel:p}),m&&O&&A.jsx("div",{className:"dialog-overlay",onClick:g,children:A.jsxs("div",{className:"dialog",onClick:$=>$.stopPropagation(),children:[A.jsx("h3",{children:"Xc nhn xo"}),A.jsxs("p",{children:["Xo ",A.jsx("strong",{children:O.name}),O.descendantCount>1&&` v ${O.descendantCount-1} ngi con chu`,"?"]}),A.jsxs("div",{className:"dialog-buttons",children:[A.jsx("button",{className:"btn-danger",onClick:_,children:"Xo"}),A.jsx("button",{className:"btn-cancel",onClick:g,children:"Hu"})]})]})})]})}function wA(){const[e,t]=L.useState(null);return L.useEffect(()=>{Ne.auth.getSession().then(({data:{session:r}})=>{t(!!r)});const{data:{subscription:n}}=Ne.auth.onAuthStateChange((r,i)=>{t(!!i)});return()=>n.unsubscribe()},[]),e===null?A.jsx("div",{className:"password-gate",children:A.jsx("p",{style:{color:"white",fontSize:"1.2rem"},children:"ang ti..."})}):e?A.jsx(vA,{}):A.jsx(U1,{onAuthenticated:()=>t(!0)})}Tm(document.getElementById("root")).render(A.jsx(L.StrictMode,{children:A.jsx(wA,{})}));
